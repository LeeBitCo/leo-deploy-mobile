webpackJsonp([52],{"/whH":function(t,e){},EdHm:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("6uKG"),a=o.n(s),n=o("Gwi0"),r=o("NpYV"),i={data:function(){return{userName:"",type:"身份证",IDcard:"",phone:"",carNum:"",month:"",long_num:"请选择房间号",numList:[],show_num:!1}},created:function(){this.$store.commit("setHeader","办理入住"),JSON.parse(localStorage.getItem("orderday"))?(this.day=JSON.parse(localStorage.getItem("orderday")),this.userName=this.day.roomUser,this.orderId=this.day.id):JSON.parse(localStorage.getItem("ordermonth"))&&(this.month=JSON.parse(localStorage.getItem("ordermonth")),this.userName=this.month.roomUser,this.orderId=this.month.id),this.getinfo_id(),this.getNum()},methods:{getinfo_id:function(){var t=this;Object(n.K)(this.orderId).done(function(e){t.crrentId=e.data[0].id})},getNum:function(){var t=this,e=this.month.virtualRoomScaleId?this.month.virtualRoomScaleId:this.day.virtualRoomScaleId;Object(n._1)(e).done(function(e){t.numList=e.data,t.long_num=t.numList[0].roomSn,t.roomId=t.numList[0].id,0==t.numList.length&&Object(r.Toast)({message:"暂无空闲房间可选择",duration:900})})},btn_choose:function(){this.show_num=!0},choosed:function(t){this.long_num=t.roomSn,this.roomId=t.id,this.show_num=!1},bthDeal:function(){var t=this;if(!this.IDcard||!/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(this.IDcard))return Object(r.Toast)({message:"请输入正确的身份证号",duration:1e3,className:"toasts"}),this.IDcard="",!1;if("请选择房间号"==this.long_num)return Object(r.Toast)({message:"请选择房间号",duration:1e3,className:"toasts"}),!1;if(!this.phone||!/^1[3456789]\d{9}$/.test(this.phone))return Object(r.Toast)({message:"请输入正确的手机号",duration:1e3,className:"toasts"}),this.phone="",!1;r.MessageBox.confirm("姓名："+this.userName+"<br />\n        证件号："+this.IDcard+"<br />\n        房间号："+this.long_num+"<br />\n        手机号："+this.phone+"<br />\n        车牌号："+(this.carNum?this.carNum:"空"),"办理入住信息确认").then(function(){t.roomAssignComfirm()}).catch(function(){})},roomAssignComfirm:function(){var t=this.crrentId;if(this.month){var e=a()({orderId:this.orderId,roomId:this.roomId,roomUser:this.userName,idCard:this.IDcard,phone:this.phone,carNo:this.carNum,remark:""});Object(n._63)(t,e).done(function(t){Object(r.Toast)({message:t.msg,duration:1e3}),setTimeout("window.history.go(-1)",2e3)})}else{var o=a()({roomId:this.roomId,roomUser:this.userName,idCard:this.IDcard,phone:this.phone,carNo:this.carNum,remark:""});Object(n._47)(t,o).done(function(t){Object(r.Toast)({message:t.msg,duration:1e3}),setTimeout("window.history.go(-1)",2e3)})}}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"margin-top":"15px"}},[o("div",[o("div",{staticStyle:{"text-align":"left",padding:"0 0 10px 20px","font-size":"0.8rem"}},[t._v("完善身份信息")]),t._v(" "),o("mt-field",{attrs:{label:"姓名",placeholder:"请输入完整姓名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),o("mt-field",{attrs:{label:"证件类型",readonly:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v(" "),o("mt-field",{attrs:{label:"证件号",attr:{maxlength:18},type:"text",placeholder:"请输入证件号"},model:{value:t.IDcard,callback:function(e){t.IDcard=e},expression:"IDcard"}}),t._v(" "),o("div",{staticClass:"long",on:{click:t.btn_choose}},[o("div",[t._v("房间号")]),t._v("  \n      "),o("div",[t._v(t._s(t.long_num)+" >")])]),t._v(" "),o("div",{staticStyle:{"margin-top":"20px"}},[o("mt-field",{attrs:{label:"手机号",placeholder:"请输入手机号",attr:{maxlength:11},type:"tel"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._v(" "),o("mt-field",{attrs:{label:"车牌号",placeholder:"请输入车牌号"},model:{value:t.carNum,callback:function(e){t.carNum=e},expression:"carNum"}})],1),t._v(" "),0!=t.numList.length?o("mt-popup",{staticClass:"popup",attrs:{position:"bottom"},model:{value:t.show_num,callback:function(e){t.show_num=e},expression:"show_num"}},t._l(t.numList,function(e,s){return o("div",{key:s,staticClass:"num_box",on:{click:function(o){return t.choosed(e)}}},[t._v(t._s(e.roomSn))])}),0):t._e(),t._v(" "),o("mt-button",{staticStyle:{"margin-top":"50px",width:"90%","background-color":"#f60"},attrs:{type:"primary"},on:{click:t.bthDeal}},[t._v("办理入住")])],1)])},staticRenderFns:[]};var c=o("k6Sl")(i,m,!1,function(t){o("/whH")},"data-v-dd574ac6",null);e.default=c.exports}});
//# sourceMappingURL=52.a66a7dd3edf0336d2f161758782009845.js.map