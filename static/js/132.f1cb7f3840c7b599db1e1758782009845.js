webpackJsonp([132],{"/tsj":function(t,e){},Cd3u:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("NpYV"),n=o("Gwi0"),i={data:function(){return{getInfo:"",deposit:"",max_deposit:"",renson:"",contact_show:!1}},created:function(){this.info=this.$route.query,this.$store.commit("setHeader",this.info.roomSn+"查房"),this.getDeposit()},methods:{clearNoNum:function(t){(t=(t=(t=(t=(t=t.toString()).replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=t&&(t=parseFloat(t)),this.deposit=t},getDeposit:function(){var t=this;Object(n.L)(this.info.id).done(function(e){t.getInfo=e.data,t.max_deposit=t.getInfo.deposit-t.getInfo.depositCut+t.getInfo.depositReverseAmount})},checkRoom:function(){var t={isUse:"true",depositCut:this.deposit,depositCutReason:this.renson};Object(n._75)(this.info.cleanOrderId,t).done(function(t){Object(s.Toast)({message:t.msg,duration:900}),setTimeout("window.history.go(-1)",900)})},online:function(){var t={isUse:"false",depositCut:this.deposit,depositCutReason:this.renson};Object(n._75)(this.info.cleanOrderId,t).done(function(t){Object(s.Toast)({message:t.msg,duration:900}),setTimeout("window.history.go(-1)",900)})},contact:function(){this.contact_show=!0},getPassword:function(){Object(n._2)(this.info.id).done(function(t){Object(s.Toast)({message:t.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}},watch:{deposit:function(t,e){t>this.max_deposit?(Object(s.Toast)({message:"不能超过"+this.max_deposit+"元",duration:900}),this.deposit=""):t<this.max_deposit&&0!=t&&(this.renson||Object(s.Toast)({message:"请填写扣款原因",duration:900}))}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{attrs:{id:"top"}},[t._v("顾客消费或赔偿")]),t._v(" "),o("div",{attrs:{id:"center"}},[o("div",{staticClass:"price_box"},[o("van-field",{attrs:{label:"扣款金额",type:"number",placeholder:"请输入扣款金额"},on:{keyup:function(e){return t.clearNoNum(t.deposit)}},model:{value:t.deposit,callback:function(e){t.deposit=e},expression:"deposit"}}),t._v(" "),o("span",{staticClass:"span"},[t._v("最多"+t._s(t.max_deposit)+"元")])],1),t._v(" "),o("van-field",{attrs:{label:"扣款原因",placeholder:"扣款原因将展示给顾客"},model:{value:t.renson,callback:function(e){t.renson=e},expression:"renson"}})],1),t._v(" "),o("mt-button",{staticClass:"buttom bth_t50",attrs:{type:"primary"},on:{click:t.checkRoom}},[t._v("查房完成")]),t._v(" "),o("mt-button",{staticClass:"buttom",attrs:{type:"primary"},on:{click:t.online}},[t._v("该房间未使用")]),t._v(" "),o("mt-button",{staticClass:"buttom",attrs:{type:"primary"},on:{click:t.contact}},[t._v("联系顾客")]),t._v(" "),1==t.info.lockType?o("mt-button",{staticClass:"buttom",attrs:{type:"primary"},on:{click:t.getPassword}},[t._v("获取离线密码")]):t._e(),t._v(" "),o("mt-popup",{staticClass:"contact",attrs:{position:"center"},model:{value:t.contact_show,callback:function(e){t.contact_show=e},expression:"contact_show"}},[t.getInfo.order?o("div",[t._v("顾客电话："+t._s(t.getInfo.order.phone))]):t._e()])],1)},staticRenderFns:[]};var c=o("k6Sl")(i,a,!1,function(t){o("/tsj")},"data-v-20a19924",null);e.default=c.exports}});
//# sourceMappingURL=132.f1cb7f3840c7b599db1e1758782009845.js.map