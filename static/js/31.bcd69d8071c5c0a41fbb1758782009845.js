webpackJsonp([31],{"3iBD":function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("vvmr"),n=t.n(r),i=t("6uKG"),s=t.n(i),a=t("l+io"),d=t.n(a),f=t("RmFe"),l=t.n(f),c=t("tN5p"),u=t("Gwi0"),m={data:function(){return{NowInfo:[],rentInfo:{},roomInfo:[],lifeInfo:[],allInfo:[],lastEndTime:""}},filters:{dataFormat:function(o){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?l()(o).format("YYYY年MM月DD"):l()(o).format("YYYY-MM-DD")}},created:function(){this.$store.commit("setHeader","租赁信息"),this.$route.query.orderRoomId?this.getCurrentInfo(this.$route.query.orderRoomId):(this.getCooperDetails(this.$route.query.cooperOrderId),this.getCooperBill(this.$route.query.cooperOrderId))},methods:{getCooperDetails:function(o){var e=this;Object(c.c)({cooperOrderId:o}).done(function(t){e.getCooperLast(o),e.NowInfo=t.data})},getCooperLast:function(o){Object(c.k)({cooperOrderRoomId:o}).done(function(o){})},getCooperBill:function(o){var e=this,t=[Object(c.m)({cooperOrderRoomId:o}),Object(c.b)({cooperOrderRoomId:o})];d.a.all(t).then(function(o){var t=[],r=[];o.map(function(o,e){"1"==o.ret&&"0"==e?r=o.data:"1"==o.ret&&"1"==e&&(t=o.data)});var n=[];r.length>0&&r.map(function(o,t){var n={new_endTime:e.lastDay(o.startTime),diff:e.difffDay(e.lastDay(o.startTime)),set_round:t,set_length:r.length,showEndTime:e.lastDay(o.endTime)};return s()(o,n),o}),t.length>0&&(n=t.map(function(o,r){var n={diff:e.difffDay(o.endTime),new_endTime:o.endTime,set_round:r,set_life:!0,set_length:t.length,showEndTime:e.lastDay(o.endTime)};return s()(o,n),o})),e.allInfo=n}).catch(function(o){console.log("err",o)})},getCurrentInfo:function(o){var e=this;Object(u.J)(o).done(function(t){e.NowInfo=t.data,e.getinfo_life(o)})},getinfo_life:function(o){var e=this;Object(u.y)(o).done(function(t){e.lifeInfo=t.data.map(function(o,r){return n()({},o,{diff:e.difffDay(o.endTime),new_endTime:o.endTime,set_round:r,set_life:!0,set_length:t.data.length,showEndTime:e.lastDay(o.endTime)})}),e.getinfo_room(o)})},getinfo_room:function(o){var e=this;Object(u.V)(o).done(function(o){if(e.roomInfo=o.data,0!=e.roomInfo.length){for(var t=0;t<e.roomInfo.length;t++)e.roomInfo[t].first_room=0==t,e.roomInfo[t].new_endTime=e.lastDay(e.roomInfo[t].startTime),e.roomInfo[t].diff=e.difffDay(e.roomInfo[t].new_endTime),e.roomInfo[t].showEndTime=e.lastDay(e.roomInfo[t].endTime);e.allInfo=e.roomInfo.concat(e.lifeInfo);var r,n=[],i=[];e.allInfo.map(function(o){"1"==o.payStatus?n.push(o):i.push(o)}),n.sort(function(o,e){return Date.parse(e.new_endTime)-Date.parse(o.new_endTime)}),i.sort(function(o,e){return e.diff>o.diff?1:-1}),r=i.concat(n),e.allInfo=r}})},lastDay:function(o){l()();return l()(o).subtract(1,"day").format("YYYY-MM-DD")},difffDay:function(o){var e=l()().format("YYYY-MM-DD");return l()(o).diff(l()(e),"day")},goDetail:function(){this.$router.push({path:"/details",query:{orderRoomId:this.$route.query.cooperOrderId?"":this.NowInfo.id,cooperOrderId:this.$route.query.cooperOrderId,cooperationName:this.NowInfo.order.roomUser}})},goRoom:function(o){o.set_life?(localStorage.removeItem("life_fee"),this.$router.push({path:"/lifeFeetrans",query:{cooperOrderId:this.$route.query.cooperOrderId,lifeCostBillId:o.id,set_length:o.set_length,set_round:o.set_round}})):this.$route.query.cooperOrderId?this.$router.push({path:"/business-room-details",query:{cooperOrderId:this.$route.query.cooperOrderId,cooperRentalBillId:o.id,set_length:o.set_length,set_round:o.set_round}}):(this.$router.push({path:"/roomFeeD",query:{rentalBillId:o.id,orderType:this.NowInfo.orderType}}),localStorage.setItem("isFirst_room",o.first_room))},paySetting:function(o){0==o.status&&0==o.set_round&&this.$route.query.cooperOrderId&&this.$router.push({path:"/business-pay-set",query:{cooperOrderId:o.cooperOrderId,cooperLifeCostBillId:o.id}})},choose:function(o){this.$route.query.cooperOrderId?this.$router.push({path:"/add_bill_two",query:{title:o,orderId:this.NowInfo.orderId,orderRoomId:this.NowInfo.id,startTime:this.NowInfo.order.startTime,endTime:this.NowInfo.order.endTime}}):this.$router.push({path:"/add_bill",query:{title:o,orderId:this.NowInfo.orderId,orderRoomId:this.NowInfo.id,startTime:this.NowInfo.order.startTime,endTime:this.NowInfo.order.endTime}})}}},p={render:function(){var o=this,e=o.$createElement,r=o._self._c||e;return o.NowInfo?r("div",{staticStyle:{"background-color":"#f6f6f6","font-size":"15px",padding:"20px 0",position:"fixed",top:"50px",bottom:"0px",left:"0px",right:"0px","overflow-y":"scroll"}},[r("section",[r("div",{staticClass:"headUrl"},[o.NowInfo.order?r("img",{attrs:{src:o.NowInfo.order&&o.NowInfo.order.headUrl||o.NowInfo.sysUser&&o.NowInfo.sysUser.headUrl,alt:""}}):r("img",{attrs:{src:t("1NMU"),alt:""}}),o._v(" "),r("div",{staticClass:"headUrl_fo"},[r("div",{staticClass:"name"},[r("p",[o._v(o._s(o.NowInfo.order&&o.NowInfo.order.roomUser||o.$route.query.cooperationName||"暂无"))]),o._v(" "),o.$route.query.cooperOrderId?o._e():r("p",{staticClass:"c_88 line"},[o._v(o._s(o.NowInfo.virtualRoomScale&&o.NowInfo.virtualRoomScale.scaleName?o.NowInfo.virtualRoomScale.scaleName:"暂无")+"-"+o._s(o.NowInfo.roomSn))]),o._v(" "),r("p",{staticClass:"c_88 line"},[o._v("密码有效期至：\n            "),o.NowInfo.order&&o.NowInfo.order.payment>"0"?r("span",{staticStyle:{color:"#000","font-weight":"bold"}},[o._v(o._s(o._f("dataFilter")(o.NowInfo.effectTime,"YYYY.MM.DD")))]):r("span",[o._v("暂无")])])]),o._v(" "),r("div",{staticClass:"img_right",on:{click:o.goDetail}},[r("span",{staticClass:"c_88"},[o._v("租赁详情")]),o._v(" "),r("img",{attrs:{src:t("jkz5"),alt:""}})])])])]),o._v(" "),0==o.lifeInfo.length?r("div",{staticClass:"add_btn",on:{click:function(e){return o.choose("生活账单")}}},[r("van-icon",{staticStyle:{"padding-right":"10px"},attrs:{name:"add",color:"#FF7F47",size:"18px"}}),o._v(" "),r("div",[o._v("添加生活账单")])],1):o._e(),o._v(" "),r("section",[r("div",{attrs:{id:"roomBox"}},o._l(o.allInfo,function(e,n){return r("div",{key:n,staticClass:"room_fo"},[r("div",{staticClass:"loop",class:1==e.payStatus?"payed":"nopay"},[r("div",{staticClass:"loop_l",on:{click:function(t){return o.goRoom(e)}}},[r("div",[r("p",{staticStyle:{"white-space":"nowrap"}},["3"==o.NowInfo.orderType?r("span",[o._v("\n                  "+o._s(o._f("dataFilter")(e.startTime,"YYYY.MM.DD"))+"~"+o._s(o._f("dataFilter")(e.showEndTime,"YYYY.MM.DD"))+"\n                ")]):o._e(),o._v(" "),"4"==o.NowInfo.orderType?r("span",[o._v("\n                  "+o._s(e.new_endTime?e.new_endTime:"")+"\n                ")]):o._e(),o._v(" "),e.set_life?r("span",{staticClass:"w16",class:"1"==e.payStatus?"edf":"bc"},[o._v("生活")]):r("span",{staticClass:"w16",class:"1"==e.payStatus?"ffa":"ff7"},[o._v("租金")])]),o._v(" "),e.diff>"0"&&"0"==e.payStatus?r("p",{staticClass:"f12"},[o._v("距收款日："+o._s(Math.abs(e.diff))+"天")]):e.diff<"0"&&"0"==e.payStatus?r("p",{staticClass:"c_f0 f12"},[o._v("已逾期"+o._s(Math.abs(e.diff))+"天")]):"0"==e.diff&&"0"==e.payStatus?r("p",{staticClass:"f12"},[o._v("今日到期")]):"1"==e.payStatus?r("p",{staticClass:"f12"},[o._v("到账日期："+o._s(e.payTime?e.payTime.substring(0,10):e.payTime))]):o._e()]),o._v(" "),"1"==e.payStatus?r("img",{staticClass:"ispayed",attrs:{src:t("vV8R"),alt:""}}):o._e()]),o._v(" "),e.set_life?r("p",{staticClass:"money",on:{click:function(t){return o.paySetting(e)}}},[o._v("\n              "+o._s(0==e.status&&0==e.set_round&&o.$route.query.cooperOrderId?"费用设置":"￥"+e.totalPrice)+"\n          ")]):r("p",{staticClass:"money"},[o._v("¥"+o._s(e.roomPrice))])])])}),0)])]):o._e()},staticRenderFns:[]};var A=t("k6Sl")(m,p,!1,function(o){t("V+ji")},"data-v-758b8c16",null);e.default=A.exports},"V+ji":function(o,e){},vV8R:function(o,e){o.exports="data:image/png;base64,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"}});
//# sourceMappingURL=31.bcd69d8071c5c0a41fbb1758782009845.js.map