webpackJsonp([88],{"+oqL":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("vvmr"),s=i.n(r),o=i("32Wh"),a=i.n(o),n=i("s/F+"),c=i.n(n),l=i("yrbl"),u=i.n(l),d=i("NpYV"),f=i("UJbh"),h=i("tN5p"),p={elecPrice:1,waterPrice:2,gasPrice:3},_={data:function(){return{price:"",first:"查看",bothInfo:[{name:"后付费",statu:!0},{name:"预付款",statu:!1}],localInfo:["费用项目","价格","初始读数"],lifeCost:[],add_box:!1,lastCost:[],crrent_info:"",elecPayModel:"",foreverCost:[],unitList:{1:"元/度",2:"元/吨",3:"元/m³",4:"元/月",5:"元/月",6:"元/月",7:"元/月"},readingStatus:!0}},created:function(){this.$store.commit("setHeader","费用设置"),this.getMore()},methods:{clearNoNum:function(t){var e=t.price;(e=(e=(e=(e=(e=e.toString()).replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=e&&(e=parseFloat(e)),t.price=e},getMore:function(){var t,e=this;Object(f.a)({dictType:"business_life_cost"}).done((t=u()(c.a.mark(function t(i){var r,s,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.b)({cooperOrderRoomId:e.$route.query.cooperOrderRoomId});case 2:if(0!=(r=t.sent).data.length){t.next=5;break}return t.abrupt("return",!1);case 5:e.readingStatus=r.data.some(function(t){return 1==t.status}),r=r.data,s=r[0],o=i.data.map(function(t){switch(t.price=s[t.dictValue],t.dictValue){case"elecPrice":t.allRoom=r.filter(function(t){return t.elecPrice>0}).length;break;case"waterPrice":t.allRoom=r.filter(function(t){return t.waterPrice>0}).length;break;case"gasPrice":t.allRoom=r.filter(function(t){return t.gasPrice>0}).length;break;default:t.showlength=-1}switch(t.showlength=0,t.dictValue){case"elecPrice":t.showlength=r.filter(function(t){return t.elecPrice>0&&null!=t.preElecDegree}).length;break;case"waterPrice":t.showlength=r.filter(function(t){return t.waterPrice>0&&null!=t.preWaterDegree}).length;break;case"gasPrice":t.showlength=r.filter(function(t){return t.gasPrice>0&&null!=t.preGasDegree}).length;break;default:t.showlength=-1}return t}),e.foreverCost=o,e.lifeCost=o;case 11:case"end":return t.stop()}},t,e)})),function(e){return t.apply(this,arguments)}))},setPrice:function(t){this.$router.push({path:"/business-set-reading",query:{dictLabel:t.dictLabel,dictValue:p[t.dictValue],cooperOrderId:this.$route.query.cooperOrderId,cooperLifeCostBillId:this.$route.query.cooperLifeCostBillId}})},eleStyle:function(t){this.elecPayModel=t,0==t?(this.bothInfo[0].statu=!0,this.bothInfo[1].statu=!1):(this.bothInfo[0].statu=!1,this.bothInfo[1].statu=!0)},remove:function(t){var e=t.id;this.lifeCost=this.lifeCost.filter(function(t){return t.id!=e})},addLifePay:function(){var t=this;if(this.foreverCost.length>0){this.lastCost=this.foreverCost.filter(function(e){return!t.lifeCost.includes(e)});for(var e=0;e<this.lastCost.length;e++)this.lastCost[e].dictPrice=""}if(0==this.lastCost.length)return Object(d.Toast)({message:"暂无可添加",duration:900}),!1;this.add_box=!0},choose_item:function(t){for(var e in this.otherAmount)e==t.dictValue&&(t.dictPrice=this.otherAmount[e]);this.lifeCost=[].concat(a()(this.lifeCost),[t]),this.add_box=!1},save:function(){var t={};this.lifeCost.forEach(function(e){t[e.dictValue]=e.price});s()({cooperLifeCostBillId:this.$route.query.cooperLifeCostBillId},t)}},watch:{}},v={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-top":"15px","font-size":"0.8rem",position:"fixed",top:"50px",bottom:"0px",left:"0px",right:"0px","overflow-y":"scroll",color:"#000"}},[r("div",[1==t.crrent_info.ammeter?r("p",{staticClass:"life_box"}):t._e(),t._v(" "),1==t.crrent_info.ammeter?r("div",{staticClass:"rent_box"},[r("div",[t._v("电费方式")]),t._v(" "),t._l(t.bothInfo,function(e,s){return r("div",{key:s},[r("div",{staticClass:"rent_right",on:{click:function(e){return t.eleStyle(s)}}},[0==e.statu?r("img",{attrs:{src:i("SJ61"),alt:""}}):r("img",{attrs:{src:i("g+nT"),alt:""}}),t._v(" "),r("p",[t._v(t._s(e.name))])])])})],2):t._e(),t._v(" "),r("p",{staticClass:"life_box"}),t._v(" "),r("div",{staticClass:"live_p"},[r("p",[t._v("生活缴费")]),t._v(" "),r("img",{staticClass:"img_add_delete w20",attrs:{src:i("6m+W"),alt:""},on:{click:t.addLifePay}})]),t._v(" "),t._m(0),t._v(" "),t.lifeCost.length>0?r("div",t._l(t.lifeCost,function(e,s){return r("table",{key:s,staticClass:"info_box"},[r("tr",[r("td",[r("div",[r("img",{staticClass:"img_add_delete pr4",attrs:{src:i("/hLb"),alt:""},on:{click:function(i){return t.remove(e)}}}),t._v(" "),r("span",[t._v(t._s(e.dictLabel))])])]),t._v(" "),r("td",{staticStyle:{"-border":"1px solid red",width:"44%",display:"flex","align-items":"center"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"input_box f14",attrs:{type:"number",step:"1",min:"0",placeholder:"请输入"},domProps:{value:e.price},on:{keyup:function(i){return t.clearNoNum(e)},input:function(i){i.target.composing||t.$set(e,"price",i.target.value)}}}),t._v(" "),r("span",{staticClass:"f14 cb2"},[t._v(t._s(t.unitList[e.dictSort]))])]),t._v(" "),-1!=e.showlength?r("td",{staticClass:"f14",on:{click:function(i){return t.setPrice(e)}}},[r("span",{style:{color:e.showlength==e.allRoom?"#02BC6C":"#FF1D1D"}},[t._v(t._s(e.showlength==e.allRoom?"已完成":"未完成"))]),t._v(" "),r("span",[t._v(t._s(e.showlength)+"/ "+t._s(e.allRoom))]),t._v(" "),r("van-icon",{staticClass:"cb2",attrs:{name:"arrow"}})],1):r("td")])])}),0):t._e(),t._v(" "),0==t.readingStatus?r("mt-button",{staticClass:"button",on:{click:t.save}},[t._v("保存")]):t._e(),t._v(" "),r("mt-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.add_box,callback:function(e){t.add_box=e},expression:"add_box"}},t._l(t.lastCost,function(e,i){return r("div",{key:i},[r("p",{staticStyle:{"line-height":"50px","border-bottom":"1px solid #ebebeb"},on:{click:function(i){return t.choose_item(e)}}},[t._v(t._s(e.dictLabel))])])}),0)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"local_info"},[e("span",[this._v("费用项目")]),this._v(" "),e("span",{staticClass:"w30"},[this._v("价格")]),this._v(" "),e("span",{staticClass:"w50"},[this._v("初始读数")])])}]};var m=i("k6Sl")(_,v,!1,function(t){i("dSZ0")},"data-v-60978840",null);e.default=m.exports},dSZ0:function(t,e){}});
//# sourceMappingURL=88.657d238a31365d8ce0e11758782009845.js.map