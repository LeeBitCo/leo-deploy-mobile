webpackJsonp([121],{"1Srz":function(t,e){},rb3T:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("6uKG"),s=i.n(o),r=i("zHPH"),a=i.n(r),n=i("HkQL"),l=i.n(n),d=i("fdz6"),c=i.n(d),h=i("UJbh"),u=i("NpYV"),m=i("P5P/"),p=/([yMdhsm])(\1*)/g;function _(t,e){for(var i=e-(t+"").length,o=0;o<i;o++)t="0"+t;return t}var f=function(t,e){return(e=e||"yyyy-MM-dd").replace(p,function(e){switch(e.charAt(0)){case"y":return _(t.getFullYear(),e.length);case"M":return _(t.getMonth()+1,e.length);case"d":return _(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return _(t.getHours(),e.length);case"m":return _(t.getMinutes(),e.length);case"s":return _(t.getSeconds(),e.length)}})},v=i("RmFe"),y=i.n(v),T=i("Gwi0"),g=i("tN5p"),b=i("TKTC"),C={name:"OrderDay",data:function(){return{title:"请选择基础房型",title_0:"请选择产品房型",hotelStyle:[],id:null,disabledBtnSearch:!1,disabledBtnComfirm:!1,hotelStyleChoose:!1,hotelStyleChoosed:!1,orderSourceChoose:!1,hotelStyleChooseIndex:null,orderInfo:{externalOrderSn:"",roomUser:"",roomNum:1,startTime:f(new Date,"yyyy-MM-dd"),diffDay:1,orderSource:"",phone:"",realAmount:""},orderSource:[],orderfirstName:"",roomNumResult:null,opened:!1,retShow:!0,roomNum:"",scaleName_0:"",proList:[],pro_show:!1,pro_show_0:!1,freeNum:"",type:"日租",types:[{num:"1",name:"日租"},{num:"3",name:"长租"}],typeShow:!1,pay:"请选择",pay_show:!1,options:[],delay:!1,deposit:!1,payTimeType:!1,endtime:"",numList:!1,currentTime:"",timeList:["12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00","23:59","整晚保留"],weekList:["周日","周一","周二","周三","周四","周五","周六"],timeShow:!1,computerDiffDay:"",ComeTime:!1,radio:"1",totleAmount:null,dayList:[],columns:[],billCycle:"",showPicker:!1,newProList:[],typeShowPicker:!1,orderType_show:!1,hoursLong_show:!1,hours_left_show:!1,hours_right_show:!1,customerTypes:[],billCycleType:"",customerType:"1",orderTypeAll:[{num:"1",name:"日租"},{num:2,name:"小时房"}],orderTypeChoosed:"日租",hours_left:null,housrTime:null,minHour:1,maxHour:23,minHourRight:1,maxHourRight:23,minMinuteRight:0,orderTypeChoosed_type:"1",arrLeft:[],housrTime_l:"09:00",housrTime_r:"18:00"}},created:function(){this.getOrderType(),this.hotelId=this.$route.query.hotelId},mounted:function(){this.$store.commit("setHeader","订单同步-日租");var t=new Date;t.setTime(t.getTime()-864e5),this.cu_time=t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())},computed:{endTime:function(){if(!this.orderInfo.startTime)return null;var t=this.orderInfo.startTime.split("-"),e=c()(t,3),i=e[0],o=e[1],s=e[2],r=new Date(i,Number(o)-1,s),a=new Date(r.getTime()+864e5*this.orderInfo.diffDay);return f(a,"yyyy-MM-dd")},getNum:function(){return this.orderInfo.roomNum},totlePrice:function(){var t;return t=this.dayList.reduce(function(t,e,i,o){return t+Number(e.price)},0),console.log("input disabled totlePrice"),Number(t*this.orderInfo.roomNum).toFixed(2)}},methods:{confirmHoursLeft:function(t){this.arrLeft=t.split(":"),this.hours_startTime=y()(this.orderInfo.startTime).format("YYYY-MM-DD")+" "+t+":00",this.housrTime_l=t,this.hours_left_show=!1,this.hours_right_show=!0,this.minHourRight=this.arrLeft[0],this.minMinuteRight=this.arrLeft[1]},confirmHoursRight:function(t){this.hours_endTime=y()(this.orderInfo.startTime).format("YYYY-MM-DD")+" "+t+":00",this.housrTime_r=t,this.housrTime=this.housrTime_l+"-"+this.housrTime_r,this.hours_right_show=!1;var e=y()(this.hours_endTime).diff(y()(this.hours_startTime),"hour");e<this.orderInfo.diffDay&&(this.orderInfo.diffDay=e),this.title="请选择基础房型",this.title_0="请选择产品房型"},confirmHoursLong:function(t){t>y()(this.hours_endTime).diff(y()(this.hours_startTime),"hour")&&(this.housrTime="请选择有效时段"),this.orderInfo.diffDay=t,this.hoursLong_show=!1},confirmOrderType:function(t){this.orderTypeChoosed=t.name,this.orderTypeChoosed_type=t.num,this.orderInfo.startTime=y()().format("YYYY-MM-DD"),"2"==this.orderTypeChoosed_type?(this.orderInfo.diffDay="4",this.hours_startTime=y()(this.orderInfo.startTime).format("YYYY-MM-DD")+" 09:00:00",this.hours_endTime=y()(this.orderInfo.startTime).format("YYYY-MM-DD")+" 18:00:00",this.housrTime="09:00-18:00",this.title="请选择基础房型",this.title_0="请选择产品房型",this.$store.commit("setHeader","订单同步-时租")):this.orderInfo.diffDay="1",this.orderType_show=!1},onConfirm:function(t){this.billCycle=t+" ＞",this.payeeAccountId=this.columnsAll.find(function(e){return e.accountName==t}).id,this.showPicker=!1},chooseComeTime:function(t){this.title="请选择基础房型",this.title_0="请选择产品房型",this.ComeTime=!1,this.orderInfo.diffDay=t},getDateStr:function(t){var e=new Date;return e.setDate(e.getDate()+t),e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())},time:function(){this.title="请选择基础房型",this.title_0="请选择产品房型",this.id=null},priceTwoNum:function(t,e){if("3"==e)for(var i=0;i<this.dayList.length;i++){var o=this.dayList[i];t==i&&(o.price=o.price.toString(),o.price=o.price.replace(/[^\d.]/g,""),o.price=o.price.replace(/\.{2,}/g,"."),o.price=o.price.replace(".","$#$").replace(/\./g,"").replace("$#$","."),o.price=o.price.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),o.price.indexOf(".")<0&&""!=o.price&&(o.price=parseFloat(o.price)))}else(t=(t=(t=(t=(t=t.toString()).replace(/[^\d.]/g,"")).replace(/\.{2,}/g,".")).replace(".","$#$").replace(/\./g,"").replace("$#$",".")).replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")).indexOf(".")<0&&""!=t&&(t=parseFloat(t)),"1"==e?this.totleAmount=t:"2"==e&&(this.totlePrice=t)},getOrderType:function(){var t=this;Object(h.a)({dictType:"business_order_source"}).done(function(e){for(var i=[],o=0;o<e.data.length;o++)if(void 0!=e.data[o]){var s={source:e.data[o].dictSort,name:e.data[o].dictLabel,imgStatu:!1};i.push(s)}i=i.filter(function(t){return 1!=t.source}),t.orderInfo.orderSource=i[0].source,t.orderfirstName=i[0].name,i[0].imgStatu=!0,t.orderSource=i})},hotelStyleChooseFunc:function(t,e){this.scaleName_0=t.scaleName,this.roomNumberChoosed=0,this.hotelStyleChoosed=!0,this.hotelStyleChooseIndex=e,this.hotelStyleChoose=!1,this.id=this.hotelStyle[e].id;var i=this.orderInfo.startTime,o=new Date(i);o.setTime(o.getTime()+864e5);var s=o.getFullYear()+"-"+(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-"+(o.getDate()<10?"0"+o.getDate():o.getDate());this.to_time=s,this.disabledBtnSearch=!1},btnPro_0:function(){var t=this;if("2"!=this.orderTypeChoosed_type||this.hours_startTime)if(this.title_0="请选择产品房型","请选择基础房型"==this.title){"2"==this.orderTypeChoosed_type?(this.hours_startTime=y()(this.orderInfo.startTime).format("YYYY-MM-DD")+" "+this.housrTime_l+":00",this.hours_endTime=y()(this.orderInfo.startTime).format("YYYY-MM-DD")+" "+this.housrTime_r+":00"):this.endtime=y()(this.orderInfo.startTime).add(this.orderInfo.diffDay,"day").format("YYYY-MM-DD");var e={scaleType:"2"==this.orderTypeChoosed_type?"3":"1",startTime:"1"==this.orderTypeChoosed_type?this.orderInfo.startTime:this.hours_startTime,endTime:"1"==this.orderTypeChoosed_type?this.endtime:this.hours_endTime};Object(T._14)(this.hotelId,e).done(function(e){if(0!=e.data.length){if(e.data.length>0){for(var i=0;i<e.data.length;i++)e.data[i].imgStatu=!1;t.pro_show_0=!0}t.hotelStyle=e.data.sort(function(t,e){return e.freeNum-t.freeNum})}else Object(u.Toast)("暂无基础房型")})}else this.pro_show_0=!0,this.hotelStyle=this.newHotelStyle;else Object(u.Toast)("请先选择有效时段")},getHour:function(t){this.reserveTime=t,this.timeShow=!1},cancel:function(){this.timeShow=!1},choose_pro_0:function(t,e){this.title=e.scaleName;for(var i=0;i<this.hotelStyle.length;i++)this.hotelStyle[i].imgStatu=t==i;this.newHotelStyle=this.hotelStyle,this.id=e.id,this.d_freeNum=e.freeNum,this.pro_show_0=!1,"1"==this.orderTypeChoosed_type||"2"==this.orderTypeChoosed_type&&e.freeNum>"0"?this.btnPro():Object(u.Toast)({message:"暂无产品房型",duration:900})},btnPro:function(){var t=this;if("请选择产品房型"==this.title_0&&(null==this.id||"请选择基础房型"==this.title))return Object(u.Toast)({message:"请先选择基础房型",duration:900}),!1;if("1"==this.orderTypeChoosed_type){var e={startTime:this.orderInfo.startTime,endTime:this.endtime,hotelId:this.hotelId};Object(T._23)(this.id,e).done(function(e){t.dealPro(e.data)})}else{var i={roomScaleId:this.id,scaleType:"2"==this.orderTypeChoosed_type?"3":"1"};Object(T._24)(i).done(function(e){t.dealPro(e.data)})}},dealPro:function(t){if("1"==this.orderTypeChoosed_type?this.proList=t.filter(function(t){return t.freeNum}):this.proList=t,0==this.proList.length)return this.newProList=[],Object(u.Toast)({message:"暂无产品房型",duration:900}),!1;if(1==this.proList.length)this.title_0=this.proList[0].scaleName,this.virtualRoomScaleId=this.proList[0].id,this.freeNum="1"==this.orderTypeChoosed_type?this.proList[0].freeNum:this.d_freeNum,this.deposit_Price=this.proList[0].deposit,this.newProList=[];else{if(this.newProList.length>0){var e=this.newProList.map(function(t){return t.scaleName}),i=this.proList.map(function(t){return t.scaleName});if(l()(e)==l()(i))this.proList=this.newProList;else for(var o=0;o<this.proList.length;o++)this.proList[o].imgStatu=!1}this.pro_show=!0}},choose_pro:function(t,e){this.scaleType=e.scaleType,this.title_0=e.scaleName;for(var i=0;i<this.proList.length;i++)this.proList[i].imgStatu=t==i;this.newProList=this.proList,this.deposit_Price=e.deposit,this.virtualRoomScaleId=e.id,this.freeNum=e.freeNum,this.freeNum<=0&&(Object(u.Toast)({message:"产品房型间不足",duration:900}),this.title_0=""),this.pro_show=!1},getUserRooms:function(){var t=this,e={hotelId:m.a.geCookie("currentID"),startDate:this.orderInfo.startTime,endDate:this.endTime};Object(T._0)(this.id,e).done(function(e){0==e.data.length&&Object(u.Toast)({message:"当前房型无可选房间,请重新选择",duration:2e3}),t.disabledBtnSearch=!0,t.roomNum=e.data})},choose_num:function(t){this.orderInfo.roomNum=t,this.numList=!1},getPayment:function(){var t=this;Object(g.q)({hotelId:this.$route.query.hotelId}).then(function(e){t.columnsAll=e.data.filter(function(t){return t.payment>="5"||t.account}),t.columns=e.data.filter(function(t){return t.payment>="5"||t.account}).map(function(t){return t.accountName}),t.columnsAll.every(function(e){return t.orderInfo.orderSource==e.orderSource&&"1"==e.origin?(t.billCycle=e.accountName+" ＞",t.payeeAccountId=e.id,!1):(t.billCycle="请选择支付方式 >",t.payeeAccountId="",!0)})})},choose_pay:function(t){this.pay=t.label,this.pay_value=t.value,this.pay_show=!1},btndelay:function(){this.delay=!this.delay},btnpayTime:function(){this.payTimeType=!this.payTimeType,this.timeList.indexOf("18:00")>-1?this.currentTime="18:00":this.currentTime=this.timeList[0]},chooseLateTime:function(t){this.timeShow=!1,this.currentTime=t},btndeposit:function(){this.deposit=!this.deposit},findRoomOrderableHandle:function(t){if("1"==this.orderTypeChoosed_type&&this.orderInfo.startTime<this.cu_time)return Object(u.Toast)({message:"所选的入住时间有误，请重新选择",duration:1e3}),!1;if("1"==this.orderTypeChoosed_type&&!this.orderInfo.diffDay||!/^[1-9]\d*$/.test(this.orderInfo.diffDay))return Object(u.Toast)({message:"请正确选择入住天数",duration:900}),this.orderInfo.diffDay="",!1;for(var e=y()(this.orderInfo.startTime),i=0;i<this.orderInfo.diffDay;i++){var o=e.add(i,"day"),s={};s.xs_time=y()(o).format("MM月DD日"),s.time=y()(o).format("YYYY-MM-DD"),s.week=y()(o).day(),s.price=null,this.dayList.push(s)}return"2"==this.orderTypeChoosed_type&&"请选择有效时段"==this.housrTime?(Object(u.Toast)({message:"请选择有效时段",duration:900}),!1):"2"==this.orderTypeChoosed_type&&y()().unix()>y()(this.hours_endTime).unix()?(Object(u.Toast)({message:"有效时段有误，请重新选择",duration:900}),!1):"请选择基础房型"==this.title?(Object(u.Toast)({message:"请正确选择基础房型",duration:900}),!1):"请选择产品房型"==this.title_0?(Object(u.Toast)({message:"请正确选择产品房型",duration:900}),!1):this.roomNumResult?(this.roomNumResult=null,!1):(this.endtime=y()(this.orderInfo.startTime).add(this.orderInfo.diffDay,"day").format("YYYY-MM-DD"),this.computerDiffDay=y()(this.endtime).diff(y()(this.orderInfo.startTime),"day"),this.getPayment(),this.roomNumResult=!0,void(this.orderInfo.startTime==y()().format("YYYY-MM-DD")&&(this.timeList=this.timeList.filter(function(t){return t>y()().format("HH:mm")}))))},getDayPrice:function(){var t=this;if(this.virtualRoomScaleId){var e=y()(this.orderInfo.startTime),i=e.add(this.orderInfo.diffDay,"day");this.endtime=i.format("YYYY-MM-DD");var o=y()(this.endtime).diff(y()(e),"day"),s={startTime:this.orderInfo.startTime,diffDay:o};Object(T._20)(this.virtualRoomScaleId,s).done(function(e){t.dayList=e.data;var i=[];for(var o in t.dayList){var s={};s.time=o,s.price=0,i.push(s)}t.dayList=i.sort(function(t,e){return Date.parse(e.time)-Date.parse(t.time)})})}},sortObj:function(t){var e=a()(t).sort(),i={};for(var o in e)i[e[o]]=encodeURIComponent(t[e[o]]);return i},findRoomOrderable:function(){var t=this,e={hotelId:this.hotelId,startDate:this.orderInfo.startTime,endDate:this.endTime};Object(T._0)(this.id,e).done(function(e){t.roomNum=e.data})},orderPostHandle:function(t){return!this.orderInfo.externalOrderSn||this.orderInfo.externalOrderSn.length>6?(Object(u.Toast)({message:"请正确输入订单编码后6位",duration:900}),this.orderInfo.externalOrderSn="",!1):this.orderInfo.roomUser?this.orderInfo.phone&&!/^1[3-9]\d{9}$/.test(this.orderInfo.phone)?(Object(u.Toast)({message:"请正确输入手机号",duration:900}),this.orderInfo.phone="",!1):(this.disabledBtnSearch=!1,void this.orderPost(t)):(Object(u.Toast)({message:"请正确输入姓名",duration:900}),this.orderInfo.roomUser="",!1)},orderPost:function(t){var e=this;if(0==this.payTimeType?this.currentTime="":this.currentTime="整晚保留"==this.currentTime?"":this.currentTime,1!=this.radio){var i={};this.dayList.forEach(function(t){i[t.time]=t.price||"0"}),this.dayStr=l()(i)}this.roomNumResult,this.orderInfo.realAmount=1==this.radio||"2"==this.orderTypeChoosed_type?this.totleAmount:"",this.orderInfo.startTime="2"==this.orderTypeChoosed_type?this.hours_startTime:this.orderInfo.startTime,this.orderInfoMore=s()({hotelId:this.hotelId,roomScaleId:this.id,virtualRoomScaleId:this.virtualRoomScaleId,orderType:this.orderTypeChoosed_type,delayTime:0==this.delay?"0":"1",deposit:0==this.deposit?this.deposit_Price:0,reserveTime:this.currentTime,payTimeType:0==this.payTimeType?1:2,priceRecord:1!=this.radio?this.dayStr:"",payeeAccountId:0==this.payTimeType?this.payeeAccountId:"",accountUnitId:this.accountUnitId,endTime:"2"==this.orderTypeChoosed_type?this.hours_endTime:""},this.orderInfo),this.payeeAccountId?Object(T._43)(this.orderInfoMore).done(function(i){Object(u.Toast)({message:i.msg,duration:900}),1==t?e.roomNumResult=null:(localStorage.removeItem("ordermonth"),e.$router.replace({name:"OrderLive",query:{orderday:i.data}}),localStorage.setItem("orderday",l()(i.data))),e.title="请选择基础房型",e.title_0="请选择产品房型",e.value="0",e.delay=!1,e.orderInfo={externalOrderSn:null,roomUser:"",roomNum:1,phone:"",startTime:y()().format("YYYY-MM-DD"),diffDay:1,orderSource:""},e.delay=!1,e.deposit=!1,e.payTimeType=!1,e.customerType="1",e.orderTypeChoosed="日租",e.orderTypeChoosed_type="1",e.getOrderType()}):Object(u.Toast)({duration:900,message:"请选择收款账户"})},orderSourceChooseFunc:function(t,e){this.orderfirstName=e.name,this.orderInfo.orderSource=e.source,this.getPayment();for(var i=0;i<this.orderSource.length;i++)this.orderSource[i].imgStatu=t==i;this.orderSourceChoose=!1},getCustomerType:function(){var t=this;Object(b.f)({hotelId:this.hotelId}).done(function(e){t.customerTypesAll=e.data,t.customerTypes=e.data.map(function(t){return t.cooperationName}),t.accountUnitId=t.customerTypesAll[0].id,t.billCycleType=t.customerTypesAll[0].cooperationName+" ＞"})},onConfirmTypes:function(t){this.billCycleType=t+" ＞",this.accountUnitId=this.customerTypesAll.find(function(e){return e.cooperationName==t}).id,this.typeShowPicker=!1}},watch:{customerType:function(t){2==t&&this.getCustomerType()}}},w={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"orderDayTop"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!t.roomNumResult,expression:"!roomNumResult"}]},[o("h3",{staticClass:"titleLeft"},[t._v("入住时段")]),t._v(" "),o("div",{staticClass:"type_box liveTime",on:{click:function(e){t.orderType_show=!0}}},[o("div",{staticClass:"r_16"},[t._v("订单类型")]),t._v(" "),o("mt-field",{model:{value:t.orderTypeChoosed,callback:function(e){t.orderTypeChoosed=e},expression:"orderTypeChoosed"}},[o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)],1),t._v(" "),o("div",{staticClass:"type_box liveTime"},[o("div",{staticClass:"r_16"},[t._v("入住日期")]),t._v(" "),o("mt-field",{attrs:{type:"date"},nativeOn:{"!focus":function(e){return t.time.apply(null,arguments)}},model:{value:t.orderInfo.startTime,callback:function(e){t.$set(t.orderInfo,"startTime",e)},expression:"orderInfo.startTime"}},[o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)],1),t._v(" "),"2"==t.orderTypeChoosed_type?o("div",{staticClass:"type_box",on:{click:function(e){t.hoursLong_show=!0}}},[o("div",{staticClass:"r_20"},[t._v("入住时长")]),t._v(" "),o("div",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.orderInfo.diffDay)+"小时\n        "),o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)]):t._e(),t._v(" "),"2"==t.orderTypeChoosed_type?o("div",{staticClass:"type_box",on:{click:function(e){t.hours_left_show=!0}}},[o("div",{staticClass:"r_20"},[t._v("有效时段")]),t._v(" "),o("div",{staticStyle:{display:"flex","align-items":"center"},style:{color:"请选择有效时段"==t.housrTime?"#b2b2b2":"#000"}},[t._v(t._s(t.housrTime)+"\n        "),o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)]):t._e(),t._v(" "),"2"==t.orderTypeChoosed_type?o("div",{staticClass:"type_box",staticStyle:{color:"#989898","font-size":"12px",padding:"0 12px"}},[t._v("顾客可在此时段内任选时长办理入住")]):t._e(),t._v(" "),"1"==t.orderTypeChoosed_type?o("div",{staticClass:"type_box",on:{click:function(e){t.ComeTime=!0}}},[o("div",{staticClass:"r_20"},[t._v("入住天数")]),t._v(" "),o("div",{staticStyle:{display:"flex","align-items":"center"}},[t._v(t._s(t.orderInfo.diffDay)+"\n        "),o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)]):t._e(),t._v(" "),o("div",{staticClass:"type_box",staticStyle:{"margin-top":"10px"}},[o("div",{staticClass:"r_20"},[t._v("基础房型")]),t._v(" "),o("div",{staticClass:"r_60",style:{color:"请选择基础房型"==t.title?"#b2b2b2":"#000"},on:{click:t.btnPro_0}},[o("span",[t._v(t._s(t.title))]),t._v(" "),o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)]),t._v(" "),o("div",{staticClass:"type_box"},[o("div",{staticClass:"r_20"},[t._v("产品房型")]),t._v(" "),o("div",{staticClass:"r_60",style:{color:"请选择产品房型"==t.title_0?"#b2b2b2":"#000"},on:{click:t.btnPro}},[o("span",[t._v(t._s(t.title_0))]),t._v(" "),o("van-icon",{staticStyle:{display:"flex"},attrs:{name:"arrow"}})],1)])]),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.orderType_show,callback:function(e){t.orderType_show=e},expression:"orderType_show"}},[o("div",{staticClass:"topTitle"},[t._v("订单类型")]),t._v(" "),t._l(t.orderTypeAll,function(e,i){return o("div",{key:i,staticClass:"font",on:{click:function(i){return t.confirmOrderType(e)}}},[o("div",[t._v(t._s(e.name))])])})],2),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.orderSourceChoose,callback:function(e){t.orderSourceChoose=e},expression:"orderSourceChoose"}},[o("div",{staticClass:"topTitle"},[t._v("订单来源")]),t._v(" "),t._l(t.orderSource,function(e,s){return o("div",{key:s,staticClass:"font",on:{click:function(i){return t.orderSourceChooseFunc(s,e)}}},[1==e.imgStatu?o("img",{attrs:{src:i("g+nT"),alt:""}}):o("label"),t._v(" "),o("span",[t._v(t._s(e.name))])])})],2),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.roomNumResult,expression:"roomNumResult"}],staticStyle:{"margin-top":"10px"}},[o("p",{staticClass:"title"},[t._v("房型信息")]),t._v(" "),o("div",[o("div",{staticStyle:{background:"#fff","margin-bottom":"15px"}},[o("div",{staticClass:"space"},[o("div",[t._v("订单类型")]),t._v(" "),o("div",[t._v(t._s(t.orderTypeChoosed))])]),t._v(" "),o("div",{staticClass:"space"},[o("div",{staticStyle:{width:"30%","text-align":"left"}},[t._v("基础房型")]),t._v(" "),o("div",{staticStyle:{width:"60%","text-align":"right"}},[t._v(t._s(t.title)+"-"+t._s(t.title_0))])]),t._v(" "),"1"==t.orderTypeChoosed_type?o("div",{staticClass:"space"},[o("div",[t._v("入离时间")]),t._v(" "),o("div",[t._v(t._s(t.orderInfo.startTime.substr(5,5))+"至"+t._s(t.endtime.substr(5,5))+"  共"+t._s(t.computerDiffDay)+"晚")])]):t._e(),t._v(" "),"2"==t.orderTypeChoosed_type?o("div",{staticClass:"space"},[o("div",[t._v("入住时长")]),t._v(" "),o("div",[t._v(t._s(t.orderInfo.diffDay)+"小时")])]):t._e(),t._v(" "),"2"==t.orderTypeChoosed_type?o("div",{staticClass:"space"},[o("div",[t._v("有效时段")]),t._v(" "),o("div",[t._v(t._s(t.housrTime))])]):t._e()]),t._v(" "),o("div",{attrs:{id:"day_box"}},[o("div",{staticClass:"bill_box"},[o("div",{staticClass:"d_left"},[t._v("账单信息")]),t._v(" "),o("van-radio-group",{staticClass:"d_right",attrs:{direction:"horizontal"},model:{value:t.customerType,callback:function(e){t.customerType=e},expression:"customerType"}},[o("van-radio",{attrs:{name:"1"}},[t._v("个人")]),t._v(" "),o("van-radio",{attrs:{name:"2"}},[t._v("协议单位")])],1)],1),t._v(" "),1==t.customerType?o("div",{staticClass:"bill_box"},[o("div",{staticClass:"d_left"},[t._v("订单来源")]),t._v(" "),o("div",{staticClass:"d_right",on:{click:function(e){t.orderSourceChoose=!0}}},[t._v(t._s(t.orderfirstName)+" >\n          ")])]):t._e(),t._v(" "),2==t.customerType?o("div",{staticClass:"bill_box"},[o("div",{staticClass:"d_left"},[t._v("单位名称")]),t._v(" "),o("van-field",{staticClass:"d_right",attrs:{clickable:"",name:"billCycle",value:t.billCycleType},on:{click:function(e){t.typeShowPicker=!0}}})],1):t._e()]),t._v(" "),o("div",{attrs:{id:"day_box"}},[o("div",{staticClass:"d_ordertype"},[t._m(0),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.orderInfo.externalOrderSn,expression:"orderInfo.externalOrderSn"}],staticClass:"d_right",attrs:{maxlength:"6",type:"tel",placeholder:"请输入订单编码后6位"},domProps:{value:t.orderInfo.externalOrderSn},on:{input:function(e){e.target.composing||t.$set(t.orderInfo,"externalOrderSn",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"d_ordertype"},[t._m(1),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.orderInfo.roomUser,expression:"orderInfo.roomUser"}],staticClass:"d_right",attrs:{type:"text",placeholder:"请输入真实姓名"},domProps:{value:t.orderInfo.roomUser},on:{input:function(e){e.target.composing||t.$set(t.orderInfo,"roomUser",e.target.value)}}})])]),t._v(" "),o("div",{attrs:{id:"day_box"}},[o("div",{staticClass:"d_ordertype"},[o("div",{staticClass:"d_left p5"},[t._v("房间数量")]),t._v(" "),o("p",{staticClass:"d_right",on:{click:function(e){t.numList=!0}}},[o("span",[t._v(t._s(t.orderInfo.roomNum)+"间 >")]),t._v(" "),o("span",{staticClass:"c_02BC6C"},[t._v("余"+t._s(t.freeNum)+"间")])])])]),t._v(" "),o("div",{attrs:{id:"day_box"}},[1!=t.orderInfo.diffDay&&"1"==t.orderTypeChoosed_type?o("div",{staticClass:"bill_box"},[o("div",{staticClass:"d_left"},[t._v("账单信息")]),t._v(" "),o("van-radio-group",{staticClass:"d_right",attrs:{direction:"horizontal"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[o("van-radio",{attrs:{name:"1"}},[t._v("按总价")]),t._v(" "),o("van-radio",{attrs:{name:"2"}},[t._v("按日历价")])],1)],1):t._e(),t._v(" "),1!=t.radio?o("div",{staticClass:"day_box",staticStyle:{padding:"0 12px"}},t._l(t.dayList,function(e,i){return o("div",{key:i,staticStyle:{width:"100%","line-height":"40px","text-align":"left",background:"#fff",display:"flex"}},[o("div",{staticStyle:{width:"42%"}},[t._v(t._s(e.xs_time)),o("span",{staticStyle:{"font-size":"12px","padding-left":"4px"},style:{color:e.week>4?"#ff7d41":"#b2b2b2"}},[t._v(t._s(t.weekList[e.week]))])]),t._v(" "),o("div",{staticStyle:{display:"flex","justify-content":"space-between",color:"#b2b2b2"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.price,expression:"item.price"}],staticClass:"roomPriceInput",attrs:{type:"number",placeholder:"请输入房价"},domProps:{value:e.price},on:{input:[function(i){i.target.composing||t.$set(e,"price",i.target.value)},function(e){return t.priceTwoNum(i,"3")}]}}),t._v(" "),o("div",[t._v("*"+t._s(t.orderInfo.roomNum)+"间")])])])}),0):t._e(),t._v(" "),o("div",{staticClass:"bill_box"},[t._m(2),t._v(" "),o("div",{staticClass:"d_right display"},[1==t.radio?o("input",{directives:[{name:"model",rawName:"v-model",value:t.totleAmount,expression:"totleAmount"}],staticStyle:{width:"60%"},attrs:{type:"number",step:"1",min:"0",placeholder:"请输入房费"},domProps:{value:t.totleAmount},on:{keyup:function(e){return t.priceTwoNum(t.totleAmount,"1")},input:function(e){e.target.composing||(t.totleAmount=e.target.value)}}}):o("input",{directives:[{name:"model",rawName:"v-model",value:t.totlePrice,expression:"totlePrice"}],staticClass:"Nprice",attrs:{readonly:"",type:"number",step:"1",min:"0",placeholder:"房费"},domProps:{value:t.totlePrice},on:{keyup:function(e){return t.priceTwoNum(t.totlePrice,"2")},input:function(e){e.target.composing||(t.totlePrice=e.target.value)}}}),t._v(" "),0==t.payTimeType?o("van-field",{attrs:{readonly:"",clickable:"",name:"billCycle",value:t.billCycle,placeholder:"请选择结账周期"},on:{click:function(e){t.showPicker=!0}}}):t._e()],1)]),t._v(" "),o("div",{staticStyle:{"margin-bottom":"0"},attrs:{id:"day_box"}},[o("div",{staticClass:"d_ordertype",staticStyle:{padding:"8px 12px"}},[o("div",{},[t._v("到店付")]),t._v(" "),o("div",{staticClass:"imgbox"},[o("span",[t._v(t._s(0==t.payTimeType?"已关闭":"已开启"))]),t._v(" "),0==t.payTimeType?o("div",{staticClass:"abled-back disabled-back",on:{click:function(e){t.payTimeType=!t.payTimeType}}}):o("img",{staticClass:"abled-back",attrs:{src:i("g+nT"),alt:""},on:{click:function(e){t.payTimeType=!t.payTimeType}}})])])]),t._v(" "),1==t.payTimeType?o("div",{staticClass:"d_ordertype"},[t._m(3),t._v(" "),o("div",{on:{click:function(e){t.timeShow=!0}}},[t._v(t._s(t.currentTime)+" >")])]):t._e()]),t._v(" "),o("div",{attrs:{id:"day_box"}},[o("div",{staticClass:"d_ordertype"},[t._m(4),t._v(" "),o("div",{staticClass:"imgbox"},[o("span",[t._v(t._s(0==t.delay?"已关闭":"已开启"))]),t._v(" "),0==t.delay?o("div",{staticClass:"abled-back disabled-back",on:{click:function(e){t.delay=!t.delay}}}):o("img",{staticClass:"abled-back",attrs:{src:i("g+nT"),alt:""},on:{click:function(e){t.delay=!t.delay}}})])]),t._v(" "),o("div",{staticClass:"d_ordertype"},[o("div",{},[t._v("免押金入住")]),t._v(" "),o("div",{staticClass:"imgbox"},[o("span",[t._v(t._s(0==t.deposit?"已关闭":"已开启"))]),t._v(" "),0==t.deposit?o("div",{staticClass:"abled-back disabled-back",on:{click:function(e){t.deposit=!t.deposit}}}):o("img",{staticClass:"abled-back",attrs:{src:i("g+nT"),alt:""},on:{click:function(e){t.deposit=!t.deposit}}})])])]),t._v(" "),o("div",{attrs:{id:"day_box"}},[o("div",{staticClass:"d_ordertype m20"},[o("div",{staticClass:"d_left p5"},[t._v("预留电话")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.orderInfo.phone,expression:"orderInfo.phone"}],staticClass:"d_right",attrs:{type:"tel",maxlength:"11",placeholder:"请输入预留电话"},domProps:{value:t.orderInfo.phone},on:{input:function(e){e.target.composing||t.$set(t.orderInfo,"phone",e.target.value)}}})])])]),t._v(" "),o("mt-button",{staticClass:"tongbu",attrs:{size:"large",type:"danger",disabled:t.disabledBtnComfirm},nativeOn:{click:function(e){return t.orderPostHandle(1)}}},[t._v("确定同步")])],1),t._v(" "),t.roomNumResult?t._e():o("van-button",{directives:[{name:"show",rawName:"v-show",value:t.retShow,expression:"retShow"}],staticStyle:{"margin-top":"10px","margin-bottom":"15px","background-color":"#FF7D41"},attrs:{size:"large",type:"primary",disabled:t.disabledBtnSearch},nativeOn:{click:function(e){return t.findRoomOrderableHandle(t.roomNumResult)}}},[t._v("查询")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.roomNumResult,expression:"!roomNumResult"}],staticClass:"first_bottom"},[t._v("\n    此功能用于美团,携程,飞猪,同程艺龙,途家,去哪儿,其他订单来源在线订单同步\n    "),o("br"),t._v("客户到店后，微信扫码，缴纳押金，完成人证对比后入住\n  ")]),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.numList,callback:function(e){t.numList=e},expression:"numList"}},[o("div",{staticClass:"topTitle"},[t._v("选择房间数量")]),t._v(" "),t._l(t.freeNum,function(e,i){return o("div",{key:i,staticClass:"lateTime",on:{click:function(i){return t.choose_num(e)}}},[t._v(t._s(e))])})],2),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.timeShow,callback:function(e){t.timeShow=e},expression:"timeShow"}},[o("div",{staticClass:"topTitle"},[t._v("选择到店付时间")]),t._v(" "),t._l(t.timeList,function(e,i){return o("div",{key:i,staticClass:"lateTime",on:{click:function(i){return t.chooseLateTime(e)}}},[t._v(t._s(e))])})],2),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.hours_left_show,callback:function(e){t.hours_left_show=e},expression:"hours_left_show"}},[o("van-datetime-picker",{attrs:{title:"开始时间",type:"time","min-hour":t.minHour,"max-hour":t.maxHour},on:{confirm:t.confirmHoursLeft}})],1),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.hours_right_show,callback:function(e){t.hours_right_show=e},expression:"hours_right_show"}},[o("van-datetime-picker",{attrs:{title:"结束时间",type:"time","min-hour":t.minHourRight,"max-hour":t.maxHourRight,"min-minute":t.minMinuteRight},on:{confirm:t.confirmHoursRight}})],1),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.hoursLong_show,callback:function(e){t.hoursLong_show=e},expression:"hoursLong_show"}},t._l(10,function(e,i){return o("div",{key:i,staticClass:"lateTime",on:{click:function(i){return t.confirmHoursLong(e)}}},[t._v(t._s(e))])}),0),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.ComeTime,callback:function(e){t.ComeTime=e},expression:"ComeTime"}},t._l(15,function(e,i){return o("div",{key:i,staticClass:"lateTime",on:{click:function(i){return t.chooseComeTime(e)}}},[t._v(t._s(e))])}),0),t._v(" "),o("van-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.pay_show,callback:function(e){t.pay_show=e},expression:"pay_show"}},t._l(t.options,function(e,i){return o("div",{key:i,staticClass:"font",on:{click:function(i){return t.choose_pay(e)}}},[t._v(t._s(e.label))])}),0),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.pro_show_0,callback:function(e){t.pro_show_0=e},expression:"pro_show_0"}},[o("div",{staticClass:"topTitle c000"},[t._v("选择基础房型")]),t._v(" "),t._l(t.hotelStyle,function(e,s){return o("div",{key:s,staticClass:"font",class:"noRoom"+e.freeNum,on:{click:function(i){return t.choose_pro_0(s,e)}}},[1==e.imgStatu?o("img",{attrs:{src:i("g+nT"),alt:""}}):o("label"),t._v(" "),o("p",{staticClass:"scaleBox"},[o("span",{staticClass:"sclaeName-left"},[t._v(t._s(e.scaleName))]),t._v(" \n        "),o("span",{staticClass:"c888",style:{opacity:0==e.freeNum?.5:1}},[t._v(t._s(e.freeNum)+"间")])])])})],2),t._v(" "),o("van-popup",{staticStyle:{width:"100%",height:"70%","overflow-y":"scroll"},attrs:{position:"bottom"},model:{value:t.pro_show,callback:function(e){t.pro_show=e},expression:"pro_show"}},[o("div",{staticClass:"topTitle c000"},[t._v("选择产品房型")]),t._v(" "),t._l(t.proList,function(e,s){return o("div",{key:s,staticClass:"font",class:"noRoom"+e.freeNum,on:{click:function(i){return t.choose_pro(s,e)}}},[1==e.imgStatu?o("img",{attrs:{src:i("g+nT"),alt:""}}):o("label"),t._v(" "),o("p",{staticClass:"scaleBox"},[o("span",{staticClass:"sclaeName-left"},[t._v(t._s(e.scaleName))]),t._v(" \n        "),o("span",{staticClass:"c888",style:{opacity:0==e.freeNum?.5:1}},[t._v(t._s(e.freeNum)+"间")])])])})],2),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.typeShowPicker,callback:function(e){t.typeShowPicker=e},expression:"typeShowPicker"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.customerTypes},on:{confirm:t.onConfirmTypes,cancel:function(e){t.typeShowPicker=!1}}})],1),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:function(e){t.showPicker=!1}}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d_left"},[e("p",[this._v("订单编码")]),this._v(" "),e("img",{staticClass:"wuxing",attrs:{src:i("OaXa"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d_left"},[e("p",[this._v("入住姓名")]),this._v(" "),e("img",{staticClass:"wuxing",attrs:{src:i("OaXa"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d_left"},[this._v("\n            房费总价\n            "),e("img",{staticClass:"wuxing",attrs:{src:i("OaXa"),alt:"write"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d_left",staticStyle:{width:"80%"}},[e("p",[e("span",[this._v("最迟到店时间")]),this._v(" "),e("br"),this._v(" "),e("span",{staticClass:"ccc"},[this._v("到时间未办理入住将自动取消")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[this._v("\n            延时退房\n            "),e("span",{staticStyle:{color:"#b2b2b2","font-size":"14px"}},[this._v("免费延时至14:00")])])}]};var S=i("k6Sl")(C,w,!1,function(t){i("1Srz")},"data-v-30c2f424",null);e.default=S.exports}});
//# sourceMappingURL=121.4aff289709c74db1f3271758771190591.js.map