webpackJsonp([71],{CRea:function(e,t){},oplT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("HkQL"),a=i.n(s),l=i("NpYV"),r=i("Gwi0"),_=i("P5P/"),n={data:function(){return{life_fee:"",life_unit:"",ele_unit:"",life_1:"0",life_2:"",ele_1:"0",ele_2:"",cleanPrice:"",partPrice:"",propPrice:"",lase_time:"",startDate:new Date,dataVal1:new Date,gas_unit:"",gas_1:"",gas_2:"",both:"",back_box:!1,back_show:"",recordRoom:[],recordWatch:[],dataForm:{life_woter:""}}},watch:{dataForm:{handler:function(e){window.sessionStorage.setItem("lifeFreeData",a()(this.dataForm))},deep:!0}},computed:{life_totle:function(){return((this.life_2-this.life_1)*this.life_unit).toFixed(2)<0?0:((this.life_2-this.life_1)*this.life_unit).toFixed(2)},ele_totle:function(){return((this.ele_2-this.ele_1)*this.ele_unit).toFixed(2)<0?0:((this.ele_2-this.ele_1)*this.ele_unit).toFixed(2)},gas_totle:function(){return((this.gas_2-this.gas_1)*this.gas_unit).toFixed(2)<0?0:((this.gas_2-this.gas_1)*this.gas_unit).toFixed(2)},totlePrice:function(){return Number(this.life_totle)+Number(this.ele_totle)+Number(this.gas_totle)+Number(this.cleanPrice)+Number(this.partPrice)+Number(this.propPrice)}},created:function(){window.sessionStorage.getItem("lifeFreeData")&&(this.dataForm=JSON.parse(window.sessionStorage.getItem("lifeFreeData"))),this.$route.query.num?(this.orderRoomId=JSON.parse(localStorage.getItem("arrive")).id,this.roomScaleId=JSON.parse(localStorage.getItem("arrive")).virtualRoomScaleId,this.$store.commit("setHeader","新建生活账单"),this.getUnit(),this.lastList()):(this.$store.commit("setHeader","生活账单详情"),this.life_fee=this.$route.query.life_fee,this.life_1=this.life_fee.preWaterDegree,this.life_2=this.life_fee.waterDegree,this.life_unit=this.life_fee.waterPrice,this.ele_1=this.life_fee.preElecDegree,this.ele_2=this.life_fee.elecDegree,this.ele_unit=this.life_fee.elecPrice,this.gas_1=this.life_fee.preGasDegree,this.gas_2=this.life_fee.gasDegree,this.gas_unit=this.life_fee.gasPrice,this.propPrice=this.life_fee.propPrice,this.partPrice=this.life_fee.parkPrice,this.cleanPrice=this.life_fee.rubbishPrice,this.both=1==this.life_fee.payStatus?"已支付":"线下现金支付",this.back_show=1!=this.life_fee.payStatus),this.getRecord()},methods:{getRecord:function(){var e=this;Object(r.B)(this.life_fee.id).done(function(t){e.recordRoom=t.data.filter(function(e){return 0==e.meterType}),e.recordRoom.forEach(function(t){t.ele_totalPrice=(t.elecDegree-t.preElecDegree)*e.ele_unit,t.water_totalPrice=(t.waterDegree-t.preWaterDegree)*e.life_unit,t.gas_totalPrice=(t.gasDegree-t.preGasDegree)*e.gas_unit}),e.recordWatch=t.data.filter(function(e){return 0!=e.meterType}),e.recordWatch.forEach(function(t){t.ele_totalPrice=(t.elecDegree-t.preElecDegree)*e.ele_unit,t.water_totalPrice=(t.waterDegree-t.preWaterDegree)*e.life_unit,t.gas_totalPrice=(t.gasDegree-t.preGasDegree)*e.gas_unit})})},getDateStr:function(e){var t=new Date;t.setDate(t.getDate()+e);var i=t.getFullYear(),s=t.getMonth()+1,a=t.getDate();return i+"-"+(s<10?"0"+s:s)+"-"+(a<10?"0"+a:a)},lastList:function(){var e=this;Object(r.z)(this.orderRoomId).done(function(t){e.$route.query.num&&(e.life_1=t.data.waterDegree,e.ele_1=t.data.elecDegree)})},getUnit:function(){var e=this;Object(r._18)(this.roomScaleId).done(function(t){e.ele_unit=t.data.elecPrice,e.life_unit=t.data.waterPrice})},cancle_life:function(){this.life_2=""},cancle_ele:function(){this.ele_2=""},cancle_gas:function(){this.gas_2=""},dateClick:function(){this.$refs.picker1.open()},Cancel:function(){this.$refs.picker1.close()},btn_life:function(){if(this.life_2<this.life_1||!/^[0-9]*$/.test(this.life_2))return Object(l.Toast)({message:"请正确输入本次用水读数",duration:900}),this.life_2="",!1},btn_ele:function(){if(this.ele_2<this.ele_1||!/^[0-9]*$/.test(this.ele_2))return Object(l.Toast)({message:"请正确输入本次电费读数",duration:900}),this.ele_2="",!1},btn_gas:function(){if(this.gas_2<this.gas_1||!/^[0-9]*$/.test(this.gas_2))return Object(l.Toast)({message:"请正确输入本次气费读数",duration:900}),this.gas_2="",!1},commit:function(){if(0!=this.life_unit&&!this.life_2)return Object(l.Toast)({message:"请正确输入本次用水读数",duration:900}),this.life_2="",!1;if(0!=this.ele_unit&&!this.ele_2)return Object(l.Toast)({message:"请正确输入本次电费读数",duration:900}),this.ele_2="",!1;if(0!=this.gas_unit&&!this.gas_2)return Object(l.Toast)({message:"请正确输入本次气费读数",duration:900}),this.gas_2="",!1;if(this.$route.query.num){var e=_.a.getCookie("currentID");this.orderRoomId,this.life_unit,this.life_2,"0"==this.life_1||this.life_1.toFixed(2),this.ele_unit,this.ele_2,"0"==this.ele_1||this.ele_1.toFixed(2),this.propPrice,this.cleanPrice,this.partPrice}else this.lifeInfo={},this.lifeInfo.waterDegree=this.life_2,this.lifeInfo.elecDegree=this.ele_2,this.lifeInfo.gasDegree=this.gas_2,this.lifeInfo.propPrice=this.propPrice,this.lifeInfo.rubbishPrice=this.cleanPrice,this.lifeInfo.parkPrice=this.partPrice,localStorage.setItem("life_fee",a()(this.lifeInfo)),setTimeout("window.history.go(-1)",900)},back:function(e){var t=this;l.MessageBox.confirm("",{message:"是否撤回账单？",title:"提示",cancelButtonText:"否",confirmButtonText:"是"}).then(function(i){"confirm"==i&&Object(r._41)(e.id).done(function(e){t.back_box=!1,setTimeout("window.history.go(-1)",900)})}).catch(function(e){})},back_cancel:function(){this.back_box=!1},back_ok:function(){var e=this;Object(r._41)(this.back_id).done(function(t){e.back_box=!1,setTimeout("window.history.go(-1)",900)})}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"background-color":"#F6F6F6",position:"fixed",top:"50px",bottom:"0",left:"0",right:"0","overflow-y":"scroll"}},[i("div",[0!=e.life_unit?i("div",{staticClass:"box_1"},[i("p",{staticClass:"life"},[e._v("\n        生活用水 \n        "),i("span",{staticClass:"unit"},[e._v("单价:¥"+e._s(e.life_unit)+"/吨")])]),e._v(" "),i("div",{staticClass:"last"},[i("p",{staticClass:"num"},[e._v("上次读数")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.life_1?e.life_1:"0")+" 吨\n          "),e.lase_time?i("span",{staticClass:"time"}):e._e()])]),e._v(" "),i("div",{staticClass:"box_1_1"},[i("mt-field",{attrs:{label:"本次读数",type:"number",placeholder:"请输入"},nativeOn:{"!blur":function(t){return e.btn_life.apply(null,arguments)}},model:{value:e.life_2,callback:function(t){e.life_2=t},expression:"life_2"}}),e._v(" "),i("div",{staticClass:"dun"},[e._v("\n          吨\n        ")])],1),e._v(" "),i("div",{staticClass:"last"},[i("p",{staticClass:"num"},[e._v("本次应收")]),e._v(" "),i("p",{staticStyle:{color:"#FB9E58","font-size":"16px"}},[e._v("\n          "+e._s(e.life_totle)+"\n          "),i("span",{staticClass:"time"},[e._v("元")])])])]):e._e(),e._v(" "),0!=e.ele_unit?i("div",{staticClass:"box_1"},[i("p",{staticClass:"life"},[e._v("\n        电费 \n        "),i("span",{staticClass:"unit"},[e._v("单价:¥"+e._s(e.ele_unit)+"/度")])]),e._v(" "),i("div",{staticClass:"last"},[i("p",{staticClass:"num"},[e._v("上次读数")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.ele_1?e.ele_1:"0")+" 度\n          "),e.lase_time?i("span",{staticClass:"time"}):e._e()])]),e._v(" "),i("div",{staticClass:"box_1_1"},[i("mt-field",{attrs:{label:"本次读数",type:"number",placeholder:"请输入"},nativeOn:{"!blur":function(t){return e.btn_ele.apply(null,arguments)}},model:{value:e.ele_2,callback:function(t){e.ele_2=t},expression:"ele_2"}}),e._v(" "),i("div",{staticClass:"dun"},[e._v("\n          度\n        ")])],1),e._v(" "),i("div",{staticClass:"last"},[i("p",{staticClass:"num"},[e._v("本次应收")]),e._v(" "),i("p",{staticStyle:{color:"#FB9E58","font-size":"16px"}},[e._v("\n          "+e._s(e.ele_totle)+"\n          "),i("span",{staticClass:"time"},[e._v("元")])])])]):e._e(),e._v(" "),0!=e.gas_unit?i("div",{staticClass:"box_1"},[i("p",{staticClass:"life"},[e._v("\n        气费 \n        "),i("span",{staticClass:"unit"},[e._v("单价:¥"+e._s(e.gas_unit)+"/度")])]),e._v(" "),i("div",{staticClass:"last"},[i("p",{staticClass:"num"},[e._v("上次读数")]),e._v(" "),i("p",[e._v("\n          "+e._s(e.gas_1?e.gas_1:"0")+" 度\n          "),e.lase_time?i("span",{staticClass:"time"}):e._e()])]),e._v(" "),i("div",{staticClass:"box_1_1"},[i("mt-field",{attrs:{label:"本次读数",type:"number",placeholder:"请输入"},nativeOn:{"!blur":function(t){return e.btn_gas.apply(null,arguments)}},model:{value:e.gas_2,callback:function(t){e.gas_2=t},expression:"gas_2"}}),e._v(" "),i("div",{staticClass:"dun"},[e._v("\n          度\n        ")])],1),e._v(" "),i("div",{staticClass:"last"},[i("p",{staticClass:"num"},[e._v("本次应收")]),e._v(" "),i("p",{staticStyle:{color:"#FB9E58","font-size":"16px"}},[e._v("\n          "+e._s(e.gas_totle)+"\n          "),i("span",{staticClass:"time"},[e._v("元")])])])]):e._e(),e._v(" "),i("div",{staticClass:"box_1"},[i("p",{staticClass:"life"},[e._v("其他费用")]),e._v(" "),i("mt-field",{staticClass:"other",attrs:{label:"清洁费(元/月)",type:"number",placeholder:"请输入"},model:{value:e.cleanPrice,callback:function(t){e.cleanPrice=t},expression:"cleanPrice"}}),e._v(" "),i("mt-field",{staticClass:"other",attrs:{label:"停车费(元/月)",type:"number",placeholder:"请输入"},model:{value:e.partPrice,callback:function(t){e.partPrice=t},expression:"partPrice"}}),e._v(" "),i("mt-field",{staticClass:"other last_other",attrs:{label:"物业费(元/月)",type:"number",placeholder:"请输入"},model:{value:e.propPrice,callback:function(t){e.propPrice=t},expression:"propPrice"}})],1),e._v(" "),i("div",{staticStyle:{margin:"20px 0 60px"}},[e.recordRoom.length>0?i("div",e._l(e.recordRoom,function(t,s){return i("div",{key:s,staticClass:"box_1"},[i("p",{staticClass:"life"},[e._v("\n            换房结算    \n            "),i("span",[e._v(e._s(t.preRoomSn)+"➜"+e._s(t.roomSn))])]),e._v(" "),0!=e.life_unit?i("div",{staticClass:"last cost"},[i("p",[e._v("水费结算")]),e._v(" "),i("p",[e._v(e._s(t.water_totalPrice)+"元")]),e._v(" "),i("p",[e._v("起始："+e._s(t.preWaterDegree?t.preWaterDegree:0))]),e._v(" "),i("p",[e._v("结算："+e._s(t.waterDegree?t.waterDegree:0))])]):e._e(),e._v(" "),0!=e.ele_unit?i("div",{staticClass:"last cost"},[i("p",[e._v("电费结算")]),e._v(" "),i("p",[e._v(e._s(t.ele_totalPrice)+"元")]),e._v(" "),i("p",[e._v("起始："+e._s(t.preElecDegree?t.preElecDegree:0))]),e._v(" "),i("p",[e._v("结算："+e._s(t.elecDegree?t.elecDegree:0))])]):e._e(),e._v(" "),0!=e.gas_unit?i("div",{staticClass:"last cost"},[i("p",[e._v("气费结算")]),e._v(" "),i("p",[e._v(e._s(t.gas_totalPrice)+"元")]),e._v(" "),i("p",[e._v("起始："+e._s(t.preGasDegree?t.preGasDegree:"0"))]),e._v(" "),i("p",[e._v("结算："+e._s(t.gasDegree?t.gasDegree:"0"))])]):e._e()])}),0):e._e(),e._v(" "),e.recordWatch.length>0?i("div",e._l(e.recordWatch,function(t,s){return i("div",{key:s,staticClass:"box_1"},[i("p",{staticClass:"life"},[e._v("\n            换表结算    \n          ")]),e._v(" "),1==t.meterType?i("div",{staticClass:"last cost"},[i("p",[e._v("电费结算")]),e._v(" "),i("p",[e._v(e._s(t.ele_totalPrice)+"元")]),e._v(" "),i("p",[e._v("起始："+e._s(t.preElecDegree?t.preElecDegree:0))]),e._v(" "),i("p",[e._v("结算："+e._s(t.elecDegree?t.elecDegree:0))])]):e._e(),e._v(" "),2==t.meterType?i("div",{staticClass:"last cost"},[i("p",[e._v("水费结算")]),e._v(" "),i("p",[e._v(e._s(t.water_totalPrice)+"元")]),e._v(" "),i("p",[e._v("起始："+e._s(t.preWaterDegree?t.preWaterDegree:0))]),e._v(" "),i("p",[e._v("结算："+e._s(t.waterDegree?t.waterDegree:0))])]):e._e(),e._v(" "),3==t.meterType?i("div",{staticClass:"last cost"},[i("p",[e._v("气费结算")]),e._v(" "),i("p",[e._v(e._s(t.gas_totalPrice)+"元")]),e._v(" "),i("p",[e._v("起始："+e._s(t.preGasDegree?t.preGasDegree:"0"))]),e._v(" "),i("p",[e._v("结算："+e._s(t.gasDegree?t.gasDegree:"0"))])]):e._e()])}),0):e._e()]),e._v(" "),i("div",{staticClass:"bottom"},[i("div",{staticClass:"go",on:{click:e.commit}},[e._v("保存修改")])])]),e._v(" "),i("mt-popup",{staticStyle:{width:"80%","border-radius":"10px"},model:{value:e.back_box,callback:function(t){e.back_box=t},expression:"back_box"}},[i("div",{staticClass:"edit_box"},[i("div",{staticClass:"isBack"},[e._v("是否撤回该账单？")]),e._v(" "),i("div",{staticClass:"back_bottom"},[i("p",{staticClass:"first_canal",on:{click:e.back_cancel}},[e._v("取消")]),e._v(" "),i("p",{staticClass:"first_ok",on:{click:e.back_ok}},[e._v("确定")])])])])],1)},staticRenderFns:[]};var o=i("k6Sl")(n,c,!1,function(e){i("CRea")},"data-v-7d01fd8c",null);t.default=o.exports}});
//# sourceMappingURL=71.f5cda1f76405353c087a1758781501818.js.map