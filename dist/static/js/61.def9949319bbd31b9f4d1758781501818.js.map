{"version":3,"sources":["webpack:///src/components/Home/manager.vue","webpack:///./src/components/Home/manager.vue?c87f","webpack:///./src/components/Home/manager.vue"],"names":["manager","data","userName","password","new_userName","new_password_1","new_password_2","type","content","userInfo","id","rolesAll","show_setting","created","this","$store","commit","$route","query","title","JSON","parse","localStorage","getItem","methods","chooseRole","item","_this","find","role","i","roleName","unshift","splice","setItem","stringify_default","setTimeout","openTwo","confirmSetting","action","done","_this2","Object","es","api_business_login","res","msg","chang_user","username","Home_manager","render","_vm","_h","$createElement","_c","_self","staticClass","_l","key","on","click","$event","staticStyle","display","_v","_s","_e","attrs","name","color","margin-top","is-link","value","before-close","show-cancel-button","model","callback","$$v","expression","label","placeholder","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/61.def9949319bbd31b9f4d1758781501818.js","sourcesContent":["<template>\n  <div>\n    <!-- 1、切换角色 -->\n    <div\n      v-if=\"$route.query.title == '切换角色'\"\n      class=\"role_style\"\n    >\n      <div\n        v-for=\"(item,i) in rolesAll\"\n        :key=\"i\"\n        class=\"flex\"\n        @click=\"chooseRole(item)\"\n      >\n        <div style=\"display:flex;\">\n          <div>{{ item.roleName }}</div>\n          <div\n            v-if=\"i == '0'\"\n            class=\"linght\"\n          >当前角色</div>\n        </div>\n        <van-icon\n          name=\"arrow\"\n          color=\"#C8C5C8\"\n        />\n      </div>\n    </div>\n    <!-- 2、账号设置 -->\n    <div\n      v-else\n      style=\"margin-top:10px;\"\n    >\n      <van-cell\n        title=\"登录名称\"\n        is-link\n        :value=\"userInfo.userName\"\n        @click=\"openTwo('zh',userInfo.userName)\"\n      />\n      <van-cell\n        title=\"修改密码\"\n        is-link\n        :value=\"password\"\n        @click=\"openTwo('mm',password)\"\n      />\n    </div>\n    <!-- 修改、设置账号 -->\n    <van-dialog\n      v-model=\"show_setting\"\n      :title=\"type == 'mm'? '设置登录密码':'设置登录名称'\"\n      :before-close=\"confirmSetting\"\n      show-cancel-button\n    >\n      <van-field\n        v-if=\"type == 'zh'\"\n        v-model=\"new_userName\"\n        label=\"账号\"\n        placeholder=\"请设置账号(输入数字或字母)\"\n      />\n      <van-field\n        v-if=\"type == 'mm'\"\n        v-model=\"new_password_1\"\n        label=\"新密码\"\n        placeholder=\"请输入新密码\"\n      />\n      <van-field\n        v-if=\"type == 'mm'\"\n        v-model=\"new_password_2\"\n        label=\"确认新密码\"\n        placeholder=\"请再次重复输入新密码\"\n      />\n    </van-dialog>\n  </div>\n</template>\n<script>\nimport { Toast } from 'vant';\nimport { PostSystemUserResetPwd, PostSystemUserEdit } from '@/api/api_business_login';\nexport default {\n    data() {\n        return {\n            userName: null,\n            password: '******',\n            new_userName: null,\n            new_password_1: null,\n            new_password_2: null,\n            type: null,\n            content: null,\n            userInfo: {\n                id: null,\n                userName: null,\n                password: null\n            },\n            rolesAll: [],\n            show_setting: false\n        };\n    },\n    created() {\n        this.$store.commit('setHeader', `${this.$route.query.title}`);\n        if (this.$route.query.title == '切换角色') {\n            this.rolesAll = JSON.parse(localStorage.getItem('roles'));\n        } else {\n            this.userInfo.userName = JSON.parse(localStorage.getItem('current_user')).userName;\n            this.userInfo.id = JSON.parse(localStorage.getItem('current_user')).id;\n        }\n    },\n    methods: {\n        // 切换角色\n        chooseRole(item) {\n            this.rolesAll.find((role, i) => {\n                if (role.roleName == item.roleName) {\n                    this.rolesAll.unshift(this.rolesAll.splice(i, 1)[0]);\n                }\n            });\n            this.$store.commit('roles_vuex', this.rolesAll);\n            localStorage.setItem('roles', JSON.stringify(this.rolesAll));\n            setTimeout('window.history.go(-1)');\n        },\n        // 展开-账号、密码\n        openTwo(type, content) {\n            this.new_password_1 = null;\n            this.new_password_2 = null;\n            this.type = type;\n            this.content = content;\n            this.new_userName = this.type == 'mm' ? this.userInfo.userName : this.content;\n            this.show_setting = true;\n        },\n        // 修改、设置账号\n        confirmSetting(action, done) {\n            if (action == 'confirm') {\n                this.userInfo.userName = this.new_userName;\n                if (this.type == 'mm' && !this.new_password_1) {\n                    Toast('请输入新密码');\n                    this.new_password_2 = null;\n                    done(false);\n                    return;\n                } else if (this.type == 'mm' && this.new_password_1 != this.new_password_2) {\n                    Toast('请确定两次输入密码相同');\n                    this.new_password_2 = null;\n                    done(false);\n                    return;\n                } else if (this.type == 'mm' && this.new_password_1 == this.new_password_2) {\n                    this.userInfo.password = this.new_password_2;\n                }\n                if (this.type == 'mm') {\n                    delete this.userInfo.userName;\n                    PostSystemUserResetPwd(this.userInfo).done((res) => {\n                        Toast(res.msg);\n                        done(false);\n                        this.show_setting = false;\n                        setTimeout('window.history.go(-1)', 300);\n                    });\n                } else {\n                    delete this.userInfo.password;\n                    PostSystemUserEdit(this.userInfo).done((res) => {\n                        let chang_user = JSON.parse(localStorage.getItem('current_user'));\n                        chang_user.userName = this.userInfo.userName;\n                        chang_user.username = this.userInfo.userName;\n                        localStorage.setItem('current_user', JSON.stringify(chang_user));\n                        Toast(res.msg);\n                        done(false);\n                        this.show_setting = false;\n                        setTimeout('window.history.go(-1)', 300);\n                    });\n                }\n            } else if (action == 'cancel') {\n                done(false);\n                this.show_setting = false;\n            }\n        }\n    }\n};\n</script>\n<style scoped>\n.role_style {\n    margin-top: 10px;\n    font-size: 15px;\n    color: #000;\n    line-height: 30px;\n}\n.flex {\n    display: flex;\n    justify-content: space-between;\n    padding: 10px 16px;\n    border-bottom: 1px solid #f0edf1;\n    align-items: center;\n}\n.linght {\n    border: 1px solid #a4e6cb;\n    color: #02bc6c;\n    font-size: 14px;\n    height: 20px;\n    line-height: 20px;\n    margin: auto 10px;\n    padding: 0 2px;\n}\n.linght {\n    border: 1px solid #a4e6cb;\n    color: #02bc6c;\n    font-size: 14px;\n    height: 20px;\n    line-height: 20px;\n    margin: auto 10px;\n    padding: 0 2px;\n}\n.flex:active {\n    background: #efeff4;\n}\n::v-deep .van-cell {\n    display: flex;\n    align-items: center;\n}\n::v-deep .van-cell__title {\n    text-align: left;\n}\n::v-deep .van-field__control {\n    background: #f0eff2;\n    margin: 10px 0;\n    line-height: 36px;\n    text-indent: 1em;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Home/manager.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.$route.query.title == '切换角色')?_c('div',{staticClass:\"role_style\"},_vm._l((_vm.rolesAll),function(item,i){return _c('div',{key:i,staticClass:\"flex\",on:{\"click\":function($event){return _vm.chooseRole(item)}}},[_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('div',[_vm._v(_vm._s(item.roleName))]),_vm._v(\" \"),(i == '0')?_c('div',{staticClass:\"linght\"},[_vm._v(\"当前角色\")]):_vm._e()]),_vm._v(\" \"),_c('van-icon',{attrs:{\"name\":\"arrow\",\"color\":\"#C8C5C8\"}})],1)}),0):_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('van-cell',{attrs:{\"title\":\"登录名称\",\"is-link\":\"\",\"value\":_vm.userInfo.userName},on:{\"click\":function($event){return _vm.openTwo('zh',_vm.userInfo.userName)}}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\",\"value\":_vm.password},on:{\"click\":function($event){return _vm.openTwo('mm',_vm.password)}}})],1),_vm._v(\" \"),_c('van-dialog',{attrs:{\"title\":_vm.type == 'mm'? '设置登录密码':'设置登录名称',\"before-close\":_vm.confirmSetting,\"show-cancel-button\":\"\"},model:{value:(_vm.show_setting),callback:function ($$v) {_vm.show_setting=$$v},expression:\"show_setting\"}},[(_vm.type == 'zh')?_c('van-field',{attrs:{\"label\":\"账号\",\"placeholder\":\"请设置账号(输入数字或字母)\"},model:{value:(_vm.new_userName),callback:function ($$v) {_vm.new_userName=$$v},expression:\"new_userName\"}}):_vm._e(),_vm._v(\" \"),(_vm.type == 'mm')?_c('van-field',{attrs:{\"label\":\"新密码\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.new_password_1),callback:function ($$v) {_vm.new_password_1=$$v},expression:\"new_password_1\"}}):_vm._e(),_vm._v(\" \"),(_vm.type == 'mm')?_c('van-field',{attrs:{\"label\":\"确认新密码\",\"placeholder\":\"请再次重复输入新密码\"},model:{value:(_vm.new_password_2),callback:function ($$v) {_vm.new_password_2=$$v},expression:\"new_password_2\"}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a9985774\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Home/manager.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.pnpm/extract-text-webpack-plugin@3.0.2_webpack@3.12.0/node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a9985774\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=styles&index=0!./manager.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=script&index=0!./manager.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=script&index=0!./manager.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a9985774\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=template&index=0!./manager.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a9985774\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Home/manager.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}