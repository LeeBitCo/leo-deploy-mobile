webpackJsonp([72],{TAPa:function(e,t){},bK4k:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("vvmr"),s=o.n(n),i=o("4jgH"),r=o("tN5p"),c=o("UJbh"),a=o("s/fh");i.default.use(a.c);var l=[],u={name:"staff",data:function(){return{showModel:!1,showPicker:!1,workerList:[],query:"",columns:[],columnsAll:[],userList:[],userAllArray:[],dataForm:{cooperationId:"",role:"",workerIds:""}}},computed:{role:{get:function(){var e=this;if(this.columnsAll&&this.columnsAll.length)return this.columnsAll.find(function(t){return e.dataForm.role==t.dictValue}).dictLabel},set:function(e){}}},created:function(){this.$store.commit("setHeader","员工管理"),this.dataForm.cooperationId=this.$route.query.cooperationId,this.getWorkerMsg(this.$route.query.cooperationId),this.getTypeBusinessBill()},filters:{userRole:function(e){if(e&&l.length)return l.find(function(t){return t.dictValue==e}).dictLabel}},methods:{getWorkerMsg:function(e){var t=this;Object(r.I)({cooperationId:e}).done(function(e){t.workerList=e.data})},_del:function(e){var t=this;a.a.confirm({title:"提示",message:"确认删除"+(e.sysUser.realName||e.sysUser.nickName)}).then(function(){Object(r.J)({cooperOpRelationId:e.id}).done(function(){a.c.success("操作成功"),t.getWorkerMsg(t.$route.query.cooperationId)})}).catch(function(){Object(a.c)("取消操作")})},getTypeBusinessBill:function(){var e=this;Object(c.a)({dictType:"business_hotel_role"}).done(function(t){e.dataForm.role=t.data[0].dictValue,e.columns=t.data.map(function(e){return e.dictLabel}),e.columnsAll=l=t.data})},searchFn:function(){var e=this;Object(r.p)({query:this.query}).done(function(t){e.userAllArray=t.data})},onSubmit:function(){var e=this,t=s()({},this.dataForm,{workerIds:this.userList.join(",")});Object(r.H)(t).done(function(t){a.c.success("操作成功"),e.getWorkerMsg(e.$route.query.cooperationId)})},onConfirm:function(e){this.dataForm.role=this.columnsAll.find(function(t){return t.dictLabel==e}).dictValue,this.showPicker=!1}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"box"},[o("div",{staticClass:"new-business",on:{click:function(t){e.showModel=!0}}},[e._v(" + 添加员工 ")]),e._v(" "),o("div",{staticClass:"staff-group"},e._l(e.workerList,function(t){return o("van-cell",{key:t.id,attrs:{center:"",value:"内容"},scopedSlots:e._u([{key:"title",fn:function(){return[o("div",{staticClass:"temp"},[o("div",{staticClass:"custom-title"},[e._v("\n            "+e._s(t.sysUser.realName||t.sysUser.nickName)+"\n            "),o("span",{staticClass:"cus-role"},[e._v(e._s(e._f("userRole")(t.role)))]),e._v(" "),o("div",{staticClass:"cr-phone"},[e._v(e._s(t.sysUser.phone))])]),e._v(" "),o("van-icon",{attrs:{name:"delete"},on:{click:function(o){return e._del(t)}}})],1)]},proxy:!0}],null,!0)})}),1),e._v(" "),o("van-dialog",{attrs:{closeOnClickOverlay:"",title:"添加员工"},on:{confirm:e.onSubmit},model:{value:e.showModel,callback:function(t){e.showModel=t},expression:"showModel"}},[o("p",{staticClass:"model-tips"},[e._v("请确保已在哎哟有房小程序完成手机号绑定")]),e._v(" "),o("van-form",[o("van-field",{staticStyle:{"text-align":"left"},attrs:{readonly:"",clickable:"",name:"role","input-align":"right","right-icon":"arrow-down",value:e.role,label:"角色"},on:{click:function(t){e.showPicker=!0}}}),e._v(" "),o("van-field",{staticStyle:{"text-align":"left"},attrs:{"input-align":"right",label:"电话或姓名","right-icon":"search",placeholder:"请输入电话或姓名"},on:{"click-right-icon":e.searchFn},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),o("div",{staticClass:"checkbox-group"},[o("van-checkbox-group",{model:{value:e.userList,callback:function(t){e.userList=t},expression:"userList"}},e._l(e.userAllArray,function(t){return o("van-checkbox",{key:t.id,attrs:{name:t.id}},[e._v(" "+e._s(t.userName)+" "+e._s(t.phone))])}),1)],1)],1)],1),e._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:e.columns},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1)],1)},staticRenderFns:[]};var f=o("k6Sl")(u,d,!1,function(e){o("TAPa")},"data-v-7c3c9ee8",null);t.default=f.exports}});
//# sourceMappingURL=72.3d4f1e9ffe2fbf771f651758781501818.js.map