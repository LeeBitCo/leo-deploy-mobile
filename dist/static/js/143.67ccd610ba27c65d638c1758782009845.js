webpackJsonp([143],{SjSN:function(t,o){},dxPz:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=e("HkQL"),i=e.n(s),n=e("NpYV"),r=e("Gwi0"),a={data:function(){return{orderAmend:{},houseType:"",pro:"",num:"",reason:"",orderType:"",houselist:[],prolist:[],numlist:[],reasons:["门锁无法打开","房间设施损耗","顾客要更换房型","其他"],renson_show:!1,scale_show:!1,pro_show:!1,num_show:!1,isClean:!1,isLifeCost:""}},created:function(){this.orderAmend=JSON.parse(localStorage.getItem("item_amend")),this.isLifeCost=this.orderAmend.virtualRoomScale.isLifeCost,this.$store.commit("setHeader","换房"),this.houseType=this.orderAmend.roomScale.scaleName,this.houseType_id=this.oldSCacle_id=this.orderAmend.roomScaleId,this.pro=this.orderAmend.virtualRoomScale.scaleName,this.pro_id=this.oldPro_id=this.orderAmend.virtualRoomScaleId,this.num=this.orderAmend.roomSn,this.num_id=this.orderAmend.roomId,this.orderType=this.orderAmend.orderType},methods:{btnScale:function(){var t=this;this.scale_show=!0,Object(r._9)(this.orderAmend.hotelId).done(function(o){t.houselist=o.data.filter(function(o){return o.scaleName!=t.orderAmend.roomScale.scaleName})})},chooseScale:function(t){this.pro="请选择",this.num="请选择",this.houseType=t.scaleName,this.houseType_id=t.id,this.scale_show=!1},btnPro:function(){var t=this,o={hotelId:this.orderAmend.hotelId,roomScaleId:this.houseType_id};Object(r._21)(o).done(function(o){if("1"==t.orderAmend.virtualRoomScale.scaleType||"2"==t.orderAmend.virtualRoomScale.scaleType?t.prolist=o.data.filter(function(t){return t.scaleType<3}):t.prolist=o.data.filter(function(o){return o.scaleType==t.orderAmend.virtualRoomScale.scaleType}),!(t.prolist.length>0))return Object(n.Toast)({message:"暂无房型可选",duration:900}),!1;t.pro_show=!0})},choosePro:function(t){this.num="请选择",this.pro=t.scaleName,this.pro_id=t.id,this.pro_show=!1},btnNum:function(){var t=this,o={roomScaleId:this.houseType_id,status:"1"};Object(r.Y)(o).done(function(o){0==o.data.length?Object(n.Toast)({message:"当前暂无其他房间可选",duration:900}):(t.numlist=o.data,t.num_show=!0)})},chooseNum:function(t){this.num=t.roomSn,this.num_id=t.id,this.num_show=!1},btnReason:function(){this.renson_show=!0},chooseReason:function(t){this.reason=t,this.renson_show=!1},btnOK:function(){var t=this;if("请选择"==this.pro)return Object(n.Toast)({message:"请选择产品房型",duration:900}),!1;if("请选择"==this.num||this.num==this.orderAmend.roomSn)return Object(n.Toast)({message:"请选择房间号",duration:900}),!1;var o={orderId:this.orderAmend.orderId,toScaleId:this.houseType_id,toVirtualRoomScaleId:this.pro_id,toRoomId:this.num_id,clean:1==this.isClean?"0":"1"};3==this.orderType&&0!=this.isLifeCost||4==this.orderType&&0!=this.isLifeCost?(o.orderRoomId=this.orderAmend.id,this.$router.push({path:"/changeRoom_long",query:{long_next:o}}),localStorage.setItem("long_next",i()(o))):n.MessageBox.confirm("",{message:"是否确定换房？",title:"提示",cancelButtonText:"否",confirmButtonText:"是"}).then(function(e){"confirm"==e&&Object(r._62)(t.orderAmend.id,o).done(function(t){Object(n.Toast)({message:t.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}).catch(function(t){console.log(t)})}}},c={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"big_box"},[e("div",{staticClass:"scale_box"},[e("span",[t._v("当前房型:")]),t._v(" "),e("span",[t._v(t._s(t.orderAmend.roomScale.scaleName)+"-"+t._s(t.orderAmend.virtualRoomScale.scaleName)+" "+t._s(t.orderAmend.roomSn))])]),t._v(" "),e("div",{staticClass:"box_top_change"},[e("div",{staticClass:"box_left",on:{click:t.btnScale}},[e("p",{staticStyle:{color:"#000"}},[t._v("基础房型")]),t._v(" "),e("span",[t._v(t._s(t.houseType)+" >")])]),t._v(" "),e("div",{staticClass:"box_left",on:{click:t.btnPro}},[e("p",{staticStyle:{color:"#000"}},[t._v("产品房型")]),t._v(" "),e("span",[t._v(t._s(t.pro)+" >")])]),t._v(" "),e("div",{staticClass:"bottom_left",on:{click:t.btnNum}},[e("p",{staticStyle:{color:"#000"}},[t._v("更换房号")]),t._v(" "),e("span",[t._v(t._s(t.num)+" >")])]),t._v(" "),3!=t.orderType?e("div",{staticClass:"bottom_left",on:{click:t.btnReason}},[e("p",{staticStyle:{color:"#000"}},[t._v("换房原因")]),t._v(" "),e("span",[t._v(t._s(t.reason)+" >")])]):t._e(),t._v(" "),e("div",{staticStyle:{height:"20px",background:"#f2f2f2"}}),t._v(" "),e("div",{staticClass:"bottom_left",on:{click:function(o){t.isClean=!t.isClean}}},[e("p",{staticStyle:{color:"#000"}},[t._v("原房间免打扫")]),t._v(" "),e("van-icon",{style:{color:1==t.isClean?"#ff7d41":""},attrs:{size:"20px",name:1==t.isClean?"checked":"circle"}})],1)]),t._v(" "),e("div",[3==t.orderType||4==t.orderType?e("mt-button",{staticClass:"bottom_box",attrs:{type:"danger"},on:{click:t.btnOK}},[t._v(t._s(0!=t.isLifeCost?"下一步":"确认换房"))]):e("mt-button",{staticClass:"bottom_box",attrs:{type:"danger"},on:{click:t.btnOK}},[t._v("确认换房")])],1),t._v(" "),e("mt-popup",{staticStyle:{width:"100%",position:"fixed",bottom:"0",height:"70%",overflow:"auto"},attrs:{position:"bottom"},model:{value:t.scale_show,callback:function(o){t.scale_show=o},expression:"scale_show"}},[e("div",{staticStyle:{width:"100%","line-height":"30px","font-size":"0.8rem"}},[e("div",{staticStyle:{"font-size":"15px","text-align":"left",padding:"12px 0 12px 20px"}},[t._v("当前可选基础房型")]),t._v(" "),t._l(t.houselist,function(o,s){return e("div",{key:s,staticStyle:{margin:"0 20px","border-bottom":"2px solid #f6f6f6",color:"#f60"},on:{click:function(e){return t.chooseScale(o)}}},[t._v(t._s(o.scaleName))])})],2)]),t._v(" "),e("mt-popup",{staticStyle:{width:"100%",position:"fixed",bottom:"0",height:"70%",overflow:"auto"},attrs:{position:"bottom"},model:{value:t.pro_show,callback:function(o){t.pro_show=o},expression:"pro_show"}},[e("div",{staticStyle:{width:"100%","line-height":"30px","font-size":"0.8rem"}},[e("div",{staticStyle:{"font-size":"15px","text-align":"left",padding:"12px 0 12px 20px"}},[t._v("当前可选产品房型")]),t._v(" "),t._l(t.prolist,function(o,s){return e("p",{key:s,staticStyle:{margin:"0 20px","border-bottom":"2px solid #f6f6f6",color:"#f60"},on:{click:function(e){return t.choosePro(o)}}},[t._v(t._s(o.scaleName))])})],2)]),t._v(" "),e("mt-popup",{staticStyle:{width:"100%",position:"fixed",bottom:"0",height:"70%",overflow:"auto"},attrs:{position:"bottom"},model:{value:t.num_show,callback:function(o){t.num_show=o},expression:"num_show"}},[e("div",{staticStyle:{width:"100%","line-height":"30px","font-size":"0.8rem"}},[e("div",{staticStyle:{"font-size":"15px","text-align":"left",padding:"12px 0 12px 20px"}},[t._v("当前可选房号")]),t._v(" "),t._l(t.numlist,function(o,s){return e("div",{key:s,staticStyle:{margin:"0 20px","border-bottom":"2px solid #f6f6f6",color:"#f60"},on:{click:function(e){return t.chooseNum(o)}}},[t._v(t._s(o.roomSn))])})],2)]),t._v(" "),e("mt-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:t.renson_show,callback:function(o){t.renson_show=o},expression:"renson_show"}},[e("div",{staticStyle:{width:"100%","box-sizing":"border-box"}},[e("p",{staticStyle:{"line-height":"60px","font-size":"0.8rem","text-align":"left","text-indent":"1em"}},[e("span",[t._v("请选择换房原因")])]),t._v(" "),t._l(t.reasons,function(o,s){return e("p",{key:s,staticClass:"p",on:{click:function(e){return t.chooseReason(o)}}},[t._v(t._s(o))])})],2)])],1)},staticRenderFns:[]};var l=e("k6Sl")(a,c,!1,function(t){e("SjSN")},"data-v-104f3986",null);o.default=l.exports}});
//# sourceMappingURL=143.67ccd610ba27c65d638c1758782009845.js.map