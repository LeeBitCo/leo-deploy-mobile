webpackJsonp([125],{SqG5:function(t,e){},vu1H:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("irEr"),i=o("s/fh"),s=o("RmFe"),u=o.n(s),n={data:function(){return{realRooms:1,bbb:!1,sTime:null,eTime:null,timeAll:[],totlePrice:0,rooms:null,periodMonth:null,u_price:null,unitPrice:null,chooseIndex:-1}},created:function(){this.getRooms(),this.rooms=this.$route.query.roomCap,this.sTime=u()().format("YYYY-MM-DD"),this.$store.commit("setHeader",""+this.$route.query.round=="0"?"套餐选择":"增加房间")},computed:{totlePriceAll:function(){return"0"==this.$route.query.charge?0:"0"==this.$route.query.round?(this.rooms*this.totlePrice).toFixed(2):(this.unitPrice*this.rooms).toFixed(2)}},methods:{getRooms:function(){var t=this;Object(r.a)({hotelId:this.$route.query.hotelId}).done(function(e){t.realRooms=e.data,t.getInfo()})},getInfo:function(){var t=this;Object(r.e)({hotelId:this.$route.query.hotelId}).done(function(e){t.timeAll=e.data,"1"==t.$route.query.round?(t.u_price=t.timeAll[0].amount,t.unitPrice=(t.timeAll[0].amount/(30*t.timeAll[0].periodMonth)).toFixed(2)):t.unitPrice=t.timeAll[0].amount.toFixed(2)})},choose:function(t,e){this.periodMonth=e.periodMonth,this.totlePrice=e.amount,this.eTime=u()().add(e.periodMonth,"month").format("YYYY-MM-DD"),this.chooseIndex=t},minus:function(){if(this.$route.query.roomCap-1==this.realRooms)return Object(i.c)({message:"房间数量不可少于当前系统房间数量",duration:1e3}),!1;this.bbb=!1},plus:function(){this.$route.query.roomCap-1==this.rooms&&(Object(i.c)({message:"啦啦啦",duration:1e3}),this.bbb=!0)},goNext:function(t){var e=this;if("0"==this.$route.query.round&&!this.periodMonth)return Object(i.c)("请选择购买时长"),!1;var o={};"0"==this.$route.query.round?(o={hotelId:this.$route.query.hotelId,periodMonth:this.periodMonth,roomCap:this.rooms,totalPrice:this.totlePriceAll},Object(r.d)(o).done(function(r){"0"==o.totalPrice?(Object(i.c)({message:r.msg,duration:900}),setTimeout("window.history.go(-1)",900)):e.$router.push({path:t,query:{code:r.data,hotelSoftCostBillId:r.order.id}})})):(o={hotelId:this.$route.query.hotelId,roomCap:this.rooms-this.$route.query.roomCap,totalPrice:"0"==this.$route.query.charge?"0":this.totlePriceAll},Object(r.c)(o).done(function(r){"0"==o.totalPrice?(Object(i.c)({message:r.msg,duration:900}),setTimeout("window.history.go(-1)",900)):e.$router.push({path:t,query:{code:r.data,hotelSoftCostBillId:r.order.id}})}))}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"m10"},[o("van-cell",{attrs:{center:"",title:"房间数量",label:"0"==t.$route.query.round?"":t.u_price+"元/间/月"}},["0"==t.$route.query.round?o("van-stepper",{attrs:{min:t.realRooms,max:t.$route.query.roomCap,"disable-input":!0},on:{minus:t.minus},model:{value:t.rooms,callback:function(e){t.rooms=e},expression:"rooms"}}):"1"==t.$route.query.round?o("van-stepper",{attrs:{min:t.$route.query.roomCap,"disable-input":!0},on:{minus:t.minus},model:{value:t.rooms,callback:function(e){t.rooms=e},expression:"rooms"}}):t._e()],1),t._v(" "),"1"==t.$route.query.round?o("div",{staticClass:"addContent"},[t._v("新增"+t._s(t.rooms-t.$route.query.roomCap)+"间，共"+t._s(t.rooms)+"间")]):t._e(),t._v(" "),"1"==t.$route.query.round?o("div",{staticClass:"flex round"},[o("div",[t._v("购买周期")]),t._v(" "),o("div",[t._v(t._s(t.sTime)+"至"+t._s(t.$route.query.endLineTime))])]):t._e(),t._v(" "),"0"==t.$route.query.round?o("div",{staticClass:"round"},[o("div",[t._v("购买时长")]),t._v(" "),t.periodMonth?o("div",{staticClass:"c_b2"},[t._v(t._s(t._f("dataFilter")(t.sTime,"YYYY年MM月DD日"))+"至"+t._s(t._f("dataFilter")(t.eTime,"YYYY年MM月DD日"))+"到期")]):o("div",{staticClass:"c_b2"},[t._v(t._s(t._f("dataFilter")(t.sTime,"YYYY年MM月DD日"))+"到期")]),t._v(" "),o("div",{staticClass:"flex time_price_all"},t._l(t.timeAll,function(e,r){return o("div",{key:r,staticClass:"time_price",class:t.chooseIndex==r?"time_price_active":"",attrs:{id:"colorBox"},on:{click:function(o){return t.choose(r,e)}}},[o("div",[o("div",[t._v(t._s(e.periodMonth)+"个月")]),t._v(" "),o("div",{staticClass:"c_60"},[t._v(t._s(e.amount)+"元/间")])])])}),0)]):t._e(),t._v(" "),o("div",{staticClass:"flex bottom_box"},[o("div",{staticClass:"w60"},["0"==t.$route.query.round?o("span",{staticClass:"c_60"},[t._v("¥"+t._s(t.totlePrice))]):t._e(),t._v(" "),"1"==t.$route.query.round?o("span",{staticClass:"c_60"},[t._v("¥"+t._s(t.totlePriceAll))]):t._e(),t._v(" "),"1"==t.$route.query.round&&"1"==t.$route.query.charge?o("span",{staticClass:"c_b2"},[t._v(t._s(t.rooms-t.$route.query.roomCap)+"间*"+t._s(t.unitPrice)+"/间")]):t._e()]),t._v(" "),o("div",{staticClass:"w40 pay",on:{click:function(e){return t.goNext("/continuePay-page")}}},[t._v("立即付款")])])],1)])},staticRenderFns:[]};var l=o("k6Sl")(n,a,!1,function(t){o("SqG5")},"data-v-2a22a434",null);e.default=l.exports}});
//# sourceMappingURL=125.dc3f433b0b4f909c8d6b1758771190591.js.map