webpackJsonp([78],{"4yLz":function(t,e){},dA0N:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("s/fh"),s=o("iClD"),n=o("2REM"),r={data:function(){return{currentInfo:{autoDepositCutPay:null,balanceAmount:null,balanceRoomAmount:null,cAmount:null,cleanConAmount:null,cleanWashAmount:null,maAmount:null,roomAmount:null,maCommission:null},otherOutAll:[],otherInAll:[],dataAdd:{id:null,costName:null,costType:null,costAmount:null},symbol:null,font:null,isInCome:!0,isOutCome:!0,isOutOther:!0,isInOther:!0,show_addOrEdit:!1,show_botttom:!1,is_roleManager:!1,my_type:null,outComeTotel:0,outOtherTotle:0,inOtherTotle:0}},created:function(){this.$store.commit("setHeader",this.$route.query.roomSn+"房间收支详情");var t=Object(s.isRole)("ROLE_MANAGER"),e=Object(s.isRole)("ROLE_HOTEL_MANAGER");"true"!=t&&"true"!=e||(this.is_roleManager=!0),this.getCurrent()},filters:{filterP:function(t){return Number(t).toFixed(2)}},methods:{getCurrent:function(){var t=this,e={roomId:this.$route.query.billId,billTime:this.$route.query.billTime};("1"==this.$route.query.selected?n.a:n.f)(e).done(function(e){t.currentInfo=e.data,t.outComeTotel=Number(t.currentInfo.maAmount)+Number(t.currentInfo.cAmount)+Number(t.currentInfo.cleanConAmount)+Number(t.currentInfo.cleanWashAmount),t.outOtherTotle=t.currentInfo.roomCost||0,t.inOtherTotle=t.currentInfo.roomIncome||0,t.symbol=Number(t.currentInfo.balanceAmount)-Number(t.outComeTotel)-Number(t.outOtherTotle)+Number(t.inOtherTotle)==0?"":Number(t.currentInfo.balanceAmount)+Number(t.currentInfo.roomIncome)>Number(t.currentInfo.roomCost)+Number(t.outComeTotel)?"+":"-","1"==t.$route.query.selected&&t.currentInfo.roomCost>0&&t.getOutOther("1"),"1"==t.$route.query.selected&&t.currentInfo.roomIncome>0&&t.getInOther("2")})},getOutOther:function(t){var e=this,o={roomId:this.$route.query.billId,costDate:this.$route.query.billTime,costType:t};Object(n.h)(o).done(function(t){e.otherOutAll=t.data})},getInOther:function(t){var e=this,o={roomId:this.$route.query.billId,costDate:this.$route.query.billTime,costType:t};Object(n.h)(o).done(function(t){e.otherInAll=t.data})},showAdd:function(t,e){return this.my_type=e,0!=this.is_roleManager&&(!(this.$route.query.billTime.length>"7")&&void(t?(this.item=t,this.show_botttom=!0):(this.font="添加",this.dataAdd.id=null,this.dataAdd.costName=null,this.dataAdd.costAmount=null,this.dataAdd.roomId=this.$route.query.billId,this.dataAdd.costDate=this.$route.query.billTime,this.show_addOrEdit=!0)))},edit:function(){this.show_botttom=!1,this.font="编辑",this.dataAdd.id=this.item.id,this.dataAdd.costName=this.item.costName,this.dataAdd.costAmount=this.item.costAmount,this.show_addOrEdit=!0},removeItem:function(){var t=this;this.show_botttom=!1,i.a.confirm({message:"确定删除'"+this.item.costName+"'?"}).then(function(){Object(n.k)({roomCostId:t.item.id}).done(function(e){Object(i.c)(e.msg),t.getCurrent()}),t.show_botttom=!1}).catch(function(){})},confirmDepart:function(t,e){var o=this;if("confirm"==t){if(e(!1),!this.dataAdd.costName)return Object(i.c)("请输入项目名称"),void(this.dataAdd.costName="");if(!this.dataAdd.costAmount)return Object(i.c)("请输入支出金额"),void(this.dataAdd.costAmount="");var s=this.dataAdd.id?n.j:n.i;this.dataAdd.costType=this.my_type,s(this.dataAdd).done(function(t){Object(i.c)(t.msg),o.getCurrent()}),this.show_addOrEdit=!1}else"cancel"==t&&(e(!1),this.show_addOrEdit=!1)},goNext_day:function(){"1"==this.$route.query.selected&&this.$router.push({path:"/owner-finance-daily-life",query:{name:"保洁人工费",roomId:this.$route.query.billId,billTime:this.$route.query.billTime}})},goNext:function(t){this.$router.push({path:"/owner-finance-daily-life",query:{name:t.name,orderRoomId:this.currentInfo.orderRoomId,selected:this.$route.query.selected,roomId:this.$route.query.billId,billTime:this.$route.query.billTime,hotelCostType:"日常消耗品"==t.name?"2":"3"}})}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.currentInfo?o("div",{attrs:{id:"scroll"}},[o("div",{staticClass:"flex",staticStyle:{"margin-top":"10px","font-weight":"bold","align-items":"baseline"},on:{click:function(e){t.isInCome=!t.isInCome}}},[o("div",{staticClass:"w30",staticStyle:{color:"#000"}},[t._v("房费结算金额")]),t._v(" "),o("div",{staticClass:"w70"},[o("div",{staticStyle:{color:"#57D092",display:"flex","justify-content":"flex-end","align-items":"center"}},[o("div",[t._v("￥"+t._s(t._f("filterP")(t.currentInfo.balanceAmount)))]),t._v(" "),o("van-icon",{attrs:{name:0==t.isInCome?"arrow":"arrow-down"}})],1),t._v(" "),o("div",{staticStyle:{"font-weight":"normal","font-size":"14px",color:"#898989"}},[t._v("顾客支付价 ￥"+t._s(t._f("filterP")(t.currentInfo.roomAmount)))])])]),t._v(" "),t.isInCome?o("div",[o("div",{staticClass:"flex"},[o("div",{staticClass:"w30"},[t._v("房费收入")]),t._v(" "),o("div",{staticClass:"w70"},[t._v("￥"+t._s(t._f("filterP")(t.currentInfo.balanceRoomAmount)))])]),t._v(" "),"1"==t.$route.query.selected?o("div",{staticClass:"flex"},[o("div",{staticClass:"w30"},[t._v("延时退房")]),t._v(" "),o("div",{staticClass:"w70"},[t._v("￥"+t._s(t._f("filterP")(t.currentInfo.autoDepositCutPay)))])]):t._e()]):t._e(),t._v(" "),o("div",{staticClass:"flex",staticStyle:{"margin-top":"10px",color:"#000","font-weight":"bold"},on:{click:function(e){t.isOutCome=!t.isOutCome}}},[o("div",{staticClass:"w30",staticStyle:{color:"#000"}},[t._v("运营支出")]),t._v(" "),o("div",{staticClass:"w70",staticStyle:{color:"#FF5257"}},[t._v("-￥"+t._s(t._f("filterP")(t.outComeTotel)))]),t._v(" "),o("van-icon",{attrs:{name:0==t.isOutCome?"arrow":"arrow-down"}})],1),t._v(" "),t.isOutCome?o("div",[o("div",{staticClass:"flex"},[o("div",{staticClass:"w60"},[t._v("运营服务费"),o("span",{staticStyle:{"font-size":"12px","padding-left":"10px"}},[t._v("顾客支付价*"+t._s(t.currentInfo.maCommission)+"%")])]),t._v(" "),o("div",{staticClass:"w40"},[t._v("-￥"+t._s(t._f("filterP")(t.currentInfo.maAmount)))])]),t._v(" "),o("div",{staticClass:"flex",on:{click:t.goNext_day}},[o("div",{staticClass:"w30"},[t._v("保洁人工费")]),t._v(" "),o("div",{staticClass:"w70 icon_flex"},[t._v("-￥"+t._s(t._f("filterP")(t.currentInfo.cAmount))+"\n        "),"1"==t.$route.query.selected?o("van-icon",{attrs:{color:"#b2b2b2",name:"arrow"}}):t._e()],1)]),t._v(" "),o("div",{staticClass:"flex",on:{click:function(e){return t.goNext({name:"日常消耗品"})}}},[o("div",{staticClass:"w30"},[t._v("日常消耗品")]),t._v(" "),o("div",{staticClass:"w70 icon_flex"},[t._v("-￥"+t._s(t._f("filterP")(t.currentInfo.cleanConAmount))+"\n        "),o("van-icon",{attrs:{color:"#b2b2b2",name:"arrow"}})],1)]),t._v(" "),o("div",{staticClass:"flex",on:{click:function(e){return t.goNext({name:"日常洗涤费用"})}}},[o("div",{staticClass:"w30"},[t._v("日常洗涤费用")]),t._v(" "),o("div",{staticClass:"w70 icon_flex"},[t._v("-￥"+t._s(t._f("filterP")(t.currentInfo.cleanWashAmount))+"\n        "),o("van-icon",{attrs:{color:"#b2b2b2",name:"arrow"}})],1)])]):t._e(),t._v(" "),"1"==t.$route.query.selected&&"7"==t.$route.query.billTime.length?o("div",{staticClass:"flex",staticStyle:{"margin-top":"10px",color:"#000","font-weight":"bold"},on:{click:function(e){t.isOutOther=!t.isOutOther}}},[o("div",{staticClass:"w30",staticStyle:{color:"#000"}},[t._v("其他支出")]),t._v(" "),o("div",{staticClass:"w70",staticStyle:{color:"#FF5257"}},[t._v("-￥"+t._s(t._f("filterP")(t.outOtherTotle)))]),t._v(" "),t.otherOutAll.length>0?o("van-icon",{attrs:{name:0==t.isOutOther?"arrow":"arrow-down"}}):t._e()],1):t._e(),t._v(" "),t.isOutOther?o("div",[t._l(t.otherOutAll,function(e,i){return o("div",{key:i,staticClass:"flex",on:{click:function(o){return t.showAdd(e,"1")}}},[o("div",{staticClass:"w30",staticStyle:{width:"70%"}},[o("div",{staticStyle:{color:"#000"}},[t._v(t._s(e.costName))]),t._v(" "),o("div",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e.costDate))])]),t._v(" "),o("div",{staticClass:"w70 icon_flex",staticStyle:{width:"30%"}},[t._v("-￥"+t._s(t._f("filterP")(e.costAmount))+"\n        "),1==t.is_roleManager?o("van-icon",{attrs:{color:"#b2b2b2",name:"arrow"}}):t._e()],1)])}),t._v(" "),"7"==t.$route.query.billTime.length&&"1"==t.$route.query.selected&&1==t.is_roleManager?o("div",{staticClass:"addOther",on:{click:function(e){return t.showAdd("","1")}}},[t._v("添加支出项目")]):t._e()],2):t._e(),t._v(" "),"1"==t.$route.query.selected&&"7"==t.$route.query.billTime.length?o("div",{staticClass:"flex",staticStyle:{"margin-top":"10px",color:"#000","font-weight":"bold"},on:{click:function(e){t.isInOther=!t.isInOther}}},[o("div",{staticClass:"w30",staticStyle:{color:"#000"}},[t._v("其他收入")]),t._v(" "),o("div",{staticClass:"w70",staticStyle:{color:"#57D092"}},[t._v("+￥"+t._s(t._f("filterP")(t.inOtherTotle)))]),t._v(" "),t.otherInAll.length>0?o("van-icon",{attrs:{name:0==t.isInOther?"arrow":"arrow-down"}}):t._e()],1):t._e(),t._v(" "),t.isInOther?o("div",[t._l(t.otherInAll,function(e,i){return o("div",{key:i,staticClass:"flex",on:{click:function(o){return t.showAdd(e,"2")}}},[o("div",{staticClass:"w30",staticStyle:{width:"70%"}},[o("div",{staticStyle:{color:"#000"}},[t._v(t._s(e.costName))]),t._v(" "),o("div",{staticStyle:{"font-size":"14px"}},[t._v(t._s(e.costDate))])]),t._v(" "),o("div",{staticClass:"w70 icon_flex",staticStyle:{width:"30%"}},[t._v("+￥"+t._s(t._f("filterP")(e.costAmount))+"\n        "),1==t.is_roleManager?o("van-icon",{attrs:{color:"#b2b2b2",name:"arrow"}}):t._e()],1)])}),t._v(" "),"7"==t.$route.query.billTime.length&&"1"==t.$route.query.selected&&1==t.is_roleManager?o("div",{staticClass:"addOther",on:{click:function(e){return t.showAdd("","2")}}},[t._v("添加收入项目")]):t._e()],2):t._e(),t._v(" "),o("div",{staticClass:"flex",staticStyle:{"margin-top":"10px","font-weight":"bold"}},[o("div",{staticClass:"w30",staticStyle:{color:"#000"}},[t._v("结算金额")]),t._v(" "),o("div",{staticClass:"w70 f7"},[t._v(t._s(t.symbol)+"￥"+t._s(Math.abs(t.currentInfo.balanceAmount-t.outComeTotel-t.outOtherTotle+t.inOtherTotle).toFixed(2)))])]),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.show_botttom,callback:function(e){t.show_botttom=e},expression:"show_botttom"}},[o("div",{staticClass:"f7 b_f2",on:{click:t.edit}},[t._v("编辑")]),t._v(" "),o("div",{staticClass:"f85 b_f2",on:{click:t.removeItem}},[t._v("删除此项"+t._s("2"==t.my_type?"收入":"支出"))]),t._v(" "),o("div",{staticClass:"f8 b_f2",staticStyle:{"border-top":"8px solid #f2f2f2"},on:{click:function(e){t.show_botttom=!1}}},[t._v("取消")])]),t._v(" "),o("van-dialog",{attrs:{title:"2"==t.my_type?t.font+"其他收入":t.font+"其他支出","before-close":t.confirmDepart,"show-cancel-button":""},model:{value:t.show_addOrEdit,callback:function(e){t.show_addOrEdit=e},expression:"show_addOrEdit"}},[o("div",[o("van-cell-group",[o("van-field",{attrs:{label:"2"==t.my_type?"收入项目":"支出项目",placeholder:"请输入项目名称"},model:{value:t.dataAdd.costName,callback:function(e){t.$set(t.dataAdd,"costName",e)},expression:"dataAdd.costName"}}),t._v(" "),o("van-field",{attrs:{label:"金额",type:"number",placeholder:"2"==t.my_type?"请输入收入金额":"请输入支出金额"},model:{value:t.dataAdd.costAmount,callback:function(e){t.$set(t.dataAdd,"costAmount",e)},expression:"dataAdd.costAmount"}})],1)],1)])],1):t._e()},staticRenderFns:[]};var l=o("k6Sl")(r,a,!1,function(t){o("4yLz")},"data-v-743bb3d3",null);e.default=l.exports}});
//# sourceMappingURL=78.2182f045a85be40eb8d71758781501818.js.map