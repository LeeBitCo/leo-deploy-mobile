webpackJsonp([123],{OJMa:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("s/fh"),i=e("gyMJ"),n=(e("YazN"),{data:function(){return{blackList:[],searchValue:null,show_addPerson:!1,dataAdd:{hotelId:this.$route.query.hotelId,phone:null,cardNo:null},dataForm:{pageNum:0,pageSize:10,hotelId:this.$route.query.hotelId,searchValue:null}}},created:function(){this.$store.commit("setHeader","客户黑名单"),this.onLoadList()},methods:{searchAnimation:function(){this.dataForm.searchValue=this.searchValue,this.blackList=[],this.dataForm.pageNum=0,this.onLoadList()},Search:function(){this.dataForm.searchValue=this.searchValue,this.blackList=[],this.dataForm.pageNum=0,this.onLoadList()},onPullRefresh:function(){this.blackList=[],this.dataForm.pageNum=0,this.finishedList=!1,this.onLoadList()},onLoadList:function(){var t,a=this;(t=this.dataForm,i.a("/api/business/black/user/list",t,!0)).done(function(t){a.blackList=a.blackList.concat(t.data),a.listLoading=a.pullLoading=!1,t.total==a.blackList.length?a.finishedList=!0:t.total>a.blackList.length&&(a.finishedList=!1)}),this.dataForm.pageNum++},confirmDepart:function(t,a){var e,n=this;if("confirm"==t){if(a(!1),!this.dataAdd.phone&&!this.dataAdd.cardNo)return void Object(s.c)("请至少输入一项");if(this.dataAdd.phone&&!/^((13[0-9])|(14[5-9])|(15([0-3]|[5-9]))|(16[6-7])|(17[1-8])|(18[0-9])|(19[1|3])|(19[5|6])|(19[8|9]))\d{8}$/.test(this.dataAdd.phone))return Object(s.c)("手机号码有误"),void(this.dataAdd.phone="");if(this.dataAdd.phone&&!/^[1][3,4,5,7,8,9][0-9]{9}$/.test(this.dataAdd.phone))return Object(s.c)("手机号码有误"),void(this.dataAdd.phone="");(e=this.dataAdd,i.b("/api/business/black/user/add",e,!0)).done(function(t){Object(s.c)(t.msg),n.dataAdd.phone=null,n.dataAdd.cardNo=null,n.blackList=[],n.dataForm.pageNum=0,n.onLoadList()}),this.show_addPerson=!1}else"cancel"==t&&(a(!1),this.show_addPerson=!1)},remove:function(t){var a=this;s.a.confirm({title:"确定移除"}).then(function(){var e;(e={blackUserId:t.id},i.b("/api/business/black/user/remove/"+e.blackUserId,e,!0)).done(function(t){a.blackList=[],a.dataForm.pageNum=0,a.onLoadList()})}).catch(function(){})}}}),d={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"black_model"}},[s("div",{staticClass:"top_title"},[t._v("\n    黑名单内人员无法在哎哟有房小程序订房或办理入住，并会提示“系统错误，无法进行下一步”。\n  ")]),t._v(" "),s("van-button",{staticClass:"add_style",on:{click:function(a){t.show_addPerson=!0}}},[t._v("+ 新增黑名单")]),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"center"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"input_border",attrs:{type:"search",results:"5",name:"word",id:"Search",placeholder:"请输入手机号或身份证号查询"},domProps:{value:t.searchValue},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.searchAnimation.apply(null,arguments)},input:function(a){a.target.composing||(t.searchValue=a.target.value)}}}),t._v(" "),s("div",{staticClass:"search",on:{click:function(a){return t.Search()}}},[t._v("搜索")])]),t._v(" "),t.blackList.length>0?s("div",{staticClass:"scroll"},[s("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onPullRefresh},model:{value:t.pullLoading,callback:function(a){t.pullLoading=a},expression:"pullLoading"}},[s("van-list",{attrs:{offset:30,finished:t.finishedList,"finished-text":"没有更多了"},on:{load:t.onLoadList},model:{value:t.listLoading,callback:function(a){t.listLoading=a},expression:"listLoading"}},t._l(t.blackList,function(a,e){return s("div",{key:e,staticClass:"content"},[s("div",{staticClass:"hotel-left"},[s("div",[s("div",{staticClass:"c_000"},[s("div",{staticClass:"aaa"},[t._v("手机号")]),t._v(" "),s("div",{style:{color:a.phone?"#000":""}},[t._v(t._s(a.phone||"暂无"))])]),t._v(" "),s("div",{staticClass:"c_000"},[s("div",{staticClass:"aaa"},[t._v("身份证")]),t._v(" "),s("div",{style:{color:a.cardNo?"#000":""}},[t._v(t._s(a.cardNo||"暂无"))])]),t._v(" "),s("div",{staticClass:"c_000"},[s("div",{staticClass:"aaa"},[t._v("添加时间")]),t._v(" "),s("div",[t._v(t._s(a.createTime||"暂无")+" "+t._s(a.realName)+" ")])])]),t._v(" "),s("div",{staticStyle:{color:"red"},on:{click:function(e){return t.remove(a)}}},[t._v("移出")])])])}),0)],1)],1):s("div",{staticClass:"nothing"},[s("img",{attrs:{src:e("f6cR"),alt:""}})]),t._v(" "),s("van-dialog",{attrs:{"before-close":t.confirmDepart,"show-cancel-button":""},model:{value:t.show_addPerson,callback:function(a){t.show_addPerson=a},expression:"show_addPerson"}},[s("div",[s("div",{staticClass:"add_top"},[s("div",[t._v("新增人员")]),t._v(" "),s("div",{staticStyle:{color:"#cecece","font-size":"0.7rem"}},[t._v("(至少输入一项)")])]),t._v(" "),s("van-cell-group",[s("van-field",{attrs:{label:"手机号",type:"tel",maxlength:11,placeholder:"请输入手机号"},model:{value:t.dataAdd.phone,callback:function(a){t.$set(t.dataAdd,"phone",a)},expression:"dataAdd.phone"}}),t._v(" "),s("van-field",{attrs:{label:"身份证号",maxlength:18,placeholder:"请输入身份证号"},model:{value:t.dataAdd.cardNo,callback:function(a){t.$set(t.dataAdd,"cardNo",a)},expression:"dataAdd.cardNo"}})],1)],1)])],1)},staticRenderFns:[]};var o=e("k6Sl")(n,d,!1,function(t){e("jSIL")},"data-v-2e19f77c",null);a.default=o.exports},jSIL:function(t,a){}});
//# sourceMappingURL=123.49e3f02fe3112d01cda01758771190591.js.map