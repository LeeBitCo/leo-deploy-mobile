webpackJsonp([60],{ulk8:function(t,e){},zdvA:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("UJbh"),n=o("tN5p"),s=o("s/fh"),i=o("RmFe"),c=o.n(i),r={data:function(){return{currentInfo:null,roomLists:[],roomAllPrice:"",roomAllDeposit:"",comeShow:!1,comeTime:c()().format("YYYY-MM-DD"),dictLabel:"",comeShowTime:!1,maxDate:new Date,minDate:"",date:"",payeeAccountIdValue:null,users:[],showPicker:!1,objPayments:{}}},created:function(){this.$store.commit("setHeader","账单明细"),this.getBusinessPayment(),this.minDate=new Date(c()().subtract(2,"month"))},methods:{getBusinessPayment:function(){var t=this,e=localStorage.getItem("c_hotelId");Object(n.q)({hotelId:e}).done(function(e){t.userAll=e.data.filter(function(t){return t.payment>="5"||t.account}),t.users=e.data.filter(function(t){return t.payment>="5"||t.account}).map(function(t){return t.accountName})}),Object(a.a)({dictType:"business_payment"}).done(function(e){e.data.map(function(e){t.objPayments[e.dictValue]=e.dictLabel}),t.getCurrenInfo(t.$route.query.cooperRentalBillId)})},getCurrenInfo:function(t){var e=this;Object(n.l)({cooperRentalBillId:t}).done(function(t){e.currentInfo=t.data})},onConfirm:function(t){this.comeShowTime=!1,this.comeTime=c()(t).format("YYYY-MM-DD")},onConfirmPayee:function(t){this.payeeAccountIdValue=t,this.payeeAccountId=this.userAll.find(function(e){return e.accountName==t}).id,this.showPicker=!1},save:function(){var t=this;this.payeeAccountId?Object(n.W)({cooperRentalBillId:this.$route.query.cooperRentalBillId,payeeAccountId:this.payeeAccountId,payTime:this.comeTime}).done(function(e){t.comeShow=!1,Object(s.c)({message:e.msg,duration:2e3}),t.getCurrenInfo(t.$route.query.cooperRentalBillId)}):Object(s.c)({message:"请选择收款账户",duration:900})}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.currentInfo?o("div",{staticStyle:{height:"100vh","font-size":"0.8rem"}},[o("div",{staticClass:"pay-room-box"},[o("div",{staticClass:"pay-room"},[o("div",[t._v("账单状态")]),t._v(" "),o("div",[o("span",{class:0==t.currentInfo.payStatus?"pay_r":"pay_g"},[t._v(t._s(0==t.currentInfo.payStatus?"未支付":"已支付"))])])]),t._v(" "),o("div",{staticClass:"pay-room"},[o("div",[t._v("收租日期")]),t._v(" "),o("div",[t._v(t._s(t._f("dataFilter")(t.currentInfo.startTime)))])]),t._v(" "),o("div",{staticClass:"pay-room"},[o("div",[t._v("缴费周期")]),t._v(" "),o("div",[t._v(t._s(t._f("dataFilter")(t.currentInfo.startTime))+" 至 "+t._s(t._f("dataFilter")(t.currentInfo.endTime)))])]),t._v(" "),o("div",{staticClass:"h10"}),t._v(" "),o("div",{staticClass:"pay-room"},[o("div",[t._v("账单金额")]),t._v(" "),o("div",[t._v(t._s(t.currentInfo.roomPrice||"0")+"元")])]),t._v(" "),o("div",{staticClass:"h10"}),t._v(" "),t.currentInfo.payTime?o("div",{staticClass:"pay-room"},[o("div",[t._v("到账时间")]),t._v(" "),o("div",[t._v(t._s(t.currentInfo.payTime))])]):t._e(),t._v(" "),t.objPayments&&t.currentInfo.payment?o("div",{staticClass:"pay-room"},[o("div",[t._v("支付方式")]),t._v(" "),o("div",[t._v(t._s(t.objPayments[t.currentInfo.payment]))])]):t._e(),t._v(" "),t.currentInfo.payeeAccount?o("div",{staticClass:"pay-room"},[o("div",[t._v("收款账户")]),t._v(" "),o("div",[t._v(t._s(t.currentInfo.payeeAccount))])]):t._e(),t._v(" "),o("div",{staticClass:"h10"})]),t._v(" "),o("div",{staticClass:"room-bottom"},[o("div",{staticClass:"room-bottom-left"},[o("p",{staticClass:"c_888 f12"},[t._v("费用总计")]),t._v(" "),o("p",{staticClass:"f16"},[t._v("¥"+t._s(t.currentInfo.roomPrice))])]),t._v(" "),1==t.currentInfo.payStatus?o("van-button",{staticClass:"room-bottom-right",staticStyle:{background:"#b2b2b2",color:"#fff",border:"#b2b2b2"},attrs:{round:""}},[t._v("已到账")]):t._e(),t._v(" "),0==t.currentInfo.payStatus?o("van-button",{staticClass:"room-bottom-right",attrs:{round:""},on:{click:function(e){t.comeShow=!0}}},[t._v("到账")]):t._e()],1),t._v(" "),o("van-popup",{staticClass:"show-box",model:{value:t.comeShow,callback:function(e){t.comeShow=e},expression:"comeShow"}},[o("div",{staticClass:"show-box-content"},[o("p",{staticClass:"f22"},[t._v("到账")]),t._v(" "),o("div",{staticClass:"pay-room none"},[o("span",[t._v("到账时间")]),t._v(" "),o("div",{staticClass:"border"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.comeTime,expression:"comeTime"}],staticClass:"center",attrs:{readonly:"",placeholder:"请选择",type:"text"},domProps:{value:t.comeTime},on:{click:function(e){t.comeShowTime=!0},input:function(e){e.target.composing||(t.comeTime=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"pay-room none"},[o("span",[t._v("收款账户")]),t._v(" "),o("div",{staticClass:"border display",on:{click:function(e){t.showPicker=!0}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.payeeAccountIdValue,expression:"payeeAccountIdValue"}],staticClass:"center",attrs:{readonly:"",placeholder:"请选择收款账户",type:"text"},domProps:{value:t.payeeAccountIdValue},on:{input:function(e){e.target.composing||(t.payeeAccountIdValue=e.target.value)}}}),t._v(" "),o("van-icon",{attrs:{name:"arrow-down"}})],1)]),t._v(" "),o("van-button",{staticClass:"show-button",on:{click:t.save}},[t._v("确定")])],1)]),t._v(" "),o("van-calendar",{attrs:{"max-date":t.maxDate,"min-date":t.minDate},on:{confirm:t.onConfirm},model:{value:t.comeShowTime,callback:function(e){t.comeShowTime=e},expression:"comeShowTime"}}),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.users},on:{confirm:t.onConfirmPayee,cancel:function(e){t.showPicker=!1}}})],1)],1):t._e()},staticRenderFns:[]};var l=o("k6Sl")(r,u,!1,function(t){o("ulk8")},"data-v-ab7b916e",null);e.default=l.exports}});
//# sourceMappingURL=60.5022fd5fc6ca2e420f2e1758771190591.js.map