webpackJsonp([44],{"1XJ3":function(e,o,t){"use strict";t.d(o,"b",function(){return a}),t.d(o,"a",function(){return i}),t.d(o,"c",function(){return n});var r=t("gyMJ"),s=t("YazN"),a=(t.n(s),function(e){return r.a("/api/business/invoice/byorderroom/"+e.orderRoomId,!0)}),i=function(e){return r.b("/api/business/invoice/accept/"+e.orderInvoiceId,!0)},n=function(e){return r.a("/api/business/invoice/list",e,!0)}},JTfR:function(e,o){},xFkh:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=t("UJbh"),s=t("1XJ3"),a=t("RmFe"),i=t.n(a),n={data:function(){return{selected:0,value:null,listLoading:!1,finishedList:!1,pullLoading:!1,dataForm:{pageSize:10,pageNum:0,status:null,hotelId:this.$route.query.hotelId,searchValue:this.value},listData:[],orderSourceMap:[],payments:[],roles:[],orderL:0,orderR:0,a:null}},created:function(){this.$store.commit("setHeader","待开票订单"),localStorage.getItem("roles")&&(this.roles=JSON.parse(localStorage.getItem("roles")).map(function(e){return e.name})),this.a=i()().format("YYYY-MM-DD HH:mm:ss"),this.getType()},watch:{value:function(e){this.dataForm.searchValue=e,this.dataForm.pageNum=0,this.listData=[],this.onLoadList()}},methods:{getType:function(){var e=this;Object(r.a)({dictType:"business_payment_method"}).done(function(o){e.options=o.data.map(function(e){return{label:e.dictLabel,value:e.dictValue}});for(var t={},r=0;r<e.options.length;r++)t[e.options[r].value]=e.options[r].label;e.payments=t}),Object(r.a)({dictType:"business_order_source"}).done(function(o){var t={};o.data.forEach(function(e){t[e.dictSort]=e.dictLabel}),e.orderSourceMap=t})},chooseSelected:function(){this.listData=[],this.dataForm.pageNum=0,this.onLoadList()},onPullRefresh:function(){this.listData=[],this.dataForm.pageNum=0,this.finishedList=!1},onLoadList:function(){var e=this;0==this.selected?this.dataForm.status="1":this.dataForm.status="2",Object(s.c)(this.dataForm).done(function(o){e.listData=e.listData.concat(o.data),e.listLoading=e.pullLoading=!1,0==e.selected?e.orderL=o.order:e.orderR=o.order,o.order==e.listData.length?e.finishedList=!0:o.order>e.listData.length&&(e.finishedList=!1)}),this.dataForm.pageNum++},goNext:function(e,o){this.$router.push({path:e,query:{orderRoomId:o.orderRoomId,invoiceAmount:o.orderRoom.invoiceAmount}})}}},l={render:function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{attrs:{id:"invoice-top"}},[t("form",{staticStyle:{display:"flex","justify-content":"center",margin:"6px 0"},attrs:{action:"javascript: searchAnimation()"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"input_border",attrs:{type:"search",results:"5",name:"word",id:"Search",placeholder:"请输入姓名/手机号/订单号"},domProps:{value:e.value},on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.searchAnimation.apply(null,arguments)},input:function(o){o.target.composing||(e.value=o.target.value)}}}),e._v(" "),t("div",{staticClass:"search",staticStyle:{"border-radius":"0 20px 20px 0"}},[e._v("搜索")])]),e._v(" "),t("van-tabs",{attrs:{"title-active-color":"#ff7d41",color:"#ff7d41"},on:{click:e.chooseSelected},model:{value:e.selected,callback:function(o){e.selected=o},expression:"selected"}},[t("van-tab",{attrs:{title:"待开票 ("+e.orderL+")"}}),e._v(" "),t("van-tab",{attrs:{title:"已完成("+e.orderR+")"}})],1),e._v(" "),t("div",{staticClass:"task-list"},[t("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:e.onPullRefresh},model:{value:e.pullLoading,callback:function(o){e.pullLoading=o},expression:"pullLoading"}},[t("van-list",{attrs:{offset:30,finished:e.finishedList,"finished-text":"没有更多了"},on:{load:e.onLoadList},model:{value:e.listLoading,callback:function(o){e.listLoading=o},expression:"listLoading"}},e._l(e.listData,function(o,r){return t("div",{key:r,staticClass:"my_order"},[t("div",{staticClass:"per_info"},[t("p",{staticStyle:{color:"#FF7D41"}},[o.orderRoom.order.roomUser?t("span",[e._v(e._s(o.orderRoom.order.roomUser))]):t("span",[e._v(e._s(o.sysUser?o.sysUser.realName:""))]),e._v(" "),null==o.orderRoom.order.phone||""==o.orderRoom.order.phone?t("span",{staticStyle:{color:"#707070"}},[e._v(e._s(null==o.sysUser?"":o.sysUser.phone))]):t("span",{staticStyle:{color:"#707070"},on:{click:function(t){return e.callPhone(o.orderRoom.order.phone)}}},[e._v(e._s(o.orderRoom.order.phone))]),e._v(" "),1==o.isInvoice?t("span",{staticClass:"my-invoice"},[e._v("开发票")]):e._e()]),e._v(" "),t("p",{staticStyle:{color:"#707070"}},[e._v("\n              "+e._s(e.orderSourceMap[o.orderRoom.order.orderSource])+"\n              "),t("span",[e._v(e._s(null!=o.orderRoom.order.externalOrderSn?o.orderRoom.order.externalOrderSn:""))])])]),e._v(" "),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("div",{staticStyle:{"text-align":"left","line-height":"30px",width:"100%"}},[t("p",{staticStyle:{color:"#707070","margin-top":"8px",display:"flex","flex-direction":"column"}},[t("span",[e._v(e._s(o.orderRoom.roomScale?o.orderRoom.roomScale.scaleName:""))]),e._v(" "),t("span",[e._v("\n                  共1间\n                  "),null==o.orderRoom.roomSn?t("span",[e._v("未办理入住")]):t("span",[e._v("房间号"+e._s(o.orderRoom.roomSn))]),e._v(" "),3==o.orderRoom.orderType||4==o.orderRoom.orderType?t("span",{staticClass:"long"},[e._v(e._s(3==o.orderRoom.orderType?"长":"短")+"租")]):e._e()])]),e._v(" "),3==o.orderRoom.orderType?t("p",[e._v("租期："+e._s(e._f("dataFilter")(o.orderRoom.order.startTime))+" 至 "+e._s(e._f("dataFilter")(o.orderRoom.order.endTime)))]):e._e(),e._v(" "),3==o.orderRoom.orderType?t("p",[e._v("共"+e._s(12*(o.orderRoom.order.endTime.substr(0,4)-o.orderRoom.order.startTime.substr(0,4))+(o.orderRoom.order.endTime.substr(5,2)-o.orderRoom.order.startTime.substr(5,2)))+"月")]):e._e(),e._v(" "),3==o.orderRoom.orderType?t("p",[t("span",[e._v(e._s(e.payments[o.order.paymentMethod]))]),e._v(" \n                "),t("span",[e._v("¥"+e._s(o.orderRoom.order.price?o.orderRoom.order.price:"0")+"/月")])]):e._e(),e._v(" "),3!=o.orderRoom.orderType?t("p",{staticStyle:{color:"#000"}},[e._v(e._s(e._f("dataFilter")(o.orderRoom.order.startTime,"MM-DD"))+"至"+e._s(e._f("dataFilter")(o.orderRoom.order.endTime,"MM-DD"))+"  共"+e._s(o.orderRoom.dayIn)+e._s(2==o.orderRoom.orderType?"小时":"晚"))]):e._e()]),e._v(" "),t("div",{staticClass:"info_right",staticStyle:{display:"flex","flex-direction":"column","line-height":"50px"}},[1==o.orderRoom.order.orderSource?t("span",{staticStyle:{color:"#000",width:"100px",display:"block",float:"left","text-align":"right"}},[e._v("房费:¥"+e._s(o.orderRoom.invoiceAmount))]):t("span",{staticStyle:{color:"#000",width:"50px",display:"block",float:"left","text-align":"right","margin-bottom":"30px"}}),e._v(" "),t("span",{staticStyle:{display:"inline-block",height:"20px",color:"#707070"}},[e._v(e._s(o.statusFont))])])]),e._v(" "),t("div",{staticClass:"per_bottom",staticStyle:{"border-top":"'1px solid #f6f6f6'"}},[0==e.selected?t("p",{staticClass:"btn_left",on:{click:function(t){return e.goNext("/details",o)}}},[e._v("订单详情")]):e._e(),e._v(" "),t("p",{staticClass:"btn_left",style:{color:0==e.selected?"#FF7D41":""},on:{click:function(t){return e.goNext("/invoice",o)}}},[e._v(e._s(0==e.selected?"去开票":"开票详情"))])])])}),0)],1)],1)],1)},staticRenderFns:[]};var d=t("k6Sl")(n,l,!1,function(e){t("JTfR")},"data-v-18f25bbc",null);o.default=d.exports}});
//# sourceMappingURL=44.af33adf54e77953200d41758771190591.js.map