webpackJsonp([25],{"5NR5":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("NpYV"),s=o("HkQL"),a=o.n(s),n=o("RmFe"),i=o.n(n),l=o("iClD"),c=o("UJbh"),d=o("tN5p"),u=o("Gwi0"),_={data:function(){return{list:[],orderSourceMap:[],statusName:["日租","日租","时租","长租","短租"],showTop:!1,showButtom:!1,currentPage:1,servalue:"",total:"",font:"待入住",allLoaded:!1,isAutoFill:!1,wrapperHeight:0,loadTxt:"",c_unix:null,payments:[],roles:[],cooperRooms:!1,show_unRoom:!1,show_today:!0,show_notoday:!0,is_roleCooperManager:!1,is_roleManager:!1,cooperChangeRooms:[]}},created:function(){this.is_roleCooperManager=Object(l.isRole)("ROLE_COOPER_MANAGER"),this.is_roleManager=Object(l.isRole)("ROLE_MANAGER"),this.c_unix=i()().unix(),this.payment()},methods:{callPhone:function(t){window.location.href="tel://"+t},payment:function(){var t=this;Object(c.a)({dictType:"business_payment_method"}).done(function(e){t.options=e.data.map(function(t){return{label:t.dictLabel,value:t.dictValue}});for(var o={},r=0;r<t.options.length;r++)o[t.options[r].value]=t.options[r].label;t.payments=o}),Object(c.a)({dictType:"business_order_source"}).done(function(e){var o={};e.data.forEach(function(t){o[t.dictSort]=t.dictLabel}),t.orderSourceMap=o})},btn:function(t){3==t.orderType||4==t.orderType?this.$router.push({path:"/rentInfo_long",query:{orderRoomId:t.id}}):this.$router.push({name:"Details",query:{orderRoomId:t.id}})},reloadPage:function(t){this.list=[],this.currentPage=1,this.statusPage=t.statusPage,this.queryValue=t.queryValue,this.$store.commit({type:"m_getOrder",m_queryValue:this.queryValue,m_statu:this.statusPage||"1"}),this.loadMore()},loadTop:function(){this.list=[],this.orderPageList(),this.$refs.loadmore.onTopLoaded()},loadBottom:function(){this.currentPage+=1,this.loadMore()},orderPageList:function(){var t=this,e=this.$route.query.hotelId,o={pageSize:10,pageNum:1,status:this.$route.query.roomId?"":this.statusPage||1,hotelId:e,searchValue:this.queryValue,roomId:this.$route.query.roomId||""};Object(u._56)(o).done(function(e){t.deal(e)})},loadMore:function(){var t=this,e=this.$route.query.hotelId;if(this.history_unRoom=JSON.parse(localStorage.getItem("history_unRoom")),"1"!=this.statusPage||1==this.history_unRoom){this.show_unRoom=!1;var o={pageSize:10,pageNum:this.currentPage,status:this.$route.query.roomId?"":this.statusPage||1,hotelId:e,searchValue:this.queryValue,roomId:this.$route.query.roomId||""};Object(u._56)(o).done(function(e){t.deal(e)})}else{this.show_today=!0,this.show_notoday=!0,this.show_unRoom=!0;var r={hotelId:e,searchValue:this.queryValue,roomId:this.$route.query.roomId||""};Object(u._66)(r).done(function(e){t.deal(e,"noRoom")})}},deal:function(t,e){e?(this.$emit("back",t.data.length,this.statusPage),this.list=t.data):0==t.total?(this.showTop=!0,this.showButtom=!1,this.total=t.total,this.$emit("back",this.total,this.statusPage)):t.total<=10?(this.allLoaded=!0,this.list=t.data,this.showTop=!1,this.showButtom=!0,this.total=t.total,this.$emit("back",this.total,this.statusPage)):t.total>10&&(this.showTop=!1,this.courrentPage=0,this.allLoaded=!1,this.total=t.total,this.$emit("back",this.total,this.statusPage),this.$refs.loadmore.onTopLoaded(),this.list=this.list.concat(t.data),this.list.length==this.total?this.showButtom=!0:this.list.length==t.total?(this.bottomAllLoaded=!1,this.showButtom=!0):(this.showButtom=!1,this.$refs.loadmore.onBottomLoaded()));for(var o=0;o<this.list.length;o++){var r=this.list[o],s=i()(r.order.startTime).add(1,"day").format("YYYY-MM-DD")+" 08:00:00";if(r.next_day=i()(s).unix(),3!==r.orderType){var a=new Date(r.order.endTime.replace(/-/g,"/")),n=new Date(r.order.startTime.replace(/-/g,"/")),l=n.getHours();l<10&&(l="0"+l);var c=n.getMinutes();c<10&&(c="0"+c);var d=a.getHours();d<10&&(d="0"+d);var u=a.getMinutes();u<10&&(u="0"+u);var _=n.getMonth()+1;_<10&&(_="0"+_);var m=n.getDate();m<10&&(m="0"+m);var p=a.getMonth()+1;p<10&&(p="0"+p);var h=a.getDate();h<10&&(h="0"+h)}else r.long_unit=this.payments[r.order.paymentMethod].substr(0,this.payments[r.order.paymentMethod].length-1);if(2==r.orderType?(r.rstartTime=l+":"+c,r.rendTime=d+":"+u):(r.orderType,r.rstartTime=_+"/"+m,r.rendTime=p+"/"+h),e){var v=i()(r.order.startTime).format("YYYY-MM-DD"),y=i()().format("YYYY-MM-DD"),f=i()().format("YYYY-MM-DD")+" 08:00:00";i()(y).unix()<i()(f).unix()&&i()(v).unix()<i()(f).unix()||i()(y).unix()>i()(f).unix()&&i()(v).unix()<i()(y).unix()?r.unRoom_toDay=!0:r.unRoom_toDay=!1}}},goCode:function(t){this.info={},this.info.scaleName=t.roomScale.scaleName,this.info.roomSn=t.roomSn,this.info.orderId=t.orderId,this.$router.push({path:"/quickLiveOnline",query:{fenfangInfo:this.info}}),localStorage.setItem("fenfangInfo",a()(this.info))},btncancel:function(t){var e=this;r.MessageBox.confirm("",{message:"取消订单后，房费和押金将退还顾客，请慎重操作",title:"取消订单",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(o){if("confirm"==o){var s=t.id,a={orderId:t.orderId};Object(u._50)(s,a).done(function(t){Object(r.Toast)({message:t.msg,duration:900}),e.list=[],e.currentPage=1,e.loadMore()})}}).catch(function(t){console.log(t)})},btnLeaveroom:function(t){var e=this;if(3==t.orderType||4==t.orderType)this.$router.push({path:"/rentCount",query:{orderRoomId:t.id,rentCount_info:t}}),localStorage.setItem("rentCount_info",a()(t));else{r.MessageBox.confirm("",{message:"1"==t.conRoom?"<div style='color:red'>此订单已续住，退房将退回续住的房费，是否继续退房？</div>":"<div>退房后，将不可恢复，请慎重操作</div>",title:"确定退房?",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(o){if("confirm"==o){var s={orderId:t.orderId,orderRoomId:t.id};Object(u._55)(s).done(function(t){Object(r.Toast)({message:t.msg,duration:900}),e.list=[],e.currentPage=1,e.loadMore()})}}).catch(function(t){console.log(t)})}},btnamend:function(t){this.$router.push({name:"Amend",query:{item_amend:t}}),localStorage.setItem("item_amend",a()(t))},btnchange:function(t){this.$router.push({path:"/fdchange",query:{orderDetail:t}}),localStorage.setItem("orderDetail",a()(t))},btnlive:function(t){this.$router.push({name:"DealLive",params:{orderDetail:t}}),localStorage.setItem("orderDetail",a()(t))},btnchange_cooper:function(t){var e=this;this.cooperOrderAmend=t.id,this.cooperOrderId=t.orderId,this.cooperToScaleId=t.roomScaleId,Object(d.u)({hotelId:this.$route.query.hotelId}).done(function(t){e.cooperChangeRooms=t.data,e.cooperRooms=!0})},choosedRoomcancle:function(){this.cooperRooms=!1},choosedRoom:function(t){var e=this,o={orderId:this.cooperOrderId,toScaleId:this.cooperToScaleId,toVirtualRoomScaleId:"0",toRoomId:t.id,reason:this.reason};Object(u._62)(this.cooperOrderAmend,o).done(function(t){Object(r.Toast)({message:t.msg,duration:900}),e.cooperRooms=!1,e.list=[],e.orderPageList()})}}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"font-size":"14px","background-color":"#f6f6f6",position:"fixed",top:"150px",bottom:"0px",left:"0px",right:"0px","overflow-y":"scroll"},style:{top:t.$route.query.roomId?"115px":"150px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop&&0==t.show_unRoom,expression:"showTop && show_unRoom == false"}],staticStyle:{margin:"20px",height:"20px","line-height":"20px",color:"#9e9e9e"}},[t._v("--- 暂无数据 ---")]),t._v(" "),0==t.show_unRoom?r("mt-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,autoFill:t.isAutoFill}},[r("ul",{staticStyle:{"list-style":"none",margin:"0px",padding:"0 5px"}},t._l(t.list,function(e,s){return r("li",{key:s,staticClass:"mui-media mui-col-xs-6 center",staticStyle:{"border-radius":"8px"}},[r("div",{staticClass:"per_info"},[r("div",{staticClass:"_flex"},[r("span",{staticClass:"f12",class:"c_"+e.orderType},[t._v(t._s(t.statusName[e.orderType]))]),t._v(" "),e.order.roomUser?r("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t._f("nameFilter")(e.order.roomUser,e.status,e.cancelTime,e.order.endTime)))]):e.sysUser?r("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t._f("nameFilter")(e.sysUser.realName,e.status,e.cancelTime,e.order.endTime)))]):t._e(),t._v(" "),e.sysUser&&e.sysUser.phone?r("span",{staticStyle:{color:"#707070"}},[t._v(t._s(t._f("phoneFilter")(e.sysUser.phone,e.status,e.cancelTime,e.order.endTime)))]):e.order&&e.order.phone?r("span",{staticStyle:{color:"#707070"},on:{click:function(o){return t.callPhone(e.order.phone)}}},[t._v(t._s(t._f("phoneFilter")(e.order.phone,e.status,e.cancelTime,e.order.endTime)))]):t._e(),t._v(" "),1==e.isInvoice?r("span",{staticClass:"my-invoice"},[t._v("开发票")]):t._e()]),t._v(" "),0==e.order.accountUnitId?r("p",{staticStyle:{color:"#707070"}},[t._v("\n            "+t._s(t.orderSourceMap[e.order.orderSource])+"\n            "),r("span",[t._v(t._s(null!=e.order.externalOrderSn?e.order.externalOrderSn:""))])]):r("p",{staticStyle:{color:"#707070"}},[r("span",[t._v("挂账单位")])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left","line-height":"25px"},on:{click:function(o){return t.btn(e)}}},[r("div",{staticStyle:{color:"#707070","margin-top":"8px",display:"flex","flex-direction":"column"}},[r("div",{staticStyle:{width:"80%"}},[t._v(t._s(e.roomScale?e.roomScale.scaleName:"")+"-"+t._s(e.virtualRoomScale?e.virtualRoomScale.scaleName:""))]),t._v(" "),r("div",{staticStyle:{display:"flex","align-items":"end","justify-content":"space-between"}},[r("div",[t._v("共1间 "+t._s(null==e.roomSn?"未办理入住":"房间号"+e.roomSn)+"\n                "),"1"==e.status?r("img",{staticClass:"noLock",attrs:{src:o("6wyD")}}):t._e()]),t._v(" "),r("div",{staticStyle:{color:"#000"}},[t._v("¥"+t._s(Number(e.roomRealAmount).toFixed(2)))])])]),t._v(" "),3==e.orderType?r("div",[t._v("租期："+t._s(t._f("dataFilter")(e.order.startTime))+"至"+t._s(t._f("dataFilter")(e.order.endTime))+" 共"+t._s(12*(e.order.endTime.substr(0,4)-e.order.startTime.substr(0,4))+(e.order.endTime.substr(5,2)-e.order.startTime.substr(5,2)))+"月")]):t._e(),t._v(" "),3==e.orderType?r("div",[t._v(t._s(t.payments[e.order.paymentMethod])+" ¥"+t._s(e.order.price?e.order.price:"0")+"/"+t._s(e.long_unit)+"\n          ")]):t._e(),t._v(" "),3!=e.orderType?r("div",{staticStyle:{color:"#000"}},[t._v(t._s(t._f("dataFilter")(2!=e.orderType?"":e.order.startTime,"MM月DD日"))+t._s(e.rstartTime)+"至"+t._s(e.rendTime)+t._s(2!=e.orderType?"":"有效")+" 共"+t._s(e.order.diffDay)+t._s(2==e.orderType?"小时":"晚"))]):t._e(),t._v(" "),r("div",{staticStyle:{color:"#707070"}},[t._v("备注： "+t._s("1"==e.isCon||"1"==e.conRoom?"续住":"无"))])]),t._v(" "),r("div",{staticClass:"per_bottom"},[1==e.status||2==e.status?r("p",{staticClass:"btn_left",on:{click:function(o){return t.goCode(e)}}},[t._v("二维码")]):t._e(),t._v(" "),1==e.status&&1==t.is_roleCooperManager?r("p",{staticClass:"btn_left",on:{click:function(o){return t.btnchange_cooper(e)}}},[t._v("换房")]):t._e(),t._v(" "),!e.roomSn&&1==e.status&&1==e.orderType&&0==t.is_roleCooperManager||!e.roomSn&&1==e.status&&2==e.orderType&&0==t.is_roleCooperManager?r("p",{staticClass:"btn_left",on:{click:function(o){return t.btnchange(e)}}},[t._v("换房")]):t._e(),t._v(" "),0==e.isCon&&e.roomSn&&1==e.status&&3!=e.orderType&&0==t.is_roleCooperManager||0==e.isCon&&e.roomSn&&1==e.status&&4!=e.orderType&&0==t.is_roleCooperManager||2==e.status&&0==t.is_roleCooperManager||2==e.status&&3!=e.orderType&&0==t.is_roleCooperManager||2==e.status&&2==e.orderType&&0==t.is_roleCooperManager||e.roomSn&&1==e.status&&3==e.orderType&&0==t.is_roleCooperManager||e.roomSn&&1==e.status&&4==e.orderType&&0==t.is_roleCooperManager?r("p",{staticClass:"btn_left",on:{click:function(o){return t.btnamend(e)}}},[t._v("换房")]):t._e(),t._v(" "),1==e.status&&e.roomSn||1==e.status&&!e.roomSn&&t.c_unix>e.next_day||2==e.status?r("p",{staticClass:"btn_left",staticStyle:{color:"#fff",background:"#FF7D41",border:"none"},on:{click:function(o){return t.btnLeaveroom(e)}}},[t._v(t._s(1==e.orderType||2==e.orderType?"提前退房":"退租"))]):t._e()])])}),0)]):t._e(),t._v(" "),1==t.show_unRoom?r("div",[r("ul",{staticStyle:{"list-style":"none",margin:"0px",padding:"0 5px"}},[r("div",[r("div",{staticClass:"noRoom_box",staticStyle:{"margin-top":"0px"},on:{click:function(e){t.show_today=!t.show_today}}},[r("div",{staticClass:"kong"}),t._v(" "),r("div",{staticStyle:{margin:"14px 10px"}},[t._v("今日待入住 "+t._s(t.list.filter(function(t){return 1==t.unRoom_toDay}).length)+" ")]),t._v(" "),r("van-icon",{attrs:{color:"#989898",name:0==t.show_today?"arrow":"arrow-down"}})],1),t._v(" "),t.show_today?r("div",t._l(t.list.filter(function(t){return 1==t.unRoom_toDay}),function(e,o){return r("li",{key:o,staticClass:"mui-media mui-col-xs-6 center",staticStyle:{"border-radius":"8px"}},[r("div",{staticClass:"per_info"},[r("div",{staticClass:"_flex"},[r("span",{staticClass:"f12",class:"c_"+e.orderType},[t._v(t._s(t.statusName[e.orderType]))]),t._v(" "),e.order.roomUser?r("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.order.roomUser))]):r("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.sysUser?e.sysUser.realName:""))]),t._v(" "),null==e.order.phone||""==e.order.phone?r("span",{staticStyle:{color:"#707070"}},[t._v(t._s(null==e.sysUser?"":e.sysUser.phone))]):r("span",{staticStyle:{color:"#707070"},on:{click:function(o){return t.callPhone(e.order.phone)}}},[t._v(t._s(e.order.phone))]),t._v(" "),1==e.isInvoice?r("span",{staticClass:"my-invoice"},[t._v("开发票")]):t._e()]),t._v(" "),0==e.order.accountUnitId?r("p",{staticStyle:{color:"#707070"}},[t._v("\n                "+t._s(t.orderSourceMap[e.order.orderSource])+"\n                "),r("span",[t._v(t._s(null!=e.order.externalOrderSn?e.order.externalOrderSn:""))])]):r("p",{staticStyle:{color:"#707070"}},[r("span",[t._v("挂账单位")])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left","line-height":"25px"},on:{click:function(o){return t.btn(e)}}},[r("div",{staticStyle:{color:"#707070","margin-top":"8px",display:"flex","flex-direction":"column"}},[r("div",{staticStyle:{width:"80%"}},[t._v(t._s(e.roomScale?e.roomScale.scaleName:"")+"-"+t._s(e.virtualRoomScale?e.virtualRoomScale.scaleName:""))]),t._v(" "),r("div",{staticStyle:{display:"flex","align-items":"end","justify-content":"space-between"}},[r("div",[t._v("共1间 "+t._s(null==e.roomSn?"未办理入住":"房间号"+e.roomSn))]),t._v(" "),r("div",{staticStyle:{color:"#000"}},[t._v("¥"+t._s(Number(e.roomRealAmount).toFixed(2)))])])]),t._v(" "),3==e.orderType?r("div",[t._v("租期："+t._s(t._f("dataFilter")(e.order.startTime))+" 至 "+t._s(t._f("dataFilter")(e.order.endTime))+" 共"+t._s(12*(e.order.endTime.substr(0,4)-e.order.startTime.substr(0,4))+(e.order.endTime.substr(5,2)-e.order.startTime.substr(5,2)))+"月")]):t._e(),t._v(" "),3==e.orderType?r("div",[t._v(t._s(t.payments[e.order.paymentMethod])+" ¥"+t._s(e.order.price||0)+"/"+t._s(e.long_unit)+"\n              ")]):t._e(),t._v(" "),3!=e.orderType?r("div",{staticStyle:{color:"#000"}},[t._v(t._s(t._f("dataFilter")(2!=e.orderType?"":e.order.startTime,"MM月DD日"))+t._s(e.rstartTime)+"至"+t._s(e.rendTime)+t._s(2!=e.orderType?"":"有效")+" 共"+t._s(e.order.diffDay)+t._s(2==e.orderType?"小时":"晚"))]):t._e(),t._v(" "),r("div",{staticStyle:{color:"#707070"}},[t._v("备注： "+t._s("1"==e.isCon||"1"==e.conRoom?"续住":"无"))])]),t._v(" "),r("div",{staticClass:"per_bottom"},[1==e.status||2==e.status?r("p",{staticClass:"btn_left",on:{click:function(o){return t.goCode(e)}}},[t._v("二维码")]):t._e(),t._v(" "),e.roomSn&&1==e.status&&t.c_unix<e.next_day&&0==e.isCon&&1!=e.conRoom&&1==e.order.orderSource||1==e.status&&t.c_unix<e.next_day&&0!=e.isCon&&1!=e.conRoom&&1==e.order.orderSource||1==e.status&&1==t.is_roleManager&&1!=e.conRoom&&1==e.order.orderSource?r("p",{staticClass:"btn_left",staticStyle:{"-border":"1px solid green"},on:{click:function(o){return t.btncancel(e)}}},[t._v("取消订单\n              ")]):t._e(),t._v(" "),1==e.status&&0==e.isCon&&t.c_unix<e.next_day&&1!=e.conRoom&&1!=e.order.orderSource||1==e.status&&0!=e.isCon&&t.c_unix<e.next_day&&1!=e.conRoom&&1!=e.order.orderSource||1==e.status&&null==e.roomSn&&t.c_unix<e.next_day&&1!=e.conRoom&&1!=e.order.orderSource?r("p",{staticClass:"btn_left",on:{click:function(o){return t.btncancel(e)}}},[t._v("取消订单\n              ")]):t._e(),t._v(" "),1==e.status&&e.roomSn||1==e.status&&!e.roomSn&&t.c_unix>e.next_day||2==e.status?r("p",{staticClass:"btn_left",on:{click:function(o){return t.btnLeaveroom(e)}}},[t._v(t._s(1==e.orderType||2==e.orderType?"提前退房":"退租"))]):t._e(),t._v(" "),1==e.status&&1==t.is_roleCooperManager?r("p",{staticClass:"btn_left",staticStyle:{color:"#FF7D41"},on:{click:function(o){return t.btnchange_cooper(e)}}},[t._v("换房")]):t._e(),t._v(" "),!e.roomSn&&1==e.status&&1==e.orderType&&0==t.is_roleCooperManager||!e.roomSn&&1==e.status&&2==e.orderType&&0==t.is_roleCooperManager?r("p",{staticClass:"btn_left",staticStyle:{color:"#FF7D41"},on:{click:function(o){return t.btnchange(e)}}},[t._v("换房")]):t._e(),t._v(" "),0==e.isCon&&e.roomSn&&1==e.status&&3!=e.orderType&&0==t.is_roleCooperManager||0==e.isCon&&e.roomSn&&1==e.status&&4!=e.orderType&&0==t.is_roleCooperManager||2==e.status&&0==t.is_roleCooperManager||2==e.status&&3!=e.orderType&&0==t.is_roleCooperManager||2==e.status&&2==e.orderType&&0==t.is_roleCooperManager||e.roomSn&&1==e.status&&3==e.orderType&&0==t.is_roleCooperManager||e.roomSn&&1==e.status&&4==e.orderType&&0==t.is_roleCooperManager?r("p",{staticClass:"btn_left",staticStyle:{color:"#FF7D41"},on:{click:function(o){return t.btnamend(e)}}},[t._v("换房")]):t._e(),t._v(" "),1==e.status&&null==e.roomSn?r("p",{staticClass:"btn_left",staticStyle:{color:"#fff",background:"#FF7D41",border:"none"},on:{click:function(o){return t.btnlive(e)}}},[t._v("办理入住")]):t._e()])])}),0):t._e()]),t._v(" "),r("div",[r("div",{staticClass:"noRoom_box",on:{click:function(e){t.show_notoday=!t.show_notoday}}},[r("div",{staticClass:"kong"}),t._v(" "),r("div",{staticStyle:{margin:"14px 10px"}},[t._v("远期待入住 "+t._s(t.list.filter(function(t){return 0==t.unRoom_toDay}).length)+" ")]),t._v(" "),r("van-icon",{attrs:{color:"#989898",name:0==t.show_notoday?"arrow":"arrow-down"}})],1),t._v(" "),t.show_notoday?r("div",t._l(t.list.filter(function(t){return 0==t.unRoom_toDay}),function(e,o){return r("li",{key:o,staticClass:"mui-media mui-col-xs-6 center",staticStyle:{"border-radius":"8px"}},[r("div",{staticClass:"per_info"},[r("div",{staticClass:"_flex"},[r("span",{staticClass:"f12",class:"c_"+e.orderType},[t._v(t._s(t.statusName[e.orderType]))]),t._v(" "),e.order.roomUser?r("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.order.roomUser))]):r("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.sysUser?e.sysUser.realName:""))]),t._v(" "),null==e.order.phone||""==e.order.phone?r("span",{staticStyle:{color:"#707070"}},[t._v(t._s(null==e.sysUser?"":e.sysUser.phone))]):r("span",{staticStyle:{color:"#707070"},on:{click:function(o){return t.callPhone(e.order.phone)}}},[t._v(t._s(e.order.phone))]),t._v(" "),1==e.isInvoice?r("span",{staticClass:"my-invoice"},[t._v("开发票")]):t._e()]),t._v(" "),0==e.order.accountUnitId?r("p",{staticStyle:{color:"#707070"}},[t._v("\n                "+t._s(t.orderSourceMap[e.order.orderSource])+"\n                "),r("span",[t._v(t._s(e.order.externalOrderSn))])]):r("p",{staticStyle:{color:"#707070"}},[r("span",[t._v("挂账单位")])])]),t._v(" "),r("div",{staticStyle:{"text-align":"left","line-height":"25px"},on:{click:function(o){return t.btn(e)}}},[r("div",{staticStyle:{color:"#707070","margin-top":"8px",display:"flex","flex-direction":"column"}},[r("div",{staticStyle:{width:"80%"}},[t._v(t._s(e.roomScale?e.roomScale.scaleName:"")+"-"+t._s(e.virtualRoomScale?e.virtualRoomScale.scaleName:""))]),t._v(" "),r("div",{staticStyle:{display:"flex","align-items":"end","justify-content":"space-between"}},[r("div",[t._v("共1间 "+t._s(null==e.roomSn?"未办理入住":"房间号"+e.roomSn))]),t._v(" "),r("div",{staticStyle:{color:"#000"}},[t._v("¥"+t._s(Number(e.roomRealAmount).toFixed(2)))])])]),t._v(" "),3==e.orderType?r("div",[t._v("租期："+t._s(t._f("dataFilter")(e.order.startTime))+" 至 "+t._s(t._f("dataFilter")(e.order.endTime))+" 共"+t._s(12*(e.order.endTime.substr(0,4)-e.order.startTime.substr(0,4))+(e.order.endTime.substr(5,2)-e.order.startTime.substr(5,2)))+"月")]):t._e(),t._v(" "),3==e.orderType?r("div",[t._v(t._s(t.payments[e.order.paymentMethod])+" ¥"+t._s(e.order.price?e.order.price:"0")+"/"+t._s(e.long_unit)+"\n              ")]):t._e(),t._v(" "),3!=e.orderType?r("div",{staticStyle:{color:"#000"}},[t._v(t._s(t._f("dataFilter")(2!=e.orderType?"":e.order.startTime,"MM月DD日"))+t._s(e.rstartTime)+"至"+t._s(e.rendTime)+t._s(2!=e.orderType?"":"有效")+" 共"+t._s(e.order.diffDay)+t._s(2==e.orderType?"小时":"晚"))]):t._e(),t._v(" "),r("div",{staticStyle:{color:"#707070"}},[t._v("备注： "+t._s("1"==e.isCon||"1"==e.conRoom?"续住":"无"))])]),t._v(" "),r("div",{staticClass:"per_bottom"},[1==e.status||2==e.status?r("p",{staticClass:"btn_left",on:{click:function(o){return t.goCode(e)}}},[t._v("二维码")]):t._e(),t._v(" "),e.roomSn&&1==e.status&&t.c_unix<e.next_day&&0==e.isCon&&1!=e.conRoom&&1==e.order.orderSource||1==e.status&&t.c_unix<e.next_day&&0!=e.isCon&&1!=e.conRoom&&1==e.order.orderSource||1==e.status&&1==t.is_roleManager&&1!=e.conRoom&&1==e.order.orderSource?r("p",{staticClass:"btn_left",staticStyle:{"-border":"1px solid green"},on:{click:function(o){return t.btncancel(e)}}},[t._v("取消订单\n              ")]):t._e(),t._v(" "),1==e.status&&0==e.isCon&&t.c_unix<e.next_day&&1!=e.conRoom&&1!=e.order.orderSource||1==e.status&&0!=e.isCon&&t.c_unix<e.next_day&&1!=e.conRoom&&1!=e.order.orderSource||1==e.status&&null==e.roomSn&&t.c_unix<e.next_day&&1!=e.conRoom&&1!=e.order.orderSource?r("p",{staticClass:"btn_left",staticStyle:{"-margin":"0 12px 0px 6px","-border":"1px solid red"},on:{click:function(o){return t.btncancel(e)}}},[t._v("取消订单\n              ")]):t._e(),t._v(" "),1==e.status&&e.roomSn||1==e.status&&!e.roomSn&&t.c_unix>e.next_day||2==e.status?r("p",{staticClass:"btn_left",on:{click:function(o){return t.btnLeaveroom(e)}}},[t._v(t._s(1==e.orderType||2==e.orderType?"提前退房":"退租"))]):t._e(),t._v(" "),1==e.status&&1==t.is_roleCooperManager?r("p",{staticClass:"btn_left",staticStyle:{color:"#FF7D41"},on:{click:function(o){return t.btnchange_cooper(e)}}},[t._v("换房")]):t._e(),t._v(" "),!e.roomSn&&1==e.status&&1==e.orderType&&0==t.is_roleCooperManager||!e.roomSn&&1==e.status&&2==e.orderType&&0==t.is_roleCooperManager?r("p",{staticClass:"btn_left",staticStyle:{color:"#FF7D41"},on:{click:function(o){return t.btnchange(e)}}},[t._v("换房")]):t._e(),t._v(" "),0==e.isCon&&e.roomSn&&1==e.status&&3!=e.orderType&&0==t.is_roleCooperManager||0==e.isCon&&e.roomSn&&1==e.status&&4!=e.orderType&&0==t.is_roleCooperManager||2==e.status&&0==t.is_roleCooperManager||2==e.status&&3!=e.orderType&&0==t.is_roleCooperManager||2==e.status&&2==e.orderType&&0==t.is_roleCooperManager||e.roomSn&&1==e.status&&3==e.orderType&&0==t.is_roleCooperManager||e.roomSn&&1==e.status&&4==e.orderType&&0==t.is_roleCooperManager?r("p",{staticClass:"btn_left",staticStyle:{color:"#FF7D41"},on:{click:function(o){return t.btnamend(e)}}},[t._v("换房")]):t._e(),t._v(" "),1==e.status&&null==e.roomSn?r("p",{staticClass:"btn_left",staticStyle:{color:"#fff",background:"#FF7D41",border:"none"},on:{click:function(o){return t.btnlive(e)}}},[t._v("办理入住")]):t._e()])])}),0):t._e()])])]):t._e(),t._v(" "),r("mt-popup",{staticClass:"cooper-change-rooms",attrs:{position:"bottom"},model:{value:t.cooperRooms,callback:function(e){t.cooperRooms=e},expression:"cooperRooms"}},[r("div",{},[r("p",{staticClass:"lineheight borderbottom"},[t._v("请选择新房间号")]),t._v(" "),r("div",{staticClass:"roomsScroll"},t._l(t.cooperChangeRooms,function(e){return r("div",{key:e.id,staticClass:"lineheight",on:{click:function(o){return t.choosedRoom(e)}}},[t._v(t._s(e.roomSn))])}),0),t._v(" "),r("p",{staticClass:"h10"}),t._v(" "),r("p",{staticClass:"lineheight",on:{click:function(e){return t.choosedRoomcancle(t.item)}}},[t._v("取消")])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showButtom&&0==t.show_unRoom,expression:"showButtom && show_unRoom == false"}],staticStyle:{margin:"10px",height:"20px","line-height":"20px",color:"#9e9e9e"}},[t._v("--- 到底了 ---")])],1)},staticRenderFns:[]};var p={components:{Arrive:o("k6Sl")(_,m,!1,function(t){o("AM4F")},"data-v-0336642d",null).exports,Navbar:r.Navbar,TabItem:r.TabItem},data:function(){return{selected:"1",item:1,servalue:"",Arrive:"",value:"",total1:"",total2:"",total3:"",total4:""}},created:function(){},activated:function(){var t=this;this.$route.query.roomId?this.$store.commit("setHeader","房间"+this.$route.query.roomSn+"订单"):(this.hotelId=this.$route.query.hotelId,this.servalue="",this.selected=this.statusPage="1",this.total1=this.total2=this.total3=this.total4="",this.$store.commit("setHeader","订单管理"));var e=window.sessionStorage.getItem("formType");this.hotelId===this.$route.query.hotelId&&"home"!=e||(window.sessionStorage.setItem("formType","homeDel"),this.hotelId=this.$route.query.hotelId,this.servalue="",this.selected=this.statusPage="1",this.total1=this.total2=this.total3=this.total4=""),this.$store.state.orderTop&&this.$store.state.orderTop.m_statu&&(this.selected=this.statusPage=this.$store.state.orderTop.m_statu+""),this.$store.state.orderTop&&this.$store.state.orderTop.m_queryValue&&(this.servalue=this.$store.state.orderTop.m_queryValue),setTimeout(function(){t.btnSearch(t.statusPage)},10)},methods:{btnSearch:function(t){console.log("点击了搜索按钮，状态页码为 statusPage：",t),console.log("搜索值为：servalue",this.servalue),this.statusPage=t,this.$refs.arrive.reloadPage({queryValue:this.servalue,statusPage:t})},come:function(t,e){void 0==e||1==e?this.total1=t:2==e?this.total2=t:3==e?this.total3=t:4==e&&(this.total4=t)}},watch:{servalue:function(t){this.btnSearch(this.statusPage)}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"background-color":"#F6F6F6",position:"fixed",top:"50px",bottom:"0",left:"0",right:"0"}},[o("van-search",{attrs:{placeholder:"请输入姓名/手机号/订单号"},model:{value:t.servalue,callback:function(e){t.servalue=e},expression:"servalue"}}),t._v(" "),o("div",{staticClass:"arrive"},[t.$route.query.roomId?t._e():o("mt-navbar",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[o("mt-tab-item",{attrs:{id:"1"},nativeOn:{click:function(e){return t.btnSearch(1)}}},[o("span",[t._v("未办理("+t._s(t.total1)+")")])]),t._v(" "),o("mt-tab-item",{attrs:{id:"2"},nativeOn:{click:function(e){return t.btnSearch(2)}}},[o("span",[t._v("入住中("+t._s(t.total2)+")")])]),t._v(" "),o("mt-tab-item",{attrs:{id:"4"},nativeOn:{click:function(e){return t.btnSearch(4)}}},[o("span",[t._v("清洁中("+t._s(t.total4)+")")])]),t._v(" "),o("mt-tab-item",{attrs:{id:"3"},nativeOn:{click:function(e){return t.btnSearch(3)}}},[o("span",[t._v("已取消("+t._s(t.total3)+")")])]),t._v(" "),o("mt-tab-item",{attrs:{id:"7"},nativeOn:{click:function(e){return t.btnSearch(7)}}},[o("span",[t._v("已完成")])])],1)],1),t._v(" "),o("div",[o("Arrive",{ref:"arrive",on:{back:t.come}})],1)],1)},staticRenderFns:[]};var v=o("k6Sl")(p,h,!1,function(t){o("5lIt")},"data-v-2977cee3",null);e.default=v.exports},"5lIt":function(t,e){},"6wyD":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAiCAYAAADRcLDBAAAAAXNSR0IArs4c6QAABNpJREFUWEfFmGtsVGUQhp85Z7eL4A1JiyBK1IarMRHRKKZylss/jQmmGCNGbpFIbACrQKE1G7cRrFprSrwTmhC8pGhi1H+mewIRTKzRGBA0BYMQI60IgoUuu+eM+XZb6G337BIJ35/9sfPOvGfOO/PNHKGAozEnhOdPBfthUAe4FeQG4HrAAk2DnAb9G/gNxAXvC2zrgMTcdFAIyWegMROgYiaeXQUSBSkFtUEE1GD74xVEQc2vB9oFmsD2mmF3u8Twc8XKSUJr5o4hnK5GrSeBMpQwMiBo/gdUFCEFdCL+dk5LgzS5p4YDDUtCY3Mn4XlNIA+ijCwq+OAoWTJnQdtQa43Utx0abDKEhMacKaTZBnIXQiTofRbxfw/oD9gslZh7sD9uAAldO388kdTHqNyHEC4iQGGmSgrRb7FZKDH3zz7QBRK62BnBBN5B5HGgpACv54FjgFF/CJhQME7ZwTFdKS1uj4lzkcSG6FJs3gCuDSDgo+xBZAfqH0St84hfglhTUH0CYVa2bPMeU86rJO62XCChNRWlhEIJYHoBGWglqQ2MpIM/znQzevRITp48y/hrRnGWciKyFqgM9KP8hJeeJ5t2d2UyobWzqxCrsTetufEGmPIWcXjsz0z+qxzlUfAngnWEcGon+8cd4rbj0yixPyrggdKgayTubhGtKo9w3c17EGYEsvf1BcJOI6ld47D8dzMVBKOAbqAdW1eA00k6UY1YDYH+VNvpPDNLdGPFvUhoV0HlmO6ZKpv2HtRaZwUib0K/ElaSIFVS3/a+1lRMIxTaH0gCevC1QrTWWYfI5gIAcOroCGnuSOqL0bdQnhmCEd6WlxIrNeaMwJNzBflUf61obfRThAWFACSeyGqozjHNbPFQjLZI3F2StYlqIT5R3SlaFzVpm5YXoHQjfCfxRLQ3wHOg84Zi5GuJJ4zADYkEyj1IRjN5xK77DIl/gnuDfo5Nk8RcNxMg5pTjaekQz7Z0Sczt6LVx8FgN8kj+jOgpQ8JcsXmvdFRXS71rhFjU0VpnFSJNASBftG5OEjSgTeuSvu5WDAutcxaDbAvA9JhMmP5/U0DKLiMJPSpa5+wCqbiCJHYbEs0gz15BEltEN86uxLI+yS/Oy6QJM3Wp/5j0DjI/ZofYHEd1udS7W4sRZaZMa51liHyQB3ecZGhG7y0abUF4Kqexr5sJ8zpJu7AuaBxFPDPmVmPJ+jydKtNhsyRic2bh6ZfA6ByAX0BaQHOO7cN0T7OPmNY+OYfPk9jykMTa9mRJVFbaTOr6AEvMeG8Xm/ZLsPfwdTu/li6X1lbv4nhX40whxGcgUy/BaZEQPUCaBbIpO3UPnLbrnEUgrwI3Fum1GHMzZVdLPPFhH2ggiafvDlN29WrEzIkyJvBOKSY0mBXxBKoN3FnWKAtbvWFJZPSRJfK8mZJAypD/QSOK2U07QZvp/Pc1ee97sx5eOMOvgYbI2FGVqLUBkdtRIpe0CmZXwB5UDyP+yxzvbh1MYIgmBmdXjVhtWY8wHzCvx2xlQTuFcWNK2TztCYSvSGljnwiHe4P554hM+U4vYVLpDCyWgdwPTOzdtAyZQZ8GMsHNZnYEdC8+WwnTHvSNIpBEf+a67oFbuCpipqqZCHegala/7BE5hrIPW9o5l+yQV775vVDd/gd8/edG7Jdu4gAAAABJRU5ErkJggg=="},AM4F:function(t,e){}});
//# sourceMappingURL=25.e93ddfa011447b0a766e1758771190591.js.map