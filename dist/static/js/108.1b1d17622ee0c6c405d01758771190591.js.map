{"version":3,"sources":["webpack:///src/components/Staff/cleaning-task.vue","webpack:///./src/components/Staff/cleaning-task.vue?402d","webpack:///./src/components/Staff/cleaning-task.vue"],"names":["cleaning_task","data","time_show","price_show","times","cYearM","currentDate","Date","maxDate","listLoading","finishedList","pullLoading","listData","comment_nums","totleNum","dataForm","pageNum","pageSize","hotelId","this","$route","query","userId","status","endTime","editDataForm","cleanAmount","remark","cleanOrderId","cleaningOrderId","allDataForm","refData","cleanOrderType","selected","key","contentKey","priceAll","filters","filterAmount","price","toFixed","created","$store","commit","c_time","dayjs_min_default","valueOf","year","mouth","month","getCurrentInfo","methods","_this","_api","api_staff","done","res","length","reduce","totlePrice","item","dealArr","arr","json","map","myendTime","format","push","d_arr","d_obj","time","child","totle_cleanAmount","find","i","dealTime","timeC","confirmTime","event","editPrice","_child","id","description","confirmDepart","action","_this2","Object","es","msg","Staff_cleaning_task","render","_vm","_h","$createElement","_c","_self","style","top","attrs","staticClass","on","click","$event","_v","_s","name","nativeOn","model","value","callback","$$v","expression","_e","_f","_l","staticStyle","font-size","margin-left","index","roomScale","scaleName","roomSn","class","substr","sysUser","realName","position","type","max-date","cancel","confirm","title","show-cancel-button","before-close","label","placeholder","$set","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/108.1b1d17622ee0c6c405d01758771190591.js","sourcesContent":["<template>\n  <div\n    id=\"cleaningTaskTop\"\n    :style=\"{'top':$route.query.userId?'50px':'103px'}\"\n  >\n    <!-- 月份 -->\n    <div>\n      <div class=\"task-top\">\n        <div\n          @click=\"time_show = true\"\n          class=\"top-left\"\n        >\n          <span>{{ cYearM }}</span>\n          <van-icon name=\"arrow-down\" />\n        </div>\n        <div>\n          <mt-navbar\n            v-model=\"selected\"\n            @click.native=\"getCurrentInfo()\"\n          >\n\n            <mt-tab-item\n              v-if=\"!$route.query.userId\"\n              id=\"0\"\n            >\n              <span>全部</span>\n            </mt-tab-item>\n            <mt-tab-item id=\"1\">\n              <span>退房打扫</span>\n            </mt-tab-item>\n            <mt-tab-item id=\"2\">\n              <span>续住打扫</span>\n            </mt-tab-item>\n          </mt-navbar>\n        </div>\n      </div>\n      <div class=\"totleAll\">\n        <div>\n          共完成<span class=\"c_00 f18\">{{ totleNum }}</span>单{{ '清洁' }}任务，合计收入\n        </div>\n        <div class=\"c_00 f20\">{{ priceAll || 0 | filterAmount }}</div>\n      </div>\n      <!-- 开始 -->\n      <div\n        class=\"task-list\"\n        :key=\"contentKey\"\n      >\n        <div>\n          <div\n            v-for=\"(item, i) in listData\"\n            :key=\"i\"\n          >\n            <div\n              class=\"task\"\n              @click=\"item.status = !item.status\"\n            >\n              <div class=\"task-left\">\n                <div\n                  class=\"g_fw\"\n                  style=\"font-size:15px;\"\n                >{{ item.time | dataFilter('MM月DD日') }}</div>\n                <div class=\"f12\">{{ '共完成'+ item.child.length +'单' }}</div>\n              </div>\n              <div class=\"task-right task-right-top\">\n                <div>{{ item.totlePrice | filterAmount }}</div>\n                <van-icon\n                  style='margin-left:5px;'\n                  :name=\"item.status == false?'arrow':'arrow-down'\"\n                />\n              </div>\n            </div>\n            <div\n              v-if=\"item.status\"\n              :key=\"key\"\n            >\n              <div\n                v-for=\"(_child ,index) in item.child\"\n                :key='index'\n                class=\"task\"\n              >\n                <div class=\"task-left\">\n                  <div>{{ _child.roomScale.scaleName }}&ensp;{{ _child.roomSn }}&ensp;<span\n                      v-if=\"!$route.query.userId && selected == '0'\"\n                      style=\"font-size:12px;\"\n                      :class=\"_child.cleanOrderType==1?'go':'back'\"\n                    >{{ _child.cleanOrderType==1?'续住':'退房'}}</span></div>\n                  <div class=\"f12\">{{ _child.endTime.substr(11) }}&ensp;<span v-if=\"!$route.query.userId && _child.sysUser\">{{ _child.sysUser.realName }}</span></div>\n                </div>\n                <div\n                  class=\"task-right\"\n                  @click=\"editPrice(_child)\"\n                >\n                  <div>\n                    <div>{{ _child.cleanAmount | filterAmount }}</div>\n                    <div\n                      v-if=\"_child.description\"\n                      class=\"f12\"\n                    >备注：{{ _child.description }}</div>\n                  </div>\n                  <van-icon\n                    style='margin-left:5px;'\n                    name=\"arrow\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 结束 -->\n    <van-popup\n      position=\"bottom\"\n      v-model=\"time_show\"\n    >\n      <van-datetime-picker\n        class=\"timeBox\"\n        type=\"year-month\"\n        v-model=\"currentDate\"\n        :max-date=\"maxDate\"\n        @cancel=\"time_show = false\"\n        @confirm=\"confirmTime\"\n      />\n    </van-popup>\n    <!-- 修改价格 -->\n    <van-dialog\n      v-model=\"price_show\"\n      :title=\"selected == '0'?cleanOrderType == 0?'清洁金额':'保洁金额':selected == '1'?'清洁金额':'保洁金额'\"\n      show-cancel-button\n      :before-close=\"confirmDepart\"\n    >\n      <van-cell-group>\n        <van-field\n          v-model=\"editDataForm.cleanAmount\"\n          :label=\"selected == '0'?cleanOrderType == 0?'清洁金额':'保洁金额':selected == '1'?'清洁金额':'保洁金额'\"\n          :placeholder=\"selected == '0'?cleanOrderType == 0?'请输入清洁金额':'请输入保洁金额':selected == '1'?'清洁金额':'保洁金额'\"\n        />\n        <van-field\n          v-model=\"editDataForm.remark\"\n          label=\"备注\"\n          placeholder=\"请输入备注\"\n        />\n      </van-cell-group>\n    </van-dialog>\n  </div>\n</template>\n<script>\nimport dayjs from 'dayjs';\nimport { Toast } from 'vant';\nimport { GetBusinessCleanorderSum, GetBusinessCleanorderCleaningSum, GetBusinessCleanorderCleaningPage, GetBusinessCleanorderPage, GetBusinessCleanorderList, PostusinessCleanorderAmount, PostusinessCleaningorderAmount } from '@/api/api_staff';\nexport default {\n    data() {\n        return {\n            time_show: false,\n            price_show: false,\n            times: null,\n            cYearM: '',\n            currentDate: new Date(),\n            maxDate: new Date(),\n            listLoading: false, //  上滑列表加载（每一次上滑的时候）---加载中\n            finishedList: false, //  上滑列表加载完了所有数据---没有更多了）\n            pullLoading: false, // 下拉刷新加载动画---加载中\n            listData: [], //列表数据\n            comment_nums: '', //评论总数量\n            totleNum: null,\n            dataForm: {\n                pageNum: 0,\n                pageSize: 10000,\n                hotelId: this.$route.query.hotelId,\n                userId: this.$route.query.userId,\n                status: '2',\n                endTime: ''\n            },\n            editDataForm: {\n                cleanAmount: null,\n                remark: null,\n                cleanOrderId: null,\n                cleaningOrderId: null\n            },\n            allDataForm: {\n                hotelId: this.$route.query.hotelId,\n                endTime: ''\n            },\n            refData: null,\n            cleanOrderType: null,\n            selected: '1',\n            key: 0,\n            contentKey: 0,\n            priceAll: 0\n        };\n    },\n    filters: {\n        filterAmount(price) {\n            if (price) {\n                return '￥' + price.toFixed(2);\n            } else {\n                return '￥' + 0.0;\n            }\n        }\n    },\n    created() {\n        this.refData = this.userId || '';\n        this.$store.commit('setHeader', '保洁统计');\n        let c_time = dayjs().valueOf();\n        let year = dayjs(c_time).year();\n        let mouth = dayjs(c_time).month() + 1 < 10 ? '0' + (dayjs(c_time).month() + 1) : dayjs(c_time).month() + 1;\n        this.cYearM = year + '年' + mouth + '月';\n        this.dataForm.endTime = year + '-' + mouth;\n        this.getCurrentInfo();\n    },\n    methods: {\n        getCurrentInfo() {\n            let _api = null;\n            if (this.selected == 1) {\n                _api = GetBusinessCleanorderPage;\n                this.dataForm.pageNum = 0;\n            } else if (this.selected == 2) {\n                _api = GetBusinessCleanorderCleaningPage;\n                this.dataForm.pageNum = 0;\n            } else {\n                this.allDataForm.endTime = this.dataForm.endTime;\n                _api = GetBusinessCleanorderList;\n            }\n            _api(_api == GetBusinessCleanorderList ? this.allDataForm : this.dataForm).done((res) => {\n                this.listData = [];\n                this.priceAll = 0;\n                this.totleNum = 0;\n                if (res.data.length > 0) {\n                    this.priceAll = res.data.reduce((totlePrice, item) => {\n                        return (totlePrice += item.cleanAmount || 0);\n                    }, 0);\n                    this.totleNum = res.data.length;\n                    this.dealArr(res.data);\n                }\n            });\n            this.dataForm.pageNum++;\n        },\n        dealArr(arr) {\n            if (arr.length == 0) {\n                return;\n            }\n            let json = {};\n            arr.map((item) => {\n                item.myendTime = dayjs(item.endTime).format('YYYY-MM-DD');\n                if (json[item.myendTime]) {\n                    json[item.myendTime].push(item);\n                } else {\n                    json[item.myendTime] = [item];\n                }\n            });\n            let d_arr = [];\n            for (const key in json) {\n                let d_obj = {};\n                d_obj.time = key;\n                d_obj.child = json[key];\n                d_obj.status = false;\n                d_obj.totlePrice = json[key].reduce((totle_cleanAmount, item) => {\n                    return (totle_cleanAmount += item.cleanAmount || 0);\n                }, 0);\n                d_arr.push(d_obj);\n            }\n            ++this.contentKey;\n            d_arr.find((item, i) => i == 0).status = true;\n            this.listData = d_arr;\n        },\n        dealTime(timeC) {\n            let year = dayjs(timeC).year();\n            let mouth = dayjs(timeC).month() + 1 < 10 ? '0' + (dayjs(timeC).month() + 1) : dayjs(timeC).month() + 1;\n            this.cYearM = year + '年' + mouth + '月';\n            this.dataForm.endTime = year + '-' + mouth;\n            this.getCurrentInfo();\n        },\n        confirmTime(event) {\n            this.dealTime(dayjs(event).valueOf());\n            this.time_show = false;\n        },\n        editPrice(_child) {\n            this.editDataForm.cleanAmount = _child.cleanAmount || 0;\n            this.editDataForm.cleanOrderId = _child.id;\n            this.editDataForm.remark = _child.description;\n            this.cleanOrderType = _child.cleanOrderType;\n            this.price_show = true;\n        },\n        // PostusinessCleaningorderAmount:保洁\n        // PostusinessCleanorderAmount:清洁\n        confirmDepart(action, done) {\n            if (action == 'confirm') {\n                done(false);\n                if (!this.editDataForm.cleanAmount) {\n                    Toast('请输入保洁金额');\n                    return;\n                }\n                let _api = null;\n                if (this.selected == '0') {\n                    if (this.cleanOrderType == '1') {\n                        _api = PostusinessCleaningorderAmount;\n                        delete this.editDataForm.cleanOrderId;\n                    } else {\n                        _api = PostusinessCleanorderAmount;\n                        delete this.editDataForm.cleaningOrderId;\n                    }\n                } else if (this.selected == '1') {\n                    _api = PostusinessCleanorderAmount;\n                    delete this.editDataForm.cleaningOrderId;\n                } else if (this.selected == '2') {\n                    _api = PostusinessCleaningorderAmount;\n                    delete this.editDataForm.cleanOrderId;\n                }\n                _api(this.editDataForm).done((res) => {\n                    Toast(res.msg);\n                    this.getCurrentInfo();\n                });\n                this.price_show = false;\n            } else if (action == 'cancel') {\n                done(false);\n                this.price_show = false;\n            }\n        }\n    }\n};\n</script>\n<style scoped>\n#cleaningTaskTop {\n    font-size: 14px;\n    padding: 15px 0;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    overflow-y: scroll;\n    background-color: #f6f6f6;\n}\n.task-top {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 15px;\n    background: #fff;\n}\n.top-left {\n    display: flex;\n    align-items: center;\n}\n.totleAll {\n    color: #9e9e9e;\n    text-align: left;\n    padding: 20px 15px;\n    line-height: 30px;\n    font-size: 14px;\n}\n.task-left {\n    width: 70%;\n    text-align: left;\n}\n.task {\n    display: flex;\n    align-items: center;\n    line-height: 22px;\n    margin: 10px;\n    border-bottom: 1px solid #f2f2f2;\n    font-size: 14px;\n}\n.task-right {\n    width: 30%;\n    text-align: right;\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n.task-right-top {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n.typeStyle {\n    border: 1px solid #ff7d41;\n    font-size: 12px;\n    color: #ff7d41;\n}\n.go {\n    border: 1px solid #ff7d41;\n    color: #ff7d41;\n}\n.back {\n    border: 1px solid #02bc6c;\n    color: #02bc6c;\n}\n.c_00 {\n    color: #000;\n}\n.f18 {\n    font-size: 18px;\n    font-weight: bold;\n    padding: 0 4px;\n}\n.f20 {\n    font-size: 20px;\n    font-weight: bold;\n}\n.f12 {\n    color: #9e9e9e;\n    font-size: 12px;\n}\n.task-list {\n    background: #fff;\n    overflow: auto;\n    height: calc(100vh - 250px);\n}\n.cell_left {\n    text-align: left;\n    font-weight: bold;\n}\n.cell_left_bottom {\n    font-weight: normal;\n}\n/deep/ .van-dialog__cancel {\n    border: 1px solid #f2f2f2;\n    border-radius: 10px;\n}\n/deep/ .van-dialog__footer {\n    display: flex;\n    overflow: hidden;\n    -webkit-user-select: none;\n    user-select: none;\n    width: 90%;\n    display: flex;\n    margin: 20px auto;\n    border-radius: 5px;\n}\n/deep/ .van-dialog__confirm {\n    background: #ff7d41;\n    color: #fff;\n    border-radius: 10px;\n}\n/deep/ .van-dialog__header {\n    padding: 20px 0;\n}\n/deep/ .van-cell--large .van-cell__label {\n    font-size: 12px;\n}\n/deep/ .mint-navbar .mint-tab-item {\n    padding: 18px 10px;\n}\n/deep/ .mint-tab-item-label {\n    white-space: nowrap;\n}\nselect {\n    border: solid 1px #000;\n    appearance: none;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    border: none;\n    outline: none;\n}\nselect::-ms-expand {\n    display: none;\n}\n.mint-navbar .mint-tab-item.is-selected {\n    color: #ff7d41;\n    margin-bottom: 0;\n    border-bottom: 3px solid #ff7d41;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Staff/cleaning-task.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({'top':_vm.$route.query.userId?'50px':'103px'}),attrs:{\"id\":\"cleaningTaskTop\"}},[_c('div',[_c('div',{staticClass:\"task-top\"},[_c('div',{staticClass:\"top-left\",on:{\"click\":function($event){_vm.time_show = true}}},[_c('span',[_vm._v(_vm._s(_vm.cYearM))]),_vm._v(\" \"),_c('van-icon',{attrs:{\"name\":\"arrow-down\"}})],1),_vm._v(\" \"),_c('div',[_c('mt-navbar',{nativeOn:{\"click\":function($event){return _vm.getCurrentInfo()}},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}},[(!_vm.$route.query.userId)?_c('mt-tab-item',{attrs:{\"id\":\"0\"}},[_c('span',[_vm._v(\"全部\")])]):_vm._e(),_vm._v(\" \"),_c('mt-tab-item',{attrs:{\"id\":\"1\"}},[_c('span',[_vm._v(\"退房打扫\")])]),_vm._v(\" \"),_c('mt-tab-item',{attrs:{\"id\":\"2\"}},[_c('span',[_vm._v(\"续住打扫\")])])],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"totleAll\"},[_c('div',[_vm._v(\"\\n        共完成\"),_c('span',{staticClass:\"c_00 f18\"},[_vm._v(_vm._s(_vm.totleNum))]),_vm._v(\"单\"+_vm._s('清洁')+\"任务，合计收入\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"c_00 f20\"},[_vm._v(_vm._s(_vm._f(\"filterAmount\")(_vm.priceAll || 0)))])]),_vm._v(\" \"),_c('div',{key:_vm.contentKey,staticClass:\"task-list\"},[_c('div',_vm._l((_vm.listData),function(item,i){return _c('div',{key:i},[_c('div',{staticClass:\"task\",on:{\"click\":function($event){item.status = !item.status}}},[_c('div',{staticClass:\"task-left\"},[_c('div',{staticClass:\"g_fw\",staticStyle:{\"font-size\":\"15px\"}},[_vm._v(_vm._s(_vm._f(\"dataFilter\")(item.time,'MM月DD日')))]),_vm._v(\" \"),_c('div',{staticClass:\"f12\"},[_vm._v(_vm._s('共完成'+ item.child.length +'单'))])]),_vm._v(\" \"),_c('div',{staticClass:\"task-right task-right-top\"},[_c('div',[_vm._v(_vm._s(_vm._f(\"filterAmount\")(item.totlePrice)))]),_vm._v(\" \"),_c('van-icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":item.status == false?'arrow':'arrow-down'}})],1)]),_vm._v(\" \"),(item.status)?_c('div',{key:_vm.key},_vm._l((item.child),function(_child,index){return _c('div',{key:index,staticClass:\"task\"},[_c('div',{staticClass:\"task-left\"},[_c('div',[_vm._v(_vm._s(_child.roomScale.scaleName)+\" \"+_vm._s(_child.roomSn)+\" \"),(!_vm.$route.query.userId && _vm.selected == '0')?_c('span',{class:_child.cleanOrderType==1?'go':'back',staticStyle:{\"font-size\":\"12px\"}},[_vm._v(_vm._s(_child.cleanOrderType==1?'续住':'退房'))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"f12\"},[_vm._v(_vm._s(_child.endTime.substr(11))+\" \"),(!_vm.$route.query.userId && _child.sysUser)?_c('span',[_vm._v(_vm._s(_child.sysUser.realName))]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"task-right\",on:{\"click\":function($event){return _vm.editPrice(_child)}}},[_c('div',[_c('div',[_vm._v(_vm._s(_vm._f(\"filterAmount\")(_child.cleanAmount)))]),_vm._v(\" \"),(_child.description)?_c('div',{staticClass:\"f12\"},[_vm._v(\"备注：\"+_vm._s(_child.description))]):_vm._e()]),_vm._v(\" \"),_c('van-icon',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"name\":\"arrow\"}})],1)])}),0):_vm._e()])}),0)])]),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.time_show),callback:function ($$v) {_vm.time_show=$$v},expression:\"time_show\"}},[_c('van-datetime-picker',{staticClass:\"timeBox\",attrs:{\"type\":\"year-month\",\"max-date\":_vm.maxDate},on:{\"cancel\":function($event){_vm.time_show = false},\"confirm\":_vm.confirmTime},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1),_vm._v(\" \"),_c('van-dialog',{attrs:{\"title\":_vm.selected == '0'?_vm.cleanOrderType == 0?'清洁金额':'保洁金额':_vm.selected == '1'?'清洁金额':'保洁金额',\"show-cancel-button\":\"\",\"before-close\":_vm.confirmDepart},model:{value:(_vm.price_show),callback:function ($$v) {_vm.price_show=$$v},expression:\"price_show\"}},[_c('van-cell-group',[_c('van-field',{attrs:{\"label\":_vm.selected == '0'?_vm.cleanOrderType == 0?'清洁金额':'保洁金额':_vm.selected == '1'?'清洁金额':'保洁金额',\"placeholder\":_vm.selected == '0'?_vm.cleanOrderType == 0?'请输入清洁金额':'请输入保洁金额':_vm.selected == '1'?'清洁金额':'保洁金额'},model:{value:(_vm.editDataForm.cleanAmount),callback:function ($$v) {_vm.$set(_vm.editDataForm, \"cleanAmount\", $$v)},expression:\"editDataForm.cleanAmount\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"备注\",\"placeholder\":\"请输入备注\"},model:{value:(_vm.editDataForm.remark),callback:function ($$v) {_vm.$set(_vm.editDataForm, \"remark\", $$v)},expression:\"editDataForm.remark\"}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4545b99e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Staff/cleaning-task.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.pnpm/extract-text-webpack-plugin@3.0.2_webpack@3.12.0/node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4545b99e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=styles&index=0!./cleaning-task.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=script&index=0!./cleaning-task.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=script&index=0!./cleaning-task.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4545b99e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=template&index=0!./cleaning-task.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4545b99e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Staff/cleaning-task.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}