webpackJsonp([23],{ALdH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("32Wh"),l=i.n(o),s=i("NpYV"),r=i("Gwi0"),c=i("UJbh"),a={data:function(){return{ele_price:"",bothInfo:[{name:"后付费",statu:!0},{name:"预付款",statu:!1}],localInfo:["费用项目","收费方式","价格","初始读数"],add_box:!1,show_lifeCostBox:!1,show_lifeCostPro:!1,show_lifeCostPay:!1,choosedLifeCostAll:[],lastCost:[],payOldAll:[],payAll:[],lifeCostAll:[],payAllobj:{},crrent_info:"",elecPayModel:"",lifeCost_label:null,lifeCost_value:null,lifeCost_price:null,lifeCost_mode:null,lifeType:null,unitList:{1:"元/度",2:"元/吨",3:"元/m³",4:"元/月",5:"元/月",6:"元/月",7:"元/月"}}},computed:{computerWidth:function(){return window.innerWidth/4+"px"}},created:function(){this.crrent_info=JSON.parse(localStorage.getItem("live_next")),this.lifeCostObj=JSON.parse(this.crrent_info.lifeCost),this.$store.commit("setHeader","费用设置"),this.getMore()},methods:{getMore:function(){var t=this;Object(c.a)({dictType:"tb_business_life_cost_mode"}).done(function(e){t.payOldAll=e.data,t.payAll=e.data.map(function(t){return t.dictLabel}),t.payAllobj={},e.data.map(function(e){t.payAllobj[e.dictValue]=e.dictLabel}),t.lifeCost_mode=t.payOldAll[0].dictLabel}),Object(c.a)({dictType:"business_life_cost"}).done(function(e){e.data.map(function(t){t.dictPrice=null,t.dictMode=null});var i=[];for(var o in t.lifeCostObj){var l={};"elecPrice"==o||"waterPrice"==o||"gasPrice"==o?(l.dictValue=o,l.dictPrice=t.lifeCostObj[o].price,l.dictMode=t.lifeCostObj[o].mode,i.push(l)):(l.dictValue=o,l.dictPrice=t.lifeCostObj[o],l.dictMode="",i.push(l))}i.forEach(function(t){e.data.forEach(function(e){t.dictValue==e.dictValue&&(e.dictPrice=t.dictPrice,e.dictMode=t.dictMode)})}),t.lifeCostOldAll=e.data,t.lifeCostAll=e.data.map(function(t){return t.dictLabel}),t.lifeCost_label=t.lifeCostOldAll[0].dictLabel,t.lifeCost_value=t.lifeCostOldAll[0].dictValue,t.choosedLifeCostAll=e.data.filter(function(t){return t.dictPrice>0})})},eleStyle:function(t){this.elecPayModel=t,0==t?(this.bothInfo[0].statu=!0,this.bothInfo[1].statu=!1):(this.bothInfo[0].statu=!1,this.bothInfo[1].statu=!0)},removeLife:function(t){this.choosedLifeCostAll=this.choosedLifeCostAll.filter(function(e){return e.dictValue!=t.dictValue}),this.lifeCostAll.push(t.label)},priceTwoNum:function(t){for(var e=0;e<this.choosedLifeCostAll.length;e++){var i=this.choosedLifeCostAll[e];t==e&&i.first&&(i.first=i.first.toString(),i.first=i.first.replace(/[^\d.]/g,""),i.first=i.first.replace(/\.{2,}/g,"."),i.first=i.first.replace(".","$#$").replace(/\./g,"").replace("$#$","."),i.first=i.first.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),i.first.indexOf(".")<0&&""!=i.first&&(i.first=parseFloat(i.first)))}},openLife:function(t,e){var i=this;this.lifeType=t;var o=[].concat(l()(this.lifeCostOldAll)).filter(function(t){return[].concat(l()(i.choosedLifeCostAll)).every(function(e){return e.dictLabel!=t.dictLabel})});if("add"==this.lifeType){if(this.lifeCost_price="",0==o.length)return Object(s.Toast)({message:"暂无可添加",duration:900}),!1;for(var r=0;r<o.length;r++)o[r].dictPrice="";this.lifeCostAll=o.map(function(t){return t.dictLabel}),this.lifeCost_label=this.lifeCostAll[0],this.lifeCost_mode=this.payAll[0],this.lifeCost_value=this.lifeCostOldAll.find(function(t){return t.dictLabel==i.lifeCostAll[0]}).dictValue,this.show_lifeCostBox=!0}else this.lifeCost_label=e.dictLabel,this.lifeCost_value=e.dictValue,this.lifeCost_price=e.dictPrice,this.lifeCost_mode=this.payOldAll.find(function(t){return t.dictValue==e.dictMode}).dictLabel,this.show_lifeCostBox=!0},onConfirmCostType:function(t){this.lifeCost_label=t,this.lifeCost_value=this.lifeCostOldAll.find(function(e){return e.dictLabel==t}).dictValue,this.show_lifeCostPro=!1},onConfirmCostPayType:function(t){this.lifeCost_mode=t,this.show_lifeCostPay=!1},confirmDepart:function(t,e){if("confirm"==t){if(e(!1),!this.lifeCost_price)return void Object(s.Toast)("请输入单价");var i={dictLabel:this.lifeCost_label,dictValue:this.lifeCost_value,dictMode:this.lifeCost_mode,dictPrice:this.lifeCost_price};"waterPrice"==i.dictValue||"elecPrice"==i.dictValue||"gasPrice"==i.dictValue?i.dictMode=this.payOldAll.find(function(t){return t.dictLabel==i.dictMode}).dictValue:i.dictMode="2","add"==this.lifeType||(this.choosedLifeCostAll=this.choosedLifeCostAll.filter(function(t){return t.dictLabel!=i.dictLabel})),this.choosedLifeCostAll.push(i),this.show_lifeCostBox=!1}else"cancel"==t&&(e(!1),this.show_lifeCostBox=!1)},btn_ok:function(){for(var t={},e={},i={},o=0;o<this.choosedLifeCostAll.length;o++){var l=this.choosedLifeCostAll[o];t[l.dictValue]=l.dictPrice,e[l.dictValue]=l.dictMode,i[l.dictValue]=l.first}this.price_totel=t,this.mode_totel=e,this.first_totel=i;var c=this.crrent_info.orderRoomId,a={orderId:this.crrent_info.orderId,roomUser:this.crrent_info.roomUser,phone:this.crrent_info.phone,idCard:this.crrent_info.idCard,roomId:this.crrent_info.roomId,elecPayModel:this.elecPayModel?this.elecPayModel:0,elecPrice:this.price_totel.elecPrice,waterPrice:this.price_totel.waterPrice,gasPrice:this.price_totel.gasPrice,propPrice:this.price_totel.propPrice,rubbishPrice:this.price_totel.rubbishPrice,parkPrice:this.price_totel.parkPrice,broadBandPrice:this.price_totel.broadBandPrice,elecMode:this.mode_totel.elecPrice?this.mode_totel.elecPrice:"",waterMode:this.mode_totel.waterPrice?this.mode_totel.waterPrice:"",gasMode:this.mode_totel.gasPrice?this.mode_totel.gasPrice:"",preElecDegree:this.first_totel.elecPrice,preWaterDegree:this.first_totel.waterPrice,preGasDegree:this.first_totel.gasPrice};Object(r._63)(c,a).done(function(t){Object(s.Toast)({message:t.msg,duration:1e3}),setTimeout("window.history.go(-2)",1e3)})}},watch:{}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"margin-top":"15px","font-size":"0.8rem","-position":"fixed","-top":"50px","-bottom":"0px","-left":"0px","-right":"0px","-overflow-y":"scroll"}},[o("div",[o("div",{staticClass:"live_p"},[o("p",[t._v("生活缴费")]),t._v(" "),o("img",{attrs:{src:i("q1K3"),alt:""},on:{click:function(e){return t.openLife("add")}}})])]),t._v(" "),o("table",{attrs:{"border-spacing":"0","border-collapse":"collapse",cellspacing:"0",cellpadding:"0",id:"plice_table"}},[o("thead",t._l(t.localInfo,function(e,i){return o("tr",{key:i},[o("th",{staticClass:"center",style:{width:t.computerWidth}},[t._v(t._s(e))])])}),0),t._v(" "),t.choosedLifeCostAll.length>0&&t.payOldAll.length>0?o("tbody",t._l(t.choosedLifeCostAll,function(e,l){return o("tr",{key:l,on:{click:function(i){return i.stopPropagation(),t.openLife("edit",e)}}},[o("td",{staticStyle:{display:"flex","align-items":"center","justify-content":"center"},style:{width:t.computerWidth},on:{click:function(i){return i.stopPropagation(),t.removeLife(e)}}},[o("img",{staticStyle:{"padding-right":"8px"},attrs:{src:i("NtBC")}}),t._v("\n          "+t._s(e.dictLabel)+"\n        ")]),t._v(" "),t.payOldAll.length>0?o("td",{style:{width:t.computerWidth}},[t._v("\n          "+t._s(t.payAllobj[e.dictMode||"2"])+"\n        ")]):t._e(),t._v(" "),o("td",{staticClass:"left",staticStyle:{color:"#ff7d41"},style:{width:t.computerWidth}},[t._v(t._s(e.dictPrice))]),t._v(" "),"waterPrice"==e.dictValue&&"1"==e.dictMode||"gasPrice"==e.dictValue&&"1"==e.dictMode||"elecPrice"==e.dictValue&&"1"==e.dictMode&&0==t.elecPayModel?o("td",{staticClass:"left",style:{width:t.computerWidth},on:{click:function(t){t.stopPropagation()}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.first,expression:"item.first"}],staticClass:"input_box",attrs:{type:"number",step:"1",min:"0",placeholder:"请输入"},domProps:{value:e.first},on:{keyup:function(e){return t.priceTwoNum(l)},input:function(i){i.target.composing||t.$set(e,"first",i.target.value)}}})]):o("td",{staticClass:"left",style:{width:t.computerWidth},on:{click:function(t){t.stopPropagation()}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.first,expression:"item.first"}],staticClass:"input_box",attrs:{type:"text",placeholder:"暂无",readonly:""},domProps:{value:e.first},on:{input:function(i){i.target.composing||t.$set(e,"first",i.target.value)}}})])])}),0):t._e()]),t._v(" "),o("mt-button",{staticClass:"button_style",on:{click:t.btn_ok}},[t._v("完成办理")]),t._v(" "),o("van-dialog",{attrs:{"before-close":t.confirmDepart,title:"edit"==t.lifeType?"编辑费用":"添加费用"+t.lifeCost_mode,"show-cancel-button":""},model:{value:t.show_lifeCostBox,callback:function(e){t.show_lifeCostBox=e},expression:"show_lifeCostBox"}},[o("div",[o("van-cell",{staticStyle:{"margin-top":"10px","border-bottom":"1px solid #e4e4e4"},attrs:{title:"费用项目","is-link":"",disabled:"edit"==t.lifeType,value:t.lifeCost_label},on:{click:function(e){"add"==t.lifeType&&(t.show_lifeCostPro=!0)}}}),t._v(" "),"waterPrice"==t.lifeCost_value||"elecPrice"==t.lifeCost_value||"gasPrice"==t.lifeCost_value?o("van-cell",{staticStyle:{"border-bottom":"1px solid #e4e4e4"},attrs:{title:"收费方式","is-link":"",value:t.lifeCost_mode},on:{click:function(e){t.show_lifeCostPay=!0}}}):o("van-cell",{staticStyle:{"border-bottom":"1px solid #e4e4e4"},attrs:{title:"收费方式","is-link":"",value:"固定收取"}}),t._v(" "),o("div",{staticClass:"unit"},[o("van-field",{staticStyle:{width:"90%"},attrs:{label:"单价"},model:{value:t.lifeCost_price,callback:function(e){t.lifeCost_price=e},expression:"lifeCost_price"}}),t._v(" "),"waterPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v(t._s("固定收取"==t.lifeCost_mode?"元/月":"元/吨"))]):"elecPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v(t._s("固定收取"==t.lifeCost_mode?"元/月":"元/度"))]):"gasPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v(t._s("固定收取"==t.lifeCost_mode?"元/月":"元/m³"))]):"propPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v("元/月")]):"rubbishPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v("元/月")]):"parkPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v("元/月")]):"broadBandPrice"==t.lifeCost_value?o("div",{staticStyle:{width:"20%"}},[t._v("元/月")]):t._e()],1)],1)]),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.show_lifeCostPro,callback:function(e){t.show_lifeCostPro=e},expression:"show_lifeCostPro"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.lifeCostAll},on:{confirm:t.onConfirmCostType,cancel:function(e){t.show_lifeCostPro=!1}}})],1),t._v(" "),o("van-popup",{attrs:{position:"bottom"},model:{value:t.show_lifeCostPay,callback:function(e){t.show_lifeCostPay=e},expression:"show_lifeCostPay"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.payAll},on:{confirm:t.onConfirmCostPayType,cancel:function(e){t.show_lifeCostPay=!1}}})],1)],1)},staticRenderFns:[]};var d=i("k6Sl")(a,n,!1,function(t){i("CrqB")},"data-v-0eff4574",null);e.default=d.exports},CrqB:function(t,e){},NtBC:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB30lEQVQ4T5WTTWsTURSGnzOZ0jSaSkFFwYXowi/ciApuShcSqZCxaZhEd0XdiODCLvwPupFu3EitG+lkbFKTRVdK/QHVVauVYBVdKpQW2nzM5MhMcIxFanIXFy7nvs8959z3CDuWWtnzxGITwDBwPAyLVGnpWwyZkaLzrlMivw+aTifoS0yBWsBjmv4r6ptfwnh/8iimMQZyDyhi6n1x3e2QHWx6yR7gkLwGvuHXbku5vLkzs/CeZSWJxaeBA5iaEtdttAGZ/DRCgqJzQ0D/JY4yDR7N5GZRfsh84a7omH0RMUrUNk7JwsLGbuIIctneR9JYwfNSouP5p6CfpFh42I04gmRyD0APi2bya8BVKTkfegKks2foM18EGfh8rcZlaampln0CU67vCvJ0Vsruqo6O9jMw+FM0k6uxqoOy4jY0mz2JxvI9ANYDwEc8PyuVueWeSrhmn8UwnADwBPSzlNxHPQGCJoocCXpwLnRXc+u0VCpb3UA0ldrD3qFlPM9qGyn8SmIUnZtdGukZsC2lwp02YGQkztDBN6Df8eu3/m9l2Y/ZuhJZOYT8GaY0qlN4rXlorFGvy1/DpLxkPTEpizO1aJg669bx/AVaOoHIMOgxRBSlCizie8+lPPe+8/4vUMfHSjogKs4AAAAASUVORK5CYII="},q1K3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAACuUlEQVQ4T52UTYhVZRjHf//jGVBRFG2ZoIXkd/lRuRnve4VmF7goUEQIV6GC4FcOc8509Z7r+JULwYVii6DFUIGLNqWg55oKFolaalo44NIwRWbUvHPPE++9d9RzRzB9Ni+8z/v83udbPEdsm3udDlYifYiyeRBMAf7B7Cpm3zM83K89Z2+1m+rZCystHk99Yjcoat3fx+xP4CEwFpiJNKmhs6yPMdqlHengCOMJzEpuMnV+AL0P3AArq5x+3f67xW4lRi/SbIwL1Ie61PfzHf+uAWt5dBLTEiw7rEp1/QjESgTUCqv5e7BfR36tPbmPC19gwUbgEo86lmn/8aEmLCrsREGM2SEl6YZc6N1uFqGuUcve0+7qLzldVNyL2Aq2X+V0q6xn2TSCMT6ZN1Q+9daosLo75xCGVxiuLVXfmfOj9FHxEmIBNZsh63FbCLQPbM1zc/RCmPsI6VssK8uiYhXxjsqnmlVqE3sBrJGm2N0Frsvi4h3MBpSkS5rJXj4tx1Pm2+EEGStAF3O6yslbArPI/YQ0z8MMszNK0k7rKXxMEHyTMzADNUya57OS2SeqpF9ZVPwR0TXi2U0l6btWciEPs9k5g8DeJAyPQX01j/ktp7s79IdvF4vdadB8NVyE+UrSya+eM58q/vKebQP2gK1SOe1/2QJY5FYgHcOsItvuptOhAcyuKUnnvDQsdhdAC7H6G60JcLuRPoPsgMrVzf97AnoLO7EgJssOqlLd2IR97iZQVxV4uwFMqj70hvgaEhU+5fbg0dxsNkHdGFcJH3SqdP7+062x2b3GOPkSL8K43NgaSfrd6PHxOaK3GRqXCf/9QKVzt/27/D5b5yYw1XZAsKnl1z2M30EPkI0DzQX8osSHRsej2Hs08mFbF7YQviih1iLrAvnh923jwX7PnYDsSyWnB9q9/g98CVpsMgWjMgAAAABJRU5ErkJggg=="}});
//# sourceMappingURL=23.c0283535b60ec64275f51758781501818.js.map