{"version":3,"sources":["webpack:///src/components/State/StateCheck.vue","webpack:///./src/components/State/StateCheck.vue?bf94","webpack:///./src/components/State/StateCheck.vue"],"names":["StateCheck","data","getInfo","deposit","max_deposit","renson","contact_show","created","this","info","$route","query","$store","commit","roomSn","getDeposit","methods","clearNoNum","value","toString","replace","indexOf","parseFloat","_this","Object","api_business_hotel_and_scale","id","done","res","depositCut","depositReverseAmount","checkRoom","isUse","depositCutReason","cleanOrderId","mint_ui_common","message","msg","duration","setTimeout","online","contact","getPassword","watch","old","neww","State_StateCheck","render","_vm","_h","$createElement","_c","_self","attrs","_v","staticClass","label","type","placeholder","on","keyup","$event","model","callback","$$v","expression","_s","click","lockType","_e","position","order","phone","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/132.f1cb7f3840c7b599db1e1758781501818.js","sourcesContent":["<template>\n  <!--  房费优惠 -->\n  <div>\n    <div id=\"top\">顾客消费或赔偿</div>\n    <div id=\"center\">\n      <div class=\"price_box\">\n        <van-field\n          label=\"扣款金额\"\n          v-model=\"deposit\"\n          @keyup='clearNoNum(deposit)'\n          type='number'\n          placeholder=\"请输入扣款金额\"\n        >\n        </van-field>\n        <span class=\"span\">最多{{ max_deposit }}元</span>\n      </div>\n      <van-field\n        label=\"扣款原因\"\n        v-model=\"renson\"\n        placeholder=\"扣款原因将展示给顾客\"\n      ></van-field>\n    </div>\n    <mt-button\n      type=\"primary\"\n      class=\"buttom bth_t50\"\n      @click=\"checkRoom\"\n    >查房完成</mt-button>\n    <mt-button\n      type=\"primary\"\n      class=\"buttom\"\n      @click=\"online\"\n    >该房间未使用</mt-button>\n    <mt-button\n      type=\"primary\"\n      class=\"buttom\"\n      @click=\"contact\"\n    >联系顾客</mt-button>\n    <mt-button\n      v-if=\"info.lockType == 1\"\n      type=\"primary\"\n      class=\"buttom\"\n      @click=\"getPassword\"\n    >获取离线密码</mt-button>\n    <!-- 联系顾客 -->\n    <mt-popup\n      v-model=\"contact_show\"\n      position=\"center\"\n      class=\"contact\"\n    >\n      <div v-if=\"getInfo.order\">顾客电话：{{getInfo.order.phone}}</div>\n    </mt-popup>\n  </div>\n</template>\n<script>\nimport { Toast } from 'mint-ui';\nimport { GetBusinessOrderroomByroom, PostBusinessRoomCleanCheck, GetBusinessRoomOfflinePassword } from '@/api/api_business_hotel_and_scale';\nexport default {\n    data() {\n        return {\n            getInfo: '',\n            deposit: '',\n            max_deposit: '',\n            renson: '',\n            contact_show: false\n        };\n    },\n    created() {\n        this.info = this.$route.query;\n        this.$store.commit('setHeader', this.info.roomSn + '查房');\n        this.getDeposit();\n    },\n    methods: {\n        // 匹配\n        clearNoNum(value) {\n            value = value.toString();\n            value = value.replace(/[^\\d.]/g, ''); //清除“数字”和“.”以外的字符\n            value = value.replace(/\\.{2,}/g, '.'); //只保留第一个. 清除多余的\n            value = value\n                .replace('.', '$#$')\n                .replace(/\\./g, '')\n                .replace('$#$', '.');\n            value = value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/, '$1$2.$3'); //只能输入两个小数\n            if (value.indexOf('.') < 0 && value != '') {\n                //以上已经过滤，此处控制的是如果没有小数点，首位不能为类似于 01、02的金额\n                value = parseFloat(value);\n            }\n            this.deposit = value;\n        },\n        // 根据房间查询订单详细信息\n        getDeposit() {\n            GetBusinessOrderroomByroom(this.info.id).done((res) => {\n                this.getInfo = res.data;\n                this.max_deposit = this.getInfo.deposit - this.getInfo.depositCut + this.getInfo.depositReverseAmount;\n            });\n        },\n        // 查房完成\n        checkRoom() {\n            let data = {\n                isUse: 'true',\n                depositCut: this.deposit,\n                depositCutReason: this.renson\n            };\n            PostBusinessRoomCleanCheck(this.info.cleanOrderId, data).done((res) => {\n                Toast({\n                    message: res.msg,\n                    duration: 900\n                });\n                setTimeout('window.history.go(-1)', 900);\n            });\n        },\n        // 该房间未使用-上线\n        online() {\n            let data = {\n                isUse: 'false',\n                depositCut: this.deposit,\n                depositCutReason: this.renson\n            };\n            PostBusinessRoomCleanCheck(this.info.cleanOrderId, data).done((res) => {\n                Toast({\n                    message: res.msg,\n                    duration: 900\n                });\n                setTimeout('window.history.go(-1)', 900);\n            });\n        },\n        // 联系顾客\n        contact() {\n            this.contact_show = true;\n        },\n        // 查询房间离线密码\n        getPassword() {\n            GetBusinessRoomOfflinePassword(this.info.id).done((res) => {\n                Toast({\n                    message: res.msg,\n                    duration: 900\n                });\n                setTimeout('window.history.go(-1)', 900);\n            });\n        }\n    },\n    watch: {\n        deposit(old, neww) {\n            if (old > this.max_deposit) {\n                Toast({\n                    message: `不能超过${this.max_deposit}元`,\n                    duration: 900\n                });\n                this.deposit = '';\n            } else if (old < this.max_deposit && old != 0) {\n                if (!this.renson) {\n                    Toast({\n                        message: `请填写扣款原因`,\n                        duration: 900\n                    });\n                }\n            }\n        }\n    }\n};\n</script>\n<style scoped>\n#top {\n    font-size: 0.8rem;\n    font-weight: bold;\n    line-height: 20px;\n    color: #b4b4b4;\n    text-align: left;\n    padding: 20px;\n}\n.buttom {\n    margin-bottom: 15px;\n    background-color: #fff;\n    width: 90%;\n    color: #000;\n    font-size: 0.9rem;\n    border: 2px solid #e7e7e7;\n    height: 50px;\n    line-height: 50px;\n    border-radius: 5px;\n}\n.bth_t50 {\n    color: #fff;\n    background-color: #ff7d41;\n    margin-top: 50px;\n}\n.span {\n    color: #ff7d41;\n    font-size: 0.7rem;\n    white-space: nowrap;\n}\n.contact {\n    font-size: 1rem;\n    color: #000;\n    width: 80%;\n    border-radius: 5px;\n    height: 50px;\n    line-height: 50px;\n}\n.price_box {\n    display: flex;\n    background: #fff;\n    align-items: center;\n    padding-right: 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/State/StateCheck.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"top\"}},[_vm._v(\"顾客消费或赔偿\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"center\"}},[_c('div',{staticClass:\"price_box\"},[_c('van-field',{attrs:{\"label\":\"扣款金额\",\"type\":\"number\",\"placeholder\":\"请输入扣款金额\"},on:{\"keyup\":function($event){return _vm.clearNoNum(_vm.deposit)}},model:{value:(_vm.deposit),callback:function ($$v) {_vm.deposit=$$v},expression:\"deposit\"}}),_vm._v(\" \"),_c('span',{staticClass:\"span\"},[_vm._v(\"最多\"+_vm._s(_vm.max_deposit)+\"元\")])],1),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"扣款原因\",\"placeholder\":\"扣款原因将展示给顾客\"},model:{value:(_vm.renson),callback:function ($$v) {_vm.renson=$$v},expression:\"renson\"}})],1),_vm._v(\" \"),_c('mt-button',{staticClass:\"buttom bth_t50\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.checkRoom}},[_vm._v(\"查房完成\")]),_vm._v(\" \"),_c('mt-button',{staticClass:\"buttom\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.online}},[_vm._v(\"该房间未使用\")]),_vm._v(\" \"),_c('mt-button',{staticClass:\"buttom\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.contact}},[_vm._v(\"联系顾客\")]),_vm._v(\" \"),(_vm.info.lockType == 1)?_c('mt-button',{staticClass:\"buttom\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.getPassword}},[_vm._v(\"获取离线密码\")]):_vm._e(),_vm._v(\" \"),_c('mt-popup',{staticClass:\"contact\",attrs:{\"position\":\"center\"},model:{value:(_vm.contact_show),callback:function ($$v) {_vm.contact_show=$$v},expression:\"contact_show\"}},[(_vm.getInfo.order)?_c('div',[_vm._v(\"顾客电话：\"+_vm._s(_vm.getInfo.order.phone))]):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-20a19924\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/State/StateCheck.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.pnpm/extract-text-webpack-plugin@3.0.2_webpack@3.12.0/node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-20a19924\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=styles&index=0!./StateCheck.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=script&index=0!./StateCheck.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=script&index=0!./StateCheck.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-20a19924\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/.pnpm/vue-loader@13.7.3_babel-core@6.26.3_css-loader@0.28.11_handlebars@4.7.8_lodash@4.17.21__e9ea0e8f7ceb46fff5f26510a2d7fd94/node_modules/vue-loader/lib/selector?type=template&index=0!./StateCheck.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-20a19924\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/State/StateCheck.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}