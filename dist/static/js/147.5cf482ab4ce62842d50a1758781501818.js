webpackJsonp([147],{QVV0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("xtMQ");var n=i("NpYV"),r=i("UJbh"),o=i("Gwi0"),a=i("tN5p"),u=i("RmFe"),s=i.n(u),l={data:function(){return{btnStatus:!0,info:{},roomPrice:null,options:[],Pay_label:null,number:["1","3","6","12","24"],show_num:!1,renew_time:null,eTime:null,show_pay:!1,rentPrice:null,rentPrice_input:null,lastEndTime:null,roomRealAmount:null,queryEndTime:null,d_paymentMethod:null}},created:function(){this.$store.commit("setHeader","续租"),this.getPayment()},computed:{computerHeight:function(){return window.innerHeight+"px"},compOptions:function(){var e=this;return this.options.filter(function(t){return+t.value<=+e.renew_time})}},methods:{getPayment:function(){var e=this;Object(r.a)({dictType:"business_payment_method"}).done(function(t){e.options=t.data.map(function(e){return{label:e.dictLabel,value:e.dictValue}}),e.$route.query.cooperOrderId?e.getCooperLast(e.$route.query.cooperOrderId):e.getLast()})},getLast:function(){var e=this;Object(o.T)(this.$route.query.orderRoomId).then(function(t){t&&1==t.ret?t.data?(e.info=t.data,e.renew_time="3"==e.$route.query.orderType?e.info.paymentMethod:"1",e.rentPrice_input=t.data.price,e.eTime=s()(s()(e.info.endTime).format("YYYY-MM-DD")).add(e.renew_time,"month").format("YYYY-MM-DD"),e.d_paymentMethod=e.options.find(function(t){return t.value==e.renew_time}).label,e.Pay_label=e.options.find(function(t){return t.value==e.renew_time}).label,e.Pay_value=e.renew_time,e.one_month=t.data.price/t.data.paymentMethod):(e.renew_time="3"==e.$route.query.orderType?e.$route.query.paymentMethod:"1",e.roomRealAmount=e.$route.query.isprice,e.rentPrice_input=e.$route.query.isprice,e.queryEndTime=e.$route.query.endTime,e.eTime=s()(s()(e.queryEndTime).format("YYYY-MM-DD")).add(e.renew_time,"month").format("YYYY-MM-DD"),e.d_paymentMethod=e.options.find(function(t){return t.value==e.renew_time}).label,e.renew_time=e.renew_time,e.Pay_label=e.options.find(function(t){return t.value==e.renew_time}).label,e.Pay_value=e.renew_time,e.one_month=e.$route.query.isprice/e.$route.query.paymentMethod):e.Commom.backLogin(t)}).catch(function(e){console.log(e)})},getCooperLast:function(){var e=this;Object(a.k)({cooperOrderRoomId:this.$route.query.cooperOrderRoomId}).done(function(t){t.data?(e.info=t.data,e.renew_time="3"==e.$route.query.orderType?e.info.paymentMethod:"1",e.rentPrice_input=t.data.price,e.eTime=s()(s()(e.info.endTime).format("YYYY-MM-DD")).add(e.renew_time,"month").format("YYYY-MM-DD"),e.d_paymentMethod=e.options.find(function(t){return t.value==e.renew_time}).label,e.renew_time=e.renew_time,e.Pay_label=e.options.find(function(t){return t.value==e.renew_time}).label,e.Pay_value=e.renew_time,e.one_month=t.data.price/t.data.paymentMethod):(e.renew_time="3"==e.$route.query.orderType?e.$route.query.paymentMethod:"1",e.roomRealAmount=e.$route.query.roomRealAmount,e.rentPrice_input=e.$route.query.roomRealAmount,e.queryEndTime=e.$route.query.endTime,e.eTime=s()(s()(e.queryEndTime).format("YYYY-MM-DD")).add(e.renew_time,"month").format("YYYY-MM-DD"),e.d_paymentMethod=e.options.find(function(t){return t.value==e.renew_time}).label,e.Pay_label=e.options.find(function(t){return t.value==e.renew_time}).label,e.Pay_value=e.renew_time,e.one_month=e.$route.query.roomRealAmount/e.$route.query.paymentMethod)})},bthNum:function(){this.show_num=!0},chooseNum:function(e){this.renew_time=e,+this.Pay_value>+e&&(this.Pay_value=e,this.Pay_label=this.options.find(function(t){return t.value==e}).label),this.info&&this.info.endTime?this.eTime=s()(this.info.endTime).add(this.renew_time,"month").format("YYYY-MM-DD"):this.eTime=s()(this.queryEndTime).add(this.renew_time,"month").format("YYYY-MM-DD"),this.show_num=!1},choosePay:function(e){this.Pay_label=e.label,this.Pay_value=e.value,this.rentPrice_input=Number(this.one_month*this.Pay_value).toFixed(2),this.show_pay=!1},bthRenew:function(){var e=this;if(this.$route.query.cooperOrderId){if(!this.btnStatus)return;this.btnStatus=!1,Object(a.i)({cooperOrderId:this.$route.query.cooperOrderId,cooperOrderRoomId:this.$route.query.cooperOrderRoomId,price:this.rentPrice_input,period:this.renew_time,paymentMethod:this.Pay_value}).done(function(e){Object(n.Toast)({message:e.msg,duration:1e3}),setTimeout("window.history.go(-1)",900)}).then(function(t){e.btnStatus=!0})}else{if(""==this.rentPrice_input.length)return Object(n.Toast)({message:"请正确输入租金",duration:900}),this.rentPrice_input="",!1;var t={orderId:this.$route.query.orderId,orderRoomId:this.$route.query.orderRoomId,period:this.renew_time,paymentMethod:"3"==this.$route.query.orderType?this.Pay_value:"1",price:this.rentPrice_input};if(!this.btnStatus)return;this.btnStatus=!1,Object(o.R)(t).done(function(e){Object(n.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"f16",staticStyle:{"background-color":"#f6f6f6",position:"fixed",top:"50px",left:"0px",right:"0px","overflow-y":"scroll"},style:{height:e.computerHeight}},[e._m(0),e._v(" "),n("div",{staticClass:"all"},[n("div",{staticStyle:{width:"20%","text-align":"left"}},[e._v("房间详情")]),e._v(" "),n("div",{staticStyle:{width:"60%","text-align":"right"}},[e._v(e._s(e.$route.query.scaleName)+"-"+e._s(e.$route.query.virtualRoomScale)+"-"+e._s(e.$route.query.roomSn))])]),e._v(" "),n("div",{staticClass:"all"},[n("div",[e._v("每期租金")]),e._v(" "),n("div",{staticClass:"c_88"},[e._v("¥"+e._s(e.roomRealAmount||e.info.price)),n("span",[e._v(" "+e._s(3==e.$route.query.orderType?e.d_paymentMethod:"/天"))])])]),e._v(" "),n("div",{staticClass:"all"},[n("div",[e._v("到期日期")]),e._v(" "),n("div",{staticClass:"c_88"},[e._v(e._s(e.queryEndTime||e.info.endTime))])]),e._v(" "),n("div",{staticClass:"all t10 weight"},[e._v("调整")]),e._v(" "),n("div",{staticClass:"all",on:{click:function(t){e.show_num=!0}}},[n("div",[e._v("续签时长")]),e._v(" "),n("div",{staticClass:"pay"},[e.renew_time?n("span",[e._v(e._s(e.renew_time)+"/月")]):e._e(),e._v(" "),n("img",{attrs:{src:i("JfLI")}})])]),e._v(" "),e.$route.query.cooperOrderId?e._e():n("div",{staticClass:"all"},[n("div",[e._v("到租日期")]),e._v(" "),e.eTime?n("div",[e._v(e._s(e.eTime))]):e._e()]),e._v(" "),3==e.$route.query.orderType?n("div",{staticClass:"all",on:{click:function(t){e.show_pay=!0}}},[n("div",[e._v("付款方式")]),e._v(" "),n("div",{staticClass:"pay"},[e.Pay_label?n("span",[e._v(e._s(e.Pay_label))]):e._e(),e._v(" "),n("img",{attrs:{src:i("JfLI"),alt:""}})])]):e._e(),e._v(" "),n("div",{staticClass:"all"},[n("div",[e._v(e._s(3==e.$route.query.orderType?"每期租金":"每日租金"))]),e._v(" "),e.rentPrice_input?n("input",{directives:[{name:"model",rawName:"v-model",value:e.rentPrice_input,expression:"rentPrice_input"}],staticClass:"input_price",attrs:{type:"number",step:"1",min:"0",placeholder:"请输入租金"},domProps:{value:e.rentPrice_input},on:{input:function(t){t.target.composing||(e.rentPrice_input=t.target.value)}}}):e._e(),e._v(" "),4==e.$route.query.orderType?n("span",{staticClass:"c_88"},[e._v("/天")]):e._e()]),e._v(" "),n("div",{attrs:{id:"bg"},on:{click:e.bthRenew}},[e._v("确定续租")]),e._v(" "),n("mt-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:e.show_num,callback:function(t){e.show_num=t},expression:"show_num"}},e._l(e.number,function(t){return n("mt-cell",{key:t,attrs:{title:t},nativeOn:{click:function(i){return e.chooseNum(t)}}})}),1),e._v(" "),n("mt-popup",{staticStyle:{width:"100%"},attrs:{position:"bottom"},model:{value:e.show_pay,callback:function(t){e.show_pay=t},expression:"show_pay"}},e._l(e.compOptions,function(t,i){return n("mt-cell",{key:i,attrs:{title:t.label},nativeOn:{click:function(i){return e.choosePay(t)}}})}),1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"all t10 weight"},[t("div",[this._v("当前")])])}]};var d=i("k6Sl")(l,m,!1,function(e){i("avNQ")},"data-v-0d646feb",null);t.default=d.exports},avNQ:function(e,t){}});
//# sourceMappingURL=147.5cf482ab4ce62842d50a1758781501818.js.map