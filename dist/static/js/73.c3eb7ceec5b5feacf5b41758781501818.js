webpackJsonp([73],{B2MY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("6uKG"),s=i.n(o),n=i("nfjU"),a=i.n(n),d=i("NpYV"),l=i("Gwi0"),r=i("P5P/"),c={data:function(){return a()({memberSet:"",name:"",condition:"",discount:"",deposit:"",value:"",option1:[],checked:!0},"deposit",!1)},created:function(){this.$store.commit("setHeader","会员设置"),this.memberSet=JSON.parse(localStorage.getItem("memberSet_info")),this.memberSet&&(this.value=this.memberSet.memberLevelTemplateId,this.condition=this.memberSet.thresholdDay,this.discount=10*this.memberSet.levelDiscount,this.deposit=this.memberSet.depositUnpay,this.id=this.memberSet.id),this.getAllLevel()},methods:{getAllLevel:function(){var e=this;Object(l.C)().done(function(t){for(var i=[],o=0;o<t.data.length;o++){var s={};s.text=t.data[o].levelName,s.value=t.data[o].id,i.push(s)}e.option1=i,e.memberSet||(e.value=e.option1[0].value)})},ok:function(){if(this.condition<0)return Object(d.Toast)({message:"请输入达标入住间夜",duration:900}),!1;if(!this.discount)return Object(d.Toast)({message:"请输入折扣",duration:900}),!1;var e={hotelId:r.a.getCookie("currentID"),memberLevelTemplateId:this.value,levelDiscount:(Number(this.discount)/10).toFixed(2),thresholdDay:this.condition,depositUnpay:0==this.deposit?"0":"1"};if(this.memberSet){delete e.hotelId,delete e.memberLevelTemplateId;var t=s()(e,{id:this.id});Object(l._29)(t).done(function(e){Object(d.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}else Object(l._27)(e).done(function(e){Object(d.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(-1)",900)})},remove:function(){Object(l._30)(this.id).done(function(e){Object(d.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}},watch:{discount:function(e,t){if(e<1||e>10)return Object(d.Toast)({message:"请正确输入1-10之间的折扣",duration:900}),e="",this.discount="",!1;e.length>2&&(this.discount=e.substr(0,e.indexOf(".")+2))}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"memset"}},[o("div",{staticClass:"mem_name"},[o("div",{staticClass:"model"},[o("label",[e._v("等级模块")]),e._v(" "),o("van-dropdown-menu",[e.memberSet?o("van-dropdown-item",{attrs:{disabled:"",options:e.option1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e(),e._v(" "),e.memberSet?e._e():o("van-dropdown-item",{attrs:{options:e.option1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),e._v(" "),o("van-field",{attrs:{type:"number",label:"达标条件(间夜)",placeholder:"请输入入住间夜"},model:{value:e.condition,callback:function(t){e.condition=t},expression:"condition"}}),e._v(" "),o("van-field",{attrs:{type:"number",label:"折扣享受",placeholder:"请输入1-10之间的折扣"},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}}),e._v(" "),o("div",{staticClass:"model"},[o("label",[e._v("免押金")]),e._v(" "),o("div",{staticClass:"o_c",on:{click:function(t){e.deposit=!e.deposit}}},[0==e.deposit?o("img",{attrs:{src:i("JA1j"),alt:""}}):o("img",{attrs:{src:i("iFAN"),alt:""}}),e._v(" "),o("span",[e._v(e._s(0==e.deposit?"已关闭":"已开启"))])])])],1),e._v(" "),o("mt-button",{staticClass:"botton_f60",on:{click:e.ok}},[e._v(e._s(e.memberSet?"确定修改":"确定新增"))]),e._v(" "),e.memberSet?o("mt-button",{staticClass:"botton_f",on:{click:e.remove}},[e._v("删除会员等级")]):e._e()],1)},staticRenderFns:[]};var u=i("k6Sl")(c,m,!1,function(e){i("DNo0")},"data-v-7befa95b",null);t.default=u.exports},DNo0:function(e,t){}});
//# sourceMappingURL=73.c3eb7ceec5b5feacf5b41758781501818.js.map