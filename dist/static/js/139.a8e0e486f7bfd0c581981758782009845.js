webpackJsonp([139],{HtDI:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("fdz6"),r=o.n(n),s=o("HkQL"),i=o.n(s),c=o("s/F+"),a=o.n(c),u=o("yrbl"),d=o.n(u),l=o("NpYV"),f=o("UJbh"),p=o("RmFe"),m=o.n(p),h=o("Gwi0"),_=o("tN5p"),v={data:function(){return{status:[1,2],payment:"",order_add:{1:"哎哟有房",2:"订单同步",3:"手动分房",4:"短信接单"},a:"",value:"",pass_phone:"",currentRole:"",number:"",dictLabel:"",currentInfo:null,getLocalInfo:null,roomPayments:null,orderPayMent:{},discountInfo:"",depositStatu:"",roomStatus:[],cutRecordInfo:[],infoList:[],payments:[],signingInfo:[],patmentObj:[],priceRecordList:[],roles:[],cooperChangeRooms:[],paymentList:[],orderSourceMap:[],ordertTypeAll:[],selectedData:[],coupons:[],priceRecordListBackInfo:[],next_day:null,orderStatusAll:null,show:!1,on:!1,disabled:!1,disabled1:!1,disabled2:!1,showleave:!1,sheetVisible:!1,isLock:!1,edit_box:!1,person_box:!1,deposit:!1,password_show:!1,turnOpen:!1,Signing:!1,renting:!1,cooperRooms:!1,showCoupon:!1,showTime:!1,ROLE_MANAGER:!1,ROLE_COOPER_MANAGER:!1,memName:"",memNumber:"",menPrice:"",date:"选择有效时间段",delayValue:""}},created:function(){var e=this;return d()(a.a.mark(function t(){var o,n,r,s,i,c,u;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.commit("setHeader","二房东订单详情"),"1"==JSON.parse(localStorage.getItem("current_user")).id?(e.ROLE_MANAGER=!0,e.ROLE_COOPER_MANAGER=!0):(e.roles=JSON.parse(localStorage.getItem("roles")),e.roles.some(function(t){return"ROLE_COOPER_MANAGER"==t.name?e.ROLE_COOPER_MANAGER=!0:e.ROLE_COOPER_MANAGER=!1}),e.roles.some(function(t){return"ROLE_MANAGER"==t.name?e.ROLE_MANAGER=!0:e.ROLE_MANAGER=!1})),e.orderRoomId=e.$route.query.orderRoomId,t.next=6,e.getUnitStatu({dictType:"business_payment_method"},"roomPayments");case 6:if(!e.$route.query.orderRoomId){t.next=12;break}return t.next=9,e.getUnitStatu({dictType:"business_orderroom_status"},"roomStatus");case 9:e.getCurrentInfo(),t.next=15;break;case 12:return t.next=14,e.getUnitStatu({dictType:"business_cooper_order_status"},"roomStatus");case 14:e.getCooperCurrentInfo();case 15:o=new Date,n=o.getFullYear(),r=o.getMonth()+1,s=o.getDate(),i=o.getHours(),c=o.getMinutes(),u=o.getSeconds(),r=r<10?"0"+r:r,s=s<10?"0"+s:s,i=i<10?"0"+i:i,c=c<10?"0"+c:c,u=u<10?"0"+u:u,e.a=n+"-"+r+"-"+s+" "+i+":"+c+":"+u,e.a=m()(e.a).unix();case 29:case"end":return t.stop()}},t,e)}))()},computed:{getStatus:{get:function(){var e=this;if(this.currentInfo)return this.roomStatus.find(function(t){return t.dictValue==e.currentInfo.status}).dictLabel}}},methods:{callPhone:function(e){window.location.href="tel://"+e},getCooperCurrentInfo:function(){var e=this;Object(_.e)({cooperOrderRoomId:this.$route.query.cooperOrderRoomId}).done(function(t){e.getCooperSigning(),e.currentInfo=t.data})},getUnitStatu:function(e,t){var o=this;return d()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(f.a)(e).done(function(e){o[t]=e.data});case 2:case"end":return n.stop()}},n,o)}))()},getCooperSigning:function(){var e=this;Object(_.j)({cooperOrderId:this.$route.query.cooperOrderRoomId}).done(function(t){e.firstGo();var o=t.data.map(function(t){return e.$set(t,"setStatu",!1),t});e.signingInfo=o})},sortKey:function(e,t){return e.sort(function(e,o){var n=e[t],r=o[t];return n>r?-1:n<r?1:0})},getCurrentInfo:function(){var e=this;Object(h.J)(this.orderRoomId).done(function(t){if(localStorage.setItem("moreInfo",i()(t.data)),e.currentInfo=t.data,3!=e.currentInfo.orderType&&e.getOrderType("status","business_payment"),e.firstGo(),e.currentInfo.userId,e.next_day=m()(m()(e.currentInfo.order.startTime).add(1,"day").format("YYYY-MM-DD")+" 08:00:00").unix(),4==e.currentInfo.status||7==e.currentInfo.status||1==e.currentInfo.orderType||2==e.currentInfo.orderType){m()().unix();if(e.currentInfo.leaveTime&&e.currentInfo.order.startTime){0==m()(e.currentInfo.leaveTime.substr(0,10)).diff(m()(e.currentInfo.order.startTime.substr(0,10)),"day")?m()(m()(e.currentInfo.leaveTime).add(2,"day").format("YYYY-MM-DD")+" 08:00:00").unix():m()(m()(e.currentInfo.leaveTime).add(1,"day").format("YYYY-MM-DD")+" 08:00:00").unix()}}if(e.currentInfo.priceRecord){var o=JSON.parse(e.currentInfo.priceRecord),n=[];for(var r in o){var s={};s.time=r,s.price=Number(o[r]),n.push(s)}e.sortKey(n,"time"),e.priceRecordList=n}if(e.currentInfo.dayIn&&e.currentInfo.priceRecord){var c=JSON.parse(e.currentInfo.priceRecord);n=[];for(var a in c){var u={};u.time=a,u.price=Number(c[a]),n.push(u)}e.sortKey(n,"time"),e.priceRecordListBackInfo=n,e.priceRecordListBackInfo.reverse().splice(0,e.currentInfo.dayIn)}e.currentInfo.order.payment,e.currentInfo.depositCut>0&&e.getDepositCutReason(),e.roomRealAmount=e.currentInfo.roomRealAmount?e.currentInfo.roomRealAmount:0,e.couponAmount=e.currentInfo.couponAmount?e.currentInfo.couponAmount:0,e.currentInfo.order.roomScaleDiscountId?e.getroomScaleDiscount(e.currentInfo.order.roomScaleDiscountId):(e.discountInfo=0,e.currentInfo.order.memberDiscount?e.memberDiscount=e.roomRealAmount-e.discountInfo-Math.floor((e.roomRealAmount-e.discountInfo)*e.currentInfo.order.memberDiscount*100)/100:e.memberDiscount=e.roomRealAmount-e.discountInfo-Math.floor(1*(e.roomRealAmount-e.discountInfo)*100)/100),0==e.currentInfo.hotel.faceApi?e.isLock=!1:1==e.currentInfo.isNoCard?e.isLock=!1:e.isLock=!0,e.currentInfo.cooperOrder.phone?(e.number=e.currentInfo.cooperOrder.phone,e.number&&e.Local(e.number)):e.currentInfo.sysUser&&(e.number=e.currentInfo.sysUser.phone?e.currentInfo.sysUser.phone:"",e.number&&e.Local(e.number)),1==e.currentInfo.isAutoDetain?e.value=!0:e.value=!1,"14:00:00"==e.currentInfo.order.endTime.substr(11,8)?e.delayValue=!0:e.delayValue=!1,e.liverInfo()})},getDepositCutReason:function(){var e=this;Object(h.l)(this.currentInfo.id).done(function(t){e.cutRecordInfo=t.data})},getroomScaleDiscount:function(e){var t=this;Object(h._11)(e).done(function(e){var o=t.roomRealAmount*e.data.discount/10;t.discountInfo=t.roomRealAmount-o,t.memberDiscount=t.roomRealAmount-t.discountInfo-Math.ceil((t.roomRealAmount-t.discountInfo)*t.currentInfo.order.memberDiscount*100)/100})},priceshow:function(){this.turnOpen=!this.turnOpen},Local:function(e){var t=this;3!=this.currentInfo.orderType&&this.$jsonp("https://tool.bitefu.net/shouji/?mobile="+e).then(function(e){t.getLocalInfo=e}).catch(function(e){console.log(e)})},firstGo:function(){var e=this;3==this.currentInfo.orderType?Object(f.a)({dictType:"business_payment_method"}).done(function(t){e.options=t.data.map(function(e){return{label:e.dictLabel,value:e.dictValue}});for(var o={},n=0;n<e.options.length;n++)o[e.options[n].value]=e.options[n].label;e.payments=o}):Object(f.a)({dictType:"business_order_source"}).done(function(t){var o={};t.data.forEach(function(e){o[e.dictSort]=e.dictLabel}),e.orderSourceMap=o})},liverInfo:function(){var e=this;Object(h.P)(this.currentInfo.id).done(function(t){e.infoList=t.data,3!=e.currentInfo.orderType&&4!=e.currentInfo.orderType||e.getSigning()})},toggle:function(e){1==e&&(this.person_box=!0)},person_ok:function(){var e=this;this.person_box=!1,Object(h._58)(this.currentInfo.id,{orderId:this.currentInfo.orderId}).done(function(t){e.isLock=!1})},person_cancel:function(){this.person_box=!1},openedDelay:function(){var e=this,t=m()(this.currentInfo.order.endTime).unix(),o=m()(m()().format("YYYY-MM-DD HH:mm:ss")).unix();o<t?1==this.value?l.MessageBox.confirm("",{message:"确认关闭延时退房？",title:"延时退房",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(t){"confirm"==t&&Object(h._48)(e.currentInfo.id,{orderId:e.currentInfo.orderId}).done(function(t){e.value=!1})}).catch(function(e){console.log(e)}):l.MessageBox.confirm("",{message:"确认开启延时退房？",title:"延时退房",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(t){"confirm"==t&&Object(h._49)(e.currentInfo.id,{orderId:e.currentInfo.orderId}).done(function(t){e.value=!0})}).catch(function(e){console.log(e)}):o>t&&l.MessageBox.confirm("",{message:"已开始计费，无法关闭延时退房，可以直接退房",title:"提示",cancelButtonText:"取消",confirmButtonText:"确定"})},openedDelayValue:function(){var e=this;l.MessageBox.confirm("",{message:"开启后无法关闭",title:"确认开启免费延时退房？",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(t){"confirm"==t&&Object(h._52)(e.currentInfo.id,{orderId:e.currentInfo.orderId}).done(function(t){e.delayValue=!0})}).catch(function(e){console.log(e)})},dele:function(e){if(1==this.infoList.length)return Object(l.Toast)({message:"至少需要一个入住人",duration:900}),!1;this.id=e,this.edit_box=!0},lookIdCard:function(e){this.$router.push({path:"/addPerson",query:{realName:e.realName,idenIds:e.idenIds}})},edit_ok:function(){var e=this;Object(h._70)(this.id).done(function(t){Object(l.Toast)({message:t.msg,duration:1e3}),e.liverInfo()}),this.edit_box=!1},edit_cancel:function(){this.edit_box=!1},addLiver:function(){this.$router.push({path:"/addPerson",query:{orderRoomUserId:this.currentInfo.id}})},btnLive:function(){this.$router.push({name:"DealLive",query:{orderDetail:this.currentInfo}}),localStorage.setItem("orderDetail",i()(this.currentInfo))},btnchange:function(){this.$router.push({path:"/fdchange",query:{orderDetail:this.currentInfo}}),localStorage.setItem("orderDetail",i()(this.currentInfo))},btnamend:function(){this.$router.push({name:"Amend",query:{item_amend:this.currentInfo}}),localStorage.setItem("item_amend",i()(this.currentInfo))},btncancel:function(){var e=this;this.sheetVisible=!1,l.MessageBox.confirm("",{message:"取消订单后，房费和押金将退还顾客，请慎重操作",title:"取消订单",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(t){"confirm"==t&&Object(h._50)(e.currentInfo.id,{orderId:e.currentInfo.orderId}).done(function(e){setTimeout("window.history.go(-1)",500)})}).catch(function(e){console.log(e)})},formatDate:function(e){var t=e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate());return this.doble.push(t),this.startTime=this.doble[0],this.endTime=this.doble[1],t},onConfirm:function(e){var t=r()(e,2),o=t[0],n=t[1];this.showTime=!1,this.showCoupon=!0,this.doble=[],this.date=this.formatDate(o)+" 至 "+this.formatDate(n)},chooseChange:function(e){this.selectedData.indexOf(e)>-1?this.removeByValue(this.selectedData,e):this.selectedData.push(e),this.selectedData.length<this.ordertTypeAll.total?this.AllChecked=!0:this.AllChecked=!1,this.orderType=this.selectedData.toString()},removeByValue:function(e,t){for(var o=0;o<e.length;o++)if(e[o]==t){e.splice(o,1);break}},getOrderType:function(e,t){var o=this;Object(f.a)({dictType:t}).done(function(t){"type"==e?o.ordertTypeAll=t.data:"status"==e&&(o.orderStatusAll={},t.data.forEach(function(e){o.orderStatusAll[e.dictValue]=e.dictLabel}))})},sendCoupon:function(){if(!this.memName)return Object(l.Toast)({message:"请输入面额",duration:900}),!1;if(!this.memNumber)return Object(l.Toast)({message:"请输入数量",duration:900}),!1;if(!this.menPrice)return Object(l.Toast)({message:"请输入满减金额",duration:900}),!1;if(!this.startTime)return Object(l.Toast)({message:"请选择有效时间段",duration:900}),!1;if(!this.orderType)return Object(l.Toast)({message:"请选择领取范围",duration:900}),!1;var e={couponSource:"2",userId:this.currentInfo.userId,hotelId:this.currentInfo.hotelId,couponAmount:this.memName,fullAmount:this.menPrice,couponNum:this.memNumber,startTime:this.startTime,endTime:this.endTime,orderType:this.orderType};Object(h._84)(e).done(function(e){Object(l.Toast)({message:e.msg,duration:900})}),this.showCoupon=!1},btnAgain:function(){this.sheetVisible=!1,Object(h._59)(this.currentInfo.id,{orderId:this.currentInfo.orderId}).done(function(e){l.MessageBox.alert("下发密码成功").then(function(e){setTimeout("window.history.go(-1)",500)})})},btnLeaveroom:function(){var e=this;this.sheetVisible=!1,3==this.currentInfo.orderType||4==this.currentInfo.orderType?(this.$router.push({path:"/rentCount",query:{cooperOrderRoomId:this.currentInfo.id}}),localStorage.setItem("rentCount_info",i()(this.currentInfo))):l.MessageBox.confirm("",{message:"退房后，将不可恢复，请慎重操作",title:"是否退房",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(t){if("confirm"==t){var o={orderId:e.currentInfo.orderId,orderRoomId:e.currentInfo.id};Object(h._55)(o).done(function(e){l.MessageBox.alert("退房成功").then(function(e){setTimeout("window.history.go(-1)",500)})})}}).catch(function(e){console.log(e)})},CooperRooms:function(e){this.$router.push({path:"/business-rooms",query:{cooperOrderId:e.id}})},gorenew:function(){this.$router.push({path:"/renew",query:{roomSn:this.currentInfo.roomSn,scaleName:this.currentInfo.roomScale.scaleName,cooperOrderId:this.currentInfo.cooperOrderId,cooperOrderRoomId:this.$route.query.cooperOrderRoomId,endTime:this.currentInfo.cooperOrder.endTime,roomRealAmount:this.currentInfo.roomRealAmount,orderType:this.currentInfo.orderType}})},btnback:function(e){var t={item:this.currentInfo,num:e};this.$router.push({name:"DealLive",query:t}),localStorage.setItem("orderDetail",i()(t))},btndeposit:function(){this.$router.push({name:"DealLive",query:this.currentInfo}),localStorage.setItem("orderDetail",i()(this.currentInfo))},isblock:function(){this.sheetVisible=!1},btnInfo:function(){this.sheetVisible=!1,this.password_show=!0,this.currentInfo.order&&(this.pass_phone=this.currentInfo.order.phone?this.currentInfo.order.phone:this.currentInfo.sysUser.phone)},pass_can:function(){this.password_show=!1},pass_ok:function(){if(!this.pass_phone||!/^1[3-9]\d{9}$/.test(this.pass_phone))return Object(l.Toast)({message:"请正确输入手机号",duration:900}),this.pass_phone="",!1;var e={roomUser:null==this.currentInfo.sysUser?this.currentInfo.order.roomUser:this.currentInfo.sysUser.realName,phone:this.pass_phone,orderId:this.currentInfo.orderId};Object(h._65)(this.currentInfo.id,e).done(function(e){Object(l.Toast)({message:e.msg,duration:900})}),this.password_show=!1},changeWatch:function(){this.$router.push({path:"/changeWatch",query:{id:this.currentInfo.id,orderId:this.currentInfo.orderId}})},eleCharge:function(){this.$router.push({path:"/eleManage",query:{hotelName:this.currentInfo.hotel.hotelName,scaleName:this.currentInfo.roomScale.scaleName,virscaleName:this.currentInfo.virtualRoomScale.scaleName,roomSn:this.currentInfo.roomSn,orderRoomId:this.currentInfo.id,orderId:this.currentInfo.orderId}})},btnRoomFee:function(){this.$router.push({path:"/roomFee",query:{id:this.currentInfo.id,orderId:this.currentInfo.orderId}})},btnLifeFee:function(){this.$router.push({path:"/lifeFee",query:{id:this.currentInfo.id}})},btnBackRent:function(){this.$router.push("/backRent")},isSigning:function(){this.Signing=!this.Signing},isRent:function(e){e.setStatu=!e.setStatu},getSigning:function(){var e=this;Object(h.S)(this.currentInfo.id).done(function(t){var o=t.data.map(function(t){return e.$set(t,"setStatu",!1),t});e.signingInfo=o})},btnchange_cooper:function(){var e=this;Object(_.u)({hotelId:this.currentInfo.hotelId}).done(function(t){e.cooperChangeRooms=t.data,e.cooperRooms=!0})},choosedRoomcancle:function(){this.cooperRooms=!1},choosedRoom:function(e){var t={orderId:this.currentInfo.orderId,toScaleId:this.currentInfo.roomScaleId,toVirtualRoomScaleId:"0",toRoomId:e.id};Object(h._62)(this.currentInfo.id,t).done(function(e){Object(l.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(0)",900)})},goRoute:function(e){this.$router.push({path:e,query:{orderRoomId:this.$route.query.orderRoomId,invoiceAmount:this.currentInfo.invoiceAmount}})}}},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentInfo?n("div",{staticStyle:{"background-color":"#f6f6f6","font-size":"0.8rem",position:"fixed",top:"50px",bottom:"50px",left:"0px",right:"0px","overflow-y":"scroll"}},[n("div",{staticStyle:{"background-color":"#f6f6f6",height:"10px"}}),e._v(" "),n("div",{staticStyle:{"background-color":"#fff",padding:"0 10px 0"}},[e.currentInfo.roomScale?n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88 w30"},[e._v("房型")]),e._v(" "),n("span",{staticClass:"w70"},[e._v(e._s(e.currentInfo.roomScale?e.currentInfo.roomScale.scaleName:""))])]):e._e(),e._v(" "),n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("房间号")]),e._v(" "),n("span",[e._v(e._s(e.currentInfo.roomSn))])]),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"order_box",staticStyle:{border:"none"}},[n("span",{staticClass:"c_88"},[e._v("单位名称")]),e._v(" "),n("span",[e._v(e._s(e.$route.query.cooperationName))])])]),e._v(" "),e.number?n("div",{staticStyle:{"background-color":"#fff",padding:"10px 10px 0"}},[n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("联系电话")]),e._v(" "),7!=e.currentInfo.status?n("span",{on:{click:function(t){return e.callPhone(e.number)}}},[e._v(e._s(e.number))]):e._e(),e._v(" "),7==e.currentInfo.status?n("span",[e._v(e._s(e.number.replace(/(\d{5})\d{6}(\d{0})/,"$1$2******")))]):e._e()]),e._v(" "),null!=e.getLocalInfo&&3!=e.currentInfo.orderType?n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("手机归属")]),e._v(" "),n("span",[e._v(e._s(e.getLocalInfo.province)+"."+e._s(e.getLocalInfo.city))])]):e._e()]):e._e(),e._v(" "),3!=e.currentInfo.orderType?n("div",{staticStyle:{"background-color":"#f6f6f6",height:"10px"}}):e._e(),e._v(" "),3!=e.currentInfo.orderType?n("div",{staticStyle:{"background-color":"#fff",padding:"10px 10px 0"}},[e.orderStatusAll&&e.currentInfo.cooperOrderId.payment?n("div",{staticClass:"order_box"},[n("p",{staticClass:"c_88"},[e._v("支付方式")]),e._v(" "),n("p",[e._v(e._s(e.orderStatusAll[e.currentInfo.cooperOrderId.payment]))])]):e._e(),e._v(" "),n("div",{staticClass:"order_box"},[n("p",{staticClass:"c_88"},[e._v("\n        实付房费\n      ")]),e._v(" "),n("p",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticStyle:{"font-size":"20px",color:"#FF7D41","line-height":"1",padding:"8px 0"},on:{click:e.priceshow}},[n("span",[e._v("¥"+e._s(0==e.currentInfo.isCon?(e.currentInfo.roomPrice-e.currentInfo.deposit).toFixed(2):e.currentInfo.roomPrice.toFixed(2)))]),e._v(" "),n("br"),e._v(" "),e.currentInfo.roomRefuseAmount?n("span",{staticStyle:{color:"#888","font-size":"10px"}},[e._v(e._s(1==e.currentInfo.status||2==e.currentInfo.status?"将":"已")+"退房费 ¥"+e._s(e.currentInfo.roomRefuseAmount.toFixed(2)))]):e._e()]),e._v(" "),0==e.turnOpen?n("img",{staticStyle:{width:"26px",height:"26px"},attrs:{src:o("JfLI"),alt:""}}):n("img",{staticStyle:{width:"26px",height:"26px"},attrs:{src:o("M2uH"),alt:""}})])]),e._v(" "),1==e.turnOpen?n("div",{staticStyle:{padding:"4px 10px"}},[e.priceRecordList.length>0?n("div",{staticClass:"order_box"},[n("p",{staticClass:"c_88"},[e._v("房费"+e._s(e.priceRecordList.length)+"晚")]),e._v(" "),n("p",[e._v(" "+e._s(e.currentInfo.roomRealAmount.toFixed(2)))])]):e._e(),e._v(" "),e.priceRecordList.length>0?n("div",e._l(e.priceRecordList,function(t,o){return n("div",{key:o,staticClass:"order_box"},[n("p",{staticClass:"c_88"},[e._v(e._s(t.time))]),e._v(" "),n("p",{staticClass:"c_88"},[e._v(e._s(t.price.toFixed(2)))])])}),0):e._e(),e._v(" "),n("div",{staticClass:"order_box"},[n("p",{staticClass:"c_88"},[e._v("代金券")]),e._v(" "),0==e.currentInfo.couponAmount?n("p",[e._v(" "+e._s(e.currentInfo.couponAmount))]):n("p",[e._v("- "+e._s(e.currentInfo.couponAmount.toFixed(2)))])]),e._v(" "),e.currentInfo.order.roomScaleDiscountId?n("div",{staticClass:"order_box"},[n("p",{staticClass:"c_88"},[e._v("连住折扣")]),e._v(" "),n("p",[e._v("- "+e._s(e.discountInfo.toFixed(2)))])]):e._e(),e._v(" "),n("div",{staticClass:"order_box"},[e.currentInfo.order.memberDiscount?n("p",{staticClass:"c_88"},[e._v("会员优惠("+e._s(10*e.currentInfo.order.memberDiscount)+"折)")]):n("p",{staticClass:"c_88"},[e._v("会员优惠")]),e._v(" "),e.currentInfo.order.memberDiscount?n("p",[e._v("- "+e._s(e.memberDiscount.toFixed(2)))]):n("p",[e._v(" 0")])])]):e._e()]):e._e(),e._v(" "),1==e.currentInfo.status&&1==e.currentInfo.orderType||2==e.currentInfo.status&&1==e.currentInfo.orderType?n("div",{staticClass:"order_box",staticStyle:{padding:"6px 10px",display:"flex","align-items":"baseline",background:"#fff",color:"#888","margin-top":"10px"}},[e._m(1),e._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center",width:"30%","text-align":"right","justify-content":"flex-end"}},[e._v("\n      "+e._s(1==e.delayValue?"已":"未")+"开启\n      "),1==e.delayValue?n("img",{staticStyle:{display:"inline-block",width:"40px",height:"40px",margin:"auto 0","margin-left":"10px"},attrs:{src:o("iFAN"),alt:""}}):n("img",{staticStyle:{display:"inline-block",width:"40px",height:"40px",margin:"auto 0","margin-left":"10px"},attrs:{src:o("JA1j"),alt:""},on:{click:e.openedDelayValue}})])]):e._e(),e._v(" "),3==e.currentInfo.orderType?n("div",{staticStyle:{"background-color":"#fff",padding:"10px 10px 0","margin-top":"10px"}},[n("div",{staticClass:"order_box"},[n("p",{staticStyle:{"line-height":"20px","font-size":"0.7rem","text-align":"left"}},[n("span",[e._v("租房合同")]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"c_88 f12"},[e._v("签约日期："+e._s(e._f("dataFilter")(e.currentInfo.cooperOrder.orderTime||"","MM-DD")))])]),e._v(" "),0==e.Signing?n("img",{staticClass:"order_box_img",attrs:{src:o("JfLI"),alt:""},on:{click:e.isSigning}}):n("img",{staticClass:"order_box_img",attrs:{src:o("M2uH"),alt:""},on:{click:e.isSigning}})]),e._v(" "),1==e.Signing?n("div",[n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("起租日期")]),e._v(" "),n("span",[e._v(e._s(e._f("dataFilter")(e.currentInfo.cooperOrder.startTime||"")))])]),e._v(" "),n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("到租日期")]),e._v(" "),n("span",[e._v(e._s(e._f("dataFilter")(e.currentInfo.cooperOrder.endTime||"")))])]),e._v(" "),n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("收租周期")]),e._v(" "),n("span",[e._v(e._s(e.payments[e.currentInfo.cooperOrder.paymentMethod]))])]),e._v(" "),n("div",{staticClass:"order_box",staticStyle:{border:"none"}},[n("span",{staticClass:"c_88"},[e._v("押金")]),e._v(" "),n("span",[e._v("¥"+e._s(e.currentInfo.deposit))])])]):e._e()]):e._e(),e._v(" "),e._l(e.signingInfo,function(t,r){return n("div",{key:r,staticStyle:{"background-color":"#fff",padding:"10px 10px 0"}},[n("div",[n("div",{staticClass:"order_box"},[n("p",{staticStyle:{"line-height":"20px","font-size":"0.7rem","text-align":"left"}},[n("span",[e._v("租赁合同 (第"+e._s(r+1)+"次续签)")]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"c_88 f12"},[e._v("签约日期："+e._s(t.createTime?t.createTime.substr(0,10):""))])]),e._v(" "),0==t.setStatu?n("img",{staticClass:"order_box_img",attrs:{src:o("JfLI"),alt:""},on:{click:function(o){return e.isRent(t)}}}):n("img",{staticClass:"order_box_img",attrs:{src:o("M2uH"),alt:""},on:{click:function(o){return e.isRent(t)}}})]),e._v(" "),1==t.setStatu?n("div",[n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("起租日期")]),e._v(" "),n("span",[e._v(e._s(t.startTime?t.startTime.substr(0,10):""))])]),e._v(" "),n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("到租日期")]),e._v(" "),n("span",[e._v(e._s(t.endTime?t.endTime:""))])]),e._v(" "),4!=e.currentInfo.orderType?n("div",{staticClass:"order_box"},[n("span",{staticClass:"c_88"},[e._v("收租周期")]),e._v(" "),n("span",[e._v(e._s(e.payments[t.paymentMethod]))])]):e._e(),e._v(" "),n("div",{staticClass:"order_box",staticStyle:{border:"none"}},[n("span",{staticClass:"c_88"},[e._v("每"+e._s(3==e.currentInfo.orderType?"期":"天")+"交租")]),e._v(" "),n("span",[e._v("¥"+e._s(3==e.currentInfo.orderType?t.price*t.paymentMethod:t.price))])])]):e._e()])])}),e._v(" "),n("mt-button",{staticClass:"order",on:{click:function(t){e.sheetVisible=!0}}},[e._v("更多操作")]),e._v(" "),n("mt-popup",{staticClass:"popup",attrs:{position:"bottom"},model:{value:e.sheetVisible,callback:function(t){e.sheetVisible=t},expression:"sheetVisible"}},[n("div",[1==e.currentInfo.status&&e.currentInfo.roomSn&&1!=e.currentInfo.conRoom||1==e.currentInfo.status&&!e.currentInfo.roomSn&&e.a>e.next_day&&1!=e.currentInfo.conRoom||1==e.currentInfo.status&&e.currentInfo.roomSn&&1!=e.currentInfo.conRoom||2==e.currentInfo.status&&0==e.currentInfo.isCon&&1!==e.currentInfo.conRoom&&1!=e.currentInfo.conRoom||2==e.currentInfo.status&&0==e.currentInfo.isCon&&1!==e.currentInfo.conRoom&&1!=e.currentInfo.conRoom?n("mt-button",{staticClass:"button_box",attrs:{disabled:e.disabled2,type:"primary"},on:{click:function(t){return e.btnLeaveroom(e.currentInfo)}}},[e._v(e._s(1==e.currentInfo.orderType||2==e.currentInfo.orderType?"提前退房":"退租"))]):e._e(),e._v(" "),3==e.currentInfo.orderType||4==e.currentInfo.orderType?n("mt-button",{staticClass:"button_box",attrs:{disabled:e.disabled2,type:"primary"},on:{click:e.gorenew}},[e._v("续租")]):e._e(),e._v(" "),n("mt-button",{staticStyle:{width:"100%",height:"40px","margin-top":"8px","font-size":"16px","font-weight":"normal","background-color":"#fff",color:"#FB9E58"},on:{click:e.isblock}},[e._v("取消")])],1)]),e._v(" "),n("mt-popup",{staticClass:"pass_box",attrs:{position:"center"},model:{value:e.password_show,callback:function(t){e.password_show=t},expression:"password_show"}},[n("p",{staticClass:"p_pass"},[e._v("请确认下发密码至该手机？")]),e._v(" "),n("div",{staticClass:"pass_show"},[n("div",[e._v("电话：")]),e._v(" \n      "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.pass_phone,expression:"pass_phone"}],attrs:{type:"tel",maxlength:"11"},domProps:{value:e.pass_phone},on:{input:function(t){t.target.composing||(e.pass_phone=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"order_box bottom_pass"},[n("div",{staticClass:"pass_can",on:{click:e.pass_can}},[e._v("取消")]),e._v(" "),n("div",{staticClass:"pass_ok",on:{click:e.pass_ok}},[e._v("确定")])])]),e._v(" "),n("mt-popup",{staticClass:"cooper-change-rooms",attrs:{position:"bottom"},model:{value:e.cooperRooms,callback:function(t){e.cooperRooms=t},expression:"cooperRooms"}},[n("div",{},[n("p",{staticClass:"lineheight borderbottom"},[e._v("请选择新房间号")]),e._v(" "),n("div",{staticClass:"roomsScroll"},e._l(e.cooperChangeRooms,function(t){return n("div",{key:t.id,staticClass:"lineheight",on:{click:function(o){return e.choosedRoom(t)}}},[e._v(e._s(t.roomSn))])}),0),e._v(" "),n("p",{staticClass:"h10"}),e._v(" "),n("p",{staticClass:"lineheight",on:{click:function(t){return e.choosedRoomcancle(e.item)}}},[e._v("取消")])])]),e._v(" "),n("van-popup",{staticClass:"couponBox",model:{value:e.showCoupon,callback:function(t){e.showCoupon=t},expression:"showCoupon"}},[n("div",[n("h2",[e._v("发送优惠券")]),e._v(" "),n("div",[n("van-field",{attrs:{label:"发送面额",type:"number",placeholder:"请输入面额"},model:{value:e.memName,callback:function(t){e.memName=t},expression:"memName"}}),e._v(" "),n("van-field",{attrs:{label:"发送数量",type:"number",placeholder:"请输入数量"},model:{value:e.memNumber,callback:function(t){e.memNumber=t},expression:"memNumber"}}),e._v(" "),n("van-field",{attrs:{label:"使用门槛",type:"number",placeholder:"满多少金额可使用"},model:{value:e.menPrice,callback:function(t){e.menPrice=t},expression:"menPrice"}}),e._v(" "),n("van-cell",{attrs:{title:"有效期",placeholder:"选择有效时间段",value:e.date},on:{click:function(t){e.showTime=!0,e.showCoupon=!1}}}),e._v(" "),n("div",{attrs:{id:"range"}},[n("div",{staticClass:"receive"},[n("label",[e._v("使用范围")]),e._v(" "),e.ordertTypeAll.length?n("ul",e._l(e.ordertTypeAll,function(t,o){return n("li",{key:o},[n("van-checkbox",{attrs:{value:t.dictLabel,"checked-color":"#ff7d41"},on:{click:function(o){return e.chooseChange(t.dictValue)}},model:{value:t.isChecked,callback:function(o){e.$set(t,"isChecked",o)},expression:"item.isChecked"}},[e._v(e._s(t.dictLabel))])],1)}),0):e._e()])])],1),e._v(" "),n("mt-button",{staticClass:"button",nativeOn:{click:function(t){return e.sendCoupon.apply(null,arguments)}}},[e._v("确定")])],1)]),e._v(" "),n("van-calendar",{attrs:{type:"range"},on:{confirm:e.onConfirm},model:{value:e.showTime,callback:function(t){e.showTime=t},expression:"showTime"}})],2):e._e()},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"order_box",staticStyle:{border:"none"}},[t("span",{staticClass:"c_88"},[this._v("订单类型")]),this._v(" "),t("span",[this._v("二房东")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{width:"70%","text-align":"left"}},[t("div",[this._v("免费延时至14:00")])])}]};var b=o("k6Sl")(v,I,!1,function(e){o("JCh5")},"data-v-15413a81",null);t.default=b.exports},JCh5:function(e,t){}});
//# sourceMappingURL=139.a8e0e486f7bfd0c581981758782009845.js.map