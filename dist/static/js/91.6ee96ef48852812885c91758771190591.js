webpackJsonp([91],{IYxs:function(t,e){},zb5F:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("UJbh"),i=n("Gwi0"),o=n("NpYV"),r=n("RmFe"),l=n.n(r),s={data:function(){return{showTime:!1,showPayment:!1,paymentList:[],paymentName:null,handTime:null,minDate:new Date,maxDate:new Date,dataForm:{hotelId:this.$route.query.hotelId,accountType:this.$route.query.type,handAmount:null,handTime:null,payment:null}}},created:function(){this.minDate=new Date(l()().subtract(1,"year")),this.maxDate=new Date(l()().add(1,"year")),this.$store.commit("setHeader",""+this.$route.query.type=="1"?"交账":"充值"),this.getPayment()},filters:{},methods:{oninput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,2})/g)[0]||null},onConfirm:function(t){this.showTime=!1,this.formatDate(t,{type:"1"})},formatDate:function(t,e){return e.type,this.handTime=l()(t).format("YYYY年MM月DD日"),this.dataForm.handTime=l()(t).format("YYYY-MM-DD"),l()(t).format("YYYY年MM月DD日")},onSelect:function(t){this.showPayment=!1,this.paymentName=t.name},getPayment:function(){var t=this;Object(a.a)({dictType:"business_payment_offline"}).done(function(e){t.formatDate(new Date,{type:"0"}),t.paymentsAll=e.data,e.data.map(function(e){var n={};n.name=e.dictLabel,t.paymentList.push(n)}),t.paymentName=t.paymentList[0].name})},handCharge:function(){var t=this;this.dataForm.payment=this.paymentsAll.find(function(e){return e.dictLabel==t.paymentName}).dictValue,this.dataForm.handAmount?Object(i._25)(this.dataForm).done(function(t){Object(o.Toast)({message:t.msg,duration:900}),setTimeout("window.history.go(-1)",900)}):Object(o.Toast)({message:"请输入"+("1"==this.$route.query.type?"交账":"充值")+"金额",duration:900})},goRecord:function(){this.$router.push({path:"/handChargeRecord",query:{type:this.$route.query.type,hotelId:this.$route.query.hotelId}})}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"finance"}},[1==t.$route.query.type?n("div",{staticClass:"hand"},[n("van-field",{attrs:{value:t.handTime,label:"交账日期","input-align":"right",readonly:"","right-icon":"arrow"},on:{click:function(e){t.showTime=!0}}}),t._v(" "),n("van-field",{attrs:{value:t.paymentName,label:"交账方式","input-align":"right",readonly:"","right-icon":"arrow"},on:{click:function(e){t.showPayment=!0}}}),t._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"space-between","font-size":"16px",color:"#000","align-items":"center",background:"#fff"}},[n("van-cell-group",{staticStyle:{width:"100%"}},[n("van-field",{attrs:{type:"number",label:"交账金额",placeholder:"请输入交账金额","input-align":"right"},nativeOn:{keyup:function(e){return t.oninput.apply(null,arguments)}},model:{value:t.dataForm.handAmount,callback:function(e){t.$set(t.dataForm,"handAmount",e)},expression:"dataForm.handAmount"}})],1)],1)],1):n("div",[n("van-field",{attrs:{value:t.handTime,label:"充值日期","input-align":"right",readonly:"","right-icon":"arrow"},on:{click:function(e){t.showTime=!0}}}),t._v(" "),n("van-field",{attrs:{value:t.paymentName,label:"充值方式","input-align":"right",readonly:"","right-icon":"arrow"},on:{click:function(e){t.showPayment=!0}}}),t._v(" "),n("van-cell-group",[n("van-field",{attrs:{type:"number",label:"充值金额",placeholder:"请输入充值金额","input-align":"right"},nativeOn:{keyup:function(e){return t.oninput.apply(null,arguments)}},model:{value:t.dataForm.handAmount,callback:function(e){t.$set(t.dataForm,"handAmount",e)},expression:"dataForm.handAmount"}})],1)],1),t._v(" "),n("van-calendar",{attrs:{"min-date":t.minDate,"max-date":t.maxDate},on:{close:function(e){t.showTime=!1},confirm:t.onConfirm},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}}),t._v(" "),n("van-action-sheet",{attrs:{actions:t.paymentList},on:{close:function(e){t.showPayment=!1},select:t.onSelect},model:{value:t.showPayment,callback:function(e){t.showPayment=e},expression:"showPayment"}}),t._v(" "),n("van-button",{staticClass:"HandCharge",on:{click:t.handCharge}},[t._v("确定"+t._s(1==t.$route.query.type?"交账":"充值"))]),t._v(" "),n("van-button",{staticClass:"HandChargeRecord",on:{click:t.goRecord}},[t._v(t._s(1==t.$route.query.type?"交账":"充值")+"记录")])],1)},staticRenderFns:[]};var m=n("k6Sl")(s,u,!1,function(t){n("IYxs")},"data-v-5d6600d4",null);e.default=m.exports}});
//# sourceMappingURL=91.6ee96ef48852812885c91758771190591.js.map