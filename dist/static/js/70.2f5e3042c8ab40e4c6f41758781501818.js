webpackJsonp([70],{RxB9:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("Gwi0"),r=e("RmFe"),n=e.n(r),s={data:function(){return{roomPay:[],lifePay:[],sumP:"",sumN:""}},created:function(){this.$store.commit("setHeader","未收账单"),this.hotelId=this.$route.query.hotelId,this.getRoomUnpay()},methods:{getRoomUnpay:function(){var t=this;Object(i.W)(this.hotelId).done(function(o){t.roomPay=o.data,t.roomNum=o.data.length;var e=o.data;t.roomP=e.reduce(function(t,o,e,i){return t+o.roomPrice},0);for(var i=0;i<e.length;i++)e[i].diff=t.getTime(e[i].startTime.substr(0,10));t.roomPay.sort(function(t,o){return t.diff-o.diff}),t.getLifeUnpay()})},getLifeUnpay:function(){var t=this;Object(i.A)(this.hotelId).done(function(o){t.lifePay=o.data,t.lifeNum=o.data.length;var e=o.data;t.lifeP=e.reduce(function(t,o,e,i){return t+o.totalPrice},0),t.sumP=t.roomP+t.lifeP,t.sumN=t.roomNum+t.lifeNum;for(var i=0;i<e.length;i++)e[i].diff=t.getTime(e[i].endTime);t.lifePay.sort(function(t,o){return t.diff-o.diff})})},getTime:function(t){var o=n()().format("YYYY-MM-DD");return n()(t).diff(n()(o),"day")},goRoom:function(t){this.$router.push({path:"/rentInfo_long",query:{orderRoomId:t.orderRoomId}})},goLife:function(t){this.$router.push({path:"/rentInfo_long",query:{orderRoomId:t.orderRoomId}})}}},f={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("section",{attrs:{id:"top"}},[e("div",[e("p",[t._v("到期未收账单")]),t._v(" "),e("p",[t._v(t._s(t.sumN))])]),t._v(" "),e("p",{staticClass:"line"}),t._v(" "),e("div",[e("p",[t._v("账单总金额（元）")]),t._v(" "),e("p",[t._v("¥ "+t._s(t.sumP?t.sumP.toFixed(2):t.sumP))])])]),t._v(" "),e("div",{attrs:{id:"top_box"}},[t._l(t.roomPay,function(o){return e("section",{key:o.id,attrs:{id:"center"},on:{click:function(e){return t.goRoom(o)}}},[e("div",[e("div",{staticClass:"c_top"},[e("div",[e("p",[t._v("\n              "+t._s(o.startTime.substr(0,10))+"\n              "),e("span",{staticClass:"box",attrs:{id:"rent"}},[t._v("租金")])]),t._v(" "),3>o.diff&&o.diff>0?e("p",[t._v("还有"+t._s(Math.abs(o.diff))+"天到期")]):o.diff<0?e("p",[t._v("已逾期"+t._s(Math.abs(o.diff))+"天")]):0==o.diff?e("p",[t._v("今天到期")]):t._e()]),t._v(" "),e("p",[t._v("¥"+t._s(o.roomPrice?o.roomPrice:0))])]),t._v(" "),o.roomInfo||o.cooperName?e("p",[t._v(t._s(t._f("splitRoomSn")(o.roomInfo))+" "+t._s(o.cooperName))]):t._e()])])}),t._v(" "),t._l(t.lifePay,function(o){return e("section",{key:o.id,attrs:{id:"center"},on:{click:function(e){return t.goLife(o)}}},[e("div",[e("div",{staticClass:"c_top"},[e("div",[e("p",[t._v("\n              "+t._s(o.endTime)+"\n              "),e("span",{staticClass:"box",attrs:{id:"ele"}},[t._v("水费")])]),t._v(" "),o.diff<0?e("p",[t._v("已逾期"+t._s(Math.abs(o.diff))+"天")]):o.diff<3&&o.diff>0?e("p",[t._v("还有"+t._s(Math.abs(o.diff))+"天到期")]):0==o.diff?e("p",[t._v("今天到期")]):t._e()]),t._v(" "),e("p",[t._v("¥"+t._s(o.totalPrice?o.totalPrice:0))])]),t._v(" "),o.roomInfo||o.cooperName?e("p",[t._v(t._s(t._f("splitRoomSn")(o.roomInfo))+" "+t._s(o.cooperName))]):t._e()])])})],2)])},staticRenderFns:[]};var a=e("k6Sl")(s,f,!1,function(t){e("s7CD")},"data-v-7fd0d19b",null);o.default=a.exports},s7CD:function(t,o){}});
//# sourceMappingURL=70.2f5e3042c8ab40e4c6f41758781501818.js.map