webpackJsonp([61],{BgeG:function(e,s){},sj5E:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=t("HkQL"),o=t.n(n),r=t("s/fh"),l=t("TmQq"),i={data:function(){return{userName:null,password:"******",new_userName:null,new_password_1:null,new_password_2:null,type:null,content:null,userInfo:{id:null,userName:null,password:null},rolesAll:[],show_setting:!1}},created:function(){this.$store.commit("setHeader",""+this.$route.query.title),"切换角色"==this.$route.query.title?this.rolesAll=JSON.parse(localStorage.getItem("roles")):(this.userInfo.userName=JSON.parse(localStorage.getItem("current_user")).userName,this.userInfo.id=JSON.parse(localStorage.getItem("current_user")).id)},methods:{chooseRole:function(e){var s=this;this.rolesAll.find(function(t,n){t.roleName==e.roleName&&s.rolesAll.unshift(s.rolesAll.splice(n,1)[0])}),this.$store.commit("roles_vuex",this.rolesAll),localStorage.setItem("roles",o()(this.rolesAll)),setTimeout("window.history.go(-1)")},openTwo:function(e,s){this.new_password_1=null,this.new_password_2=null,this.type=e,this.content=s,this.new_userName="mm"==this.type?this.userInfo.userName:this.content,this.show_setting=!0},confirmSetting:function(e,s){var t=this;if("confirm"==e){if(this.userInfo.userName=this.new_userName,"mm"==this.type&&!this.new_password_1)return Object(r.c)("请输入新密码"),this.new_password_2=null,void s(!1);if("mm"==this.type&&this.new_password_1!=this.new_password_2)return Object(r.c)("请确定两次输入密码相同"),this.new_password_2=null,void s(!1);"mm"==this.type&&this.new_password_1==this.new_password_2&&(this.userInfo.password=this.new_password_2),"mm"==this.type?(delete this.userInfo.userName,Object(l.h)(this.userInfo).done(function(e){Object(r.c)(e.msg),s(!1),t.show_setting=!1,setTimeout("window.history.go(-1)",300)})):(delete this.userInfo.password,Object(l.g)(this.userInfo).done(function(e){var n=JSON.parse(localStorage.getItem("current_user"));n.userName=t.userInfo.userName,n.username=t.userInfo.userName,localStorage.setItem("current_user",o()(n)),Object(r.c)(e.msg),s(!1),t.show_setting=!1,setTimeout("window.history.go(-1)",300)}))}else"cancel"==e&&(s(!1),this.show_setting=!1)}}},a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",["切换角色"==e.$route.query.title?t("div",{staticClass:"role_style"},e._l(e.rolesAll,function(s,n){return t("div",{key:n,staticClass:"flex",on:{click:function(t){return e.chooseRole(s)}}},[t("div",{staticStyle:{display:"flex"}},[t("div",[e._v(e._s(s.roleName))]),e._v(" "),"0"==n?t("div",{staticClass:"linght"},[e._v("当前角色")]):e._e()]),e._v(" "),t("van-icon",{attrs:{name:"arrow",color:"#C8C5C8"}})],1)}),0):t("div",{staticStyle:{"margin-top":"10px"}},[t("van-cell",{attrs:{title:"登录名称","is-link":"",value:e.userInfo.userName},on:{click:function(s){return e.openTwo("zh",e.userInfo.userName)}}}),e._v(" "),t("van-cell",{attrs:{title:"修改密码","is-link":"",value:e.password},on:{click:function(s){return e.openTwo("mm",e.password)}}})],1),e._v(" "),t("van-dialog",{attrs:{title:"mm"==e.type?"设置登录密码":"设置登录名称","before-close":e.confirmSetting,"show-cancel-button":""},model:{value:e.show_setting,callback:function(s){e.show_setting=s},expression:"show_setting"}},["zh"==e.type?t("van-field",{attrs:{label:"账号",placeholder:"请设置账号(输入数字或字母)"},model:{value:e.new_userName,callback:function(s){e.new_userName=s},expression:"new_userName"}}):e._e(),e._v(" "),"mm"==e.type?t("van-field",{attrs:{label:"新密码",placeholder:"请输入新密码"},model:{value:e.new_password_1,callback:function(s){e.new_password_1=s},expression:"new_password_1"}}):e._e(),e._v(" "),"mm"==e.type?t("van-field",{attrs:{label:"确认新密码",placeholder:"请再次重复输入新密码"},model:{value:e.new_password_2,callback:function(s){e.new_password_2=s},expression:"new_password_2"}}):e._e()],1)],1)},staticRenderFns:[]};var u=t("k6Sl")(i,a,!1,function(e){t("BgeG")},"data-v-a9985774",null);s.default=u.exports}});
//# sourceMappingURL=61.def9949319bbd31b9f4d1758781501818.js.map