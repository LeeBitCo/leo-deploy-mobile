webpackJsonp([131],{GrVd:function(e,t){},hN3n:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("NpYV"),r=i("iClD"),s=i("Gwi0"),l=i("tN5p"),n=i("RmFe"),a=i.n(n),d={data:function(){return{info:null,lifeCostBills:[],rentalBills:[],depositReason:null,comeTotal:null,currenTime:a()().format("YYYY-MM-DD"),orderDepositRefund:0,orderRoomRefuse:0,orderRemainElecAmount:0,lifeStatus:[],res:null,newData:null,newOrder:null,c_time:null,myValue:"550",renson:null,leaveRuleTitle:"提前退房不退房费不退押金",uPrice:null,aaa:null,show_bottom:!1,itemOrderIsignore:!1}},created:function(){this.$store.commit("setHeader","退租结算"),this.c_time=Object(r.dataFilter)(a()(),"YYYY年MM月DD日"),this.$route.query.cooperOrderRoomId?this.getCooperRentCount(this.$route.query.cooperOrderRoomId):this.getRentCount(this.$route.query.orderRoomId)},computed:{computedOrderDepositRefund:{get:function(){this.aaa=null;var e=Number(this.orderDepositRefund)-Number(this.comeTotal)<0?0:Number(this.orderDepositRefund)-Number(this.comeTotal);return Number(e).toFixed(2)},set:function(e){console.log(e),this.aaa=Number(e)}},bottomTotal:function(){var e=Number(this.orderRoomRefuse)+Number(this.orderRemainElecAmount);return this.saveBottomTotal=Number(e).toFixed(2),Number(e).toFixed(2)}},watch:{aaa:function(e){e>this.newData.deposit&&(Object(o.Toast)({message:"不能超过"+this.newData.deposit+"元",duration:900}),this.aaa=0)}},methods:{getRentCount:function(e){var t=this;Object(s.N)(e).done(function(e){t.getDeal(e)})},getCooperRentCount:function(e){var t=this;Object(l.h)({cooperOrderRoomId:e}).done(function(e){t.getDeal(e)})},getDeal:function(e){if(this.newData=e.data,this.uPrice=Number(e.data.order.price/(30*e.data.order.paymentMethod)).toFixed(2),e.data.order.rule){var t=JSON.parse(e.data.order.rule);t.leaveRule?"0"==t.roomPrice&&"0"==t.deposit?this.leaveRuleTitle="提前退房不退房费不退押金":"0"==t.roomPrice&&"1"==t.deposit?this.leaveRuleTitle="提前退房不退房费退押金":"1"==t.roomPrice&&"0"==t.deposit?this.leaveRuleTitle="提前退房退房费不退押金":"1"==t.roomPrice&&"1"==t.deposit&&(this.leaveRuleTitle="提前退房退房费退押金"):this.leaveRuleTitle="提前退房不退房费不退押金"}this.newOrder=e.order,this.depositReason=e.order.depositCutReason,this.orderRoomRefuse=Number(e.order.roomRefuse).toFixed(2),this.orderDepositRefund=e.data.deposit,this.orderRemainElecAmount=Number(e.order.remainElecAmount).toFixed(2),this.lifeCostBills=e.order.cooperLifeCostBills||e.order.lifeCostBills,this.lifeCount=0;for(var i=0;i<this.lifeCostBills.length;i++)this.lifeCostBills[i].isIgnore=!1,this.lifeCount+=this.lifeCostBills[i].totalPrice,this.lifeCostBills[i].set_round=i,this.lifeCostBills[i].set_length=this.lifeCostBills.length;this.rentalBills=e.order.cooperRentalBills||e.order.rentalBills,this.rentCount=0;for(var o=0;o<this.rentalBills.length;o++)this.rentalBills[o].isIgnore=!1,0==this.rentalBills[o].payStatus&&(this.rentCount+=this.rentalBills[o].roomPrice);this.comeTotal=Number(this.lifeCount+this.rentCount).toFixed(2)},goNext:function(e,t,i,o){this.itemOrder=o,this.itemOrderIsignore=this.itemOrder.isIgnore,this.length=t,this.index=i,this.type=e,this.show_bottom=!0},editOrder:function(){"life"==this.type?(localStorage.removeItem("life_fee"),this.$router.push({path:"/lifeFeetrans",query:{lifeCostBillId:this.itemOrder.id,set_length:this.length,set_round:this.index}})):this.$route.query.cooperOrderRoomId?this.$router.push({path:"/roomFeeD",query:{cooperRentalBillId:this.itemOrder.id}}):this.$router.push({path:"/roomFeeD",query:{rentalBillId:this.itemOrder.id}}),this.show_bottom=!1},ignorec:function(){"life"==this.type?(this.lifeCostBills.find(function(e){return e.id==e.id}).isIgnore=!0,this.comeTotal-=this.itemOrder.totalPrice):(this.rentalBills.find(function(e){return e.id==e.id}).isIgnore=!0,this.comeTotal-=this.itemOrder.roomPrice),this.show_bottom=!1},recoveryOrder:function(){"life"==this.type?(this.lifeCostBills.find(function(e){return e.id==e.id}).isIgnore=!1,this.comeTotal+=this.itemOrder.totalPrice):(this.rentalBills.find(function(e){return e.id==e.id}).isIgnore=!1,this.comeTotal+=this.itemOrder.roomPrice),this.show_bottom=!1},roomRent:function(){var e=this;o.MessageBox.confirm("",{message:"退租后剩余租房押金将退回给租客，请谨慎操作！",title:"确定退租？",cancelButtonText:"取消",confirmButtonText:"确定"}).then(function(t){if("confirm"==t){var i={orderRoomId:e.newData.id,orderId:e.newData.orderId,depositCut:e.aaa?e.aaa:0,depositCutReason:e.depositReason};(e.$route.query.cooperOrderRoomId?l.E:s._55)(i).done(function(e){Object(o.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}}).catch(function(e){console.log(e)})}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"rentCount_box"}},[e.newData&&e.newOrder?i("van-cell-group",[i("van-cell",{staticStyle:{"margin-top":"14px"},attrs:{title:"起租日期",value:e._f("dataFilter")(e.newData.order.startTime)}}),e._v(" "),i("van-cell",{attrs:{title:"到租日期",value:e._f("dataFilter")(e.newData.order.endTime)}}),e._v(" "),i("van-cell",{attrs:{title:"退租政策",value:e.leaveRuleTitle}}),e._v(" "),i("van-cell",{staticStyle:{"margin-top":"14px"},attrs:{title:"退租日期",value:e.c_time}}),e._v(" "),i("van-cell",{staticClass:"f_bold",staticStyle:{"margin-top":"14px"},attrs:{title:"未收款账单",value:e._f("point")(e.comeTotal)}}),e._v(" "),e._l(e.rentalBills,function(t,o){return i("div",{key:o},[i("van-cell",{attrs:{"is-link":""},scopedSlots:e._u([{key:"title",fn:function(){return[i("div",{staticClass:"g_flex"},[i("div",[i("span",[e._v(e._s(e._f("dataFilter")(t.startTime,"MM/DD"))+" - "+e._s(e._f("dataFilter")(t.endTime,"MM/DD")))]),e._v(" "),i("span",{staticClass:"font_style"},[e._v("租金")])]),e._v(" "),i("div",{class:1==t.isIgnore?"g_c_b2":"",on:{click:function(i){return e.goNext("room",e.lifeCostBills.length,o,t)}}},[e._v(e._s(e._f("point")(t.roomPrice))+" "+e._s(1==t.isIgnore?"(已忽略)":""))])])]},proxy:!0}],null,!0)})],1)}),e._v(" "),e._l(e.lifeCostBills,function(t,o){return i("div",{key:o},[i("van-cell",{attrs:{"is-link":""},scopedSlots:e._u([{key:"title",fn:function(){return[i("div",{staticClass:"g_flex"},[i("div",[i("span",[e._v(e._s(e._f("dataFilter")(t.startTime,"MM/DD"))+" - "+e._s(e._f("dataFilter")(t.endTime,"MM/DD")))]),e._v(" "),i("span",{staticClass:"font_style"},[e._v("生活")])]),e._v(" "),0==t.status?i("div",{class:1==t.isIgnore?"g_c_b2":"g_c_f00",on:{click:function(i){return e.goNext("life",e.lifeCostBills.length,o,t)}}},[e._v(e._s(1==t.isIgnore?"已忽略":"未抄表"))]):i("div",{class:1==t.isIgnore?"g_c_b2":"",on:{click:function(i){return e.goNext("life",e.lifeCostBills.length,o,t)}}},[e._v(e._s(e._f("point")(t.totalPrice))+" "+e._s(1==t.isIgnore?"(已忽略)":""))])])]},proxy:!0}],null,!0)})],1)}),e._v(" "),i("van-cell",{staticClass:"f_bold",staticStyle:{"margin-top":"14px"},attrs:{title:"退款金额",value:e.bottomTotal}}),e._v(" "),e.newOrder?i("van-cell",{scopedSlots:e._u([{key:"title",fn:function(){return[i("div",{staticClass:"g_flex g_w_100"},[i("div",{staticClass:"g_w_50"},[i("div",[e._v("应退租金")]),e._v(" "),"0"!=e.newOrder.roomRefuse?i("div",{staticClass:"g_c_b2"},[e._v(e._s(e.newOrder.dayOut)+"天*"+e._s(e.uPrice)+"元/天")]):e._e()]),e._v(" "),i("van-field",{staticStyle:{width:"50%",padding:"0"},attrs:{readonly:"",placeholder:"输入应退租金","input-align":"right"},model:{value:e.orderRoomRefuse,callback:function(t){e.orderRoomRefuse=t},expression:"orderRoomRefuse"}})],1)]},proxy:!0}],null,!1,29442753)}):e._e(),e._v(" "),i("van-field",{attrs:{label:"应退电费",readonly:"","input-align":"right",placeholder:"输入应退电费"},model:{value:e.orderRemainElecAmount,callback:function(t){e.orderRemainElecAmount=t},expression:"orderRemainElecAmount"}}),e._v(" "),i("van-cell",{staticStyle:{"margin-top":"14px"},scopedSlots:e._u([{key:"title",fn:function(){return[i("div",{staticClass:"g_flex g_w_100"},[i("div",{staticClass:"g_w_50"},[i("div",[e._v("扣押金额")]),e._v(" "),e.newData?i("div",{staticClass:"g_c_b2"},[e._v("押金:"+e._s(e.newData.deposit))]):e._e()]),e._v(" "),i("van-field",{staticStyle:{width:"50%",padding:"0"},attrs:{placeholder:"输入扣押金额","input-align":"right"},model:{value:e.aaa,callback:function(t){e.aaa=t},expression:"aaa"}})],1)]},proxy:!0}],null,!1,1750732570)}),e._v(" "),i("van-field",{directives:[{name:"show",rawName:"v-show",value:e.newData&&e.newData.deposit>0,expression:"newData && newData.deposit > 0"}],attrs:{label:"扣押原因","input-align":"right",placeholder:"输入扣押原因"},model:{value:e.depositReason,callback:function(t){e.depositReason=t},expression:"depositReason"}})],2):e._e(),e._v(" "),i("van-button",{staticClass:"btn_refund",on:{click:e.roomRent}},[e._v("确定退租")]),e._v(" "),i("van-popup",{attrs:{position:"bottom"},model:{value:e.show_bottom,callback:function(t){e.show_bottom=t},expression:"show_bottom"}},[i("div",{staticClass:"p12 g_bb",on:{click:e.editOrder}},[e._v("编辑账单")]),e._v(" "),0==e.itemOrderIsignore?i("div",{staticClass:"p12 g_c_FF5 g_bb",on:{click:e.ignorec}},[e._v("忽略此账单")]):e._e(),e._v(" "),1==e.itemOrderIsignore?i("div",{staticClass:"p12 g_c_ff7 g_bb",on:{click:e.recoveryOrder}},[e._v("恢复此账单")]):e._e(),e._v(" "),i("div",{staticClass:"kongbai"}),e._v(" "),i("div",{staticClass:"p12 g_c_b2 g_mt10",on:{click:function(t){e.show_bottom=!1}}},[e._v("取消")])])],1)},staticRenderFns:[]};var u=i("k6Sl")(d,c,!1,function(e){i("GrVd")},"data-v-2104a28d",null);t.default=u.exports}});
//# sourceMappingURL=131.31fce6dbb6f777309d141758781501818.js.map