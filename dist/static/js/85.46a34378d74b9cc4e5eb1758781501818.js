webpackJsonp([85],{"baN+":function(e,t){},dNDJ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("NpYV"),i=s("UJbh"),r=s("Gwi0"),l={data:function(){return{listType:[],value:null,show:!1,txetRight:null,new_num:null,unit:"",cEle:"",cWater:"",cGas:"",three:[{id:0,title:"费用项目"},{id:1,title:"上期读数"},{id:2,title:"结算读数"}],lastInfo:""}},created:function(){this.$store.commit("setHeader","换表"),this.id=this.$route.query.id,this.orderId=this.$route.query.orderId,this.types()},mounted:function(){},computed:{totlePrice:function(){return 1==this.value&&this.cEle?Number(this.lastInfo.elecPrice)*(Number(this.cEle)-Number(this.lastInfo.preElecDegree)):2==this.value&&this.cWater?Number(this.lastInfo.waterPrice)*(Number(this.cWater)-Number(this.lastInfo.preWaterDegree)):3==this.value&&this.cGas?Number(this.lastInfo.gasPrice)*(Number(this.cGas)-Number(this.lastInfo.preGasDegree)):void 0}},methods:{types:function(){var e=this;Object(i.a)({dictType:"business_meter_type"}).done(function(t){for(var s=[],a=0;a<t.data.length;a++){var i={};i.value=t.data[a].dictValue,i.text=t.data[a].dictLabel,s.push(i)}e.listType=s,e.txetRight=e.listType[0].text,e.value=e.listType[0].value,e.getLifeInfo()})},chooseType:function(e){this.txetRight=e.text,this.value=e.value,this.getLifeInfo(),this.show=!1},getLifeInfo:function(){var e=this;Object(r.z)(this.id).done(function(t){e.lastInfo=t.data,1==e.value?e.unit=e.lastInfo.elecPrice:2==e.value?e.unit=e.lastInfo.waterPrice:e.unit=e.lastInfo.gasPrice})},changeWatch:function(){if(!this.new_num)return Object(a.Toast)({message:"请输入新表读数",duration:900}),!1;if(this.unit){if(1==this.value&&!this.cEle||1==this.value&&this.cEle<this.lastInfo.preElecDegree)return Object(a.Toast)({message:"请正确输入电表结算读数",duration:900}),this.cEle="",!1;if(2==this.value&&!this.cWater||2==this.value&&this.cWater<this.lastInfo.preWaterDegree)return Object(a.Toast)({message:"请正确输入水表结算读数",duration:900}),this.cWater="",!1;if(3==this.value&&!this.cGas||3==this.value&&this.cGas<this.lastInfo.preGasDegree)return Object(a.Toast)({message:"请正确输入气表结算读数",duration:900}),this.cGas="",!1}1==this.value?this.data={orderId:this.orderId,meterType:this.value,preElecDegree:this.cEle,elecDegree:this.new_num}:2==this.value?this.data={orderId:this.orderId,meterType:this.value,preWaterDegree:this.cWater,waterDegree:this.new_num}:3==this.value&&(this.data={orderId:this.orderId,meterType:this.value,preGasDegree:this.cGas,gasDegree:this.new_num}),Object(r._57)(this.id,this.data).done(function(e){Object(a.Toast)({message:e.msg,duration:900}),setTimeout("window.history.go(-1)",900)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"font-size":"15px","background-color":"#f6f6f6",position:"fixed",top:"70px",bottom:"0px",left:"0px",right:"0px","overflow-y":"scroll",color:"#000"}},[a("div",[a("div",{staticClass:"watchBox flex"},[a("label",[e._v("换表类型")]),e._v(" "),a("div",{staticClass:"boxType flex",on:{click:function(t){e.show=!0}}},[a("p",[e._v(e._s(e.txetRight))]),e._v(" "),a("img",{attrs:{src:s("JfLI"),alt:""}})])]),e._v(" "),a("div",{staticClass:"watchBox flex"},[e._m(0),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.new_num,expression:"new_num"}],staticClass:"right",attrs:{type:"number",placeholder:"请输入新表初始读数"},domProps:{value:e.new_num},on:{input:function(t){t.target.composing||(e.new_num=t.target.value)}}}),a("span",[e._v("度")])]),e._v(" "),e.unit>0?a("div",{staticClass:"oldwatch"},[a("div",{staticClass:"watchBox w_left"},[a("label",{staticClass:"old"},[e._v("旧表费用结算")]),e._v(" "),a("label",{staticClass:"c88"},[e._v("单位：¥"+e._s(e.unit)+"/吨")])]),e._v(" "),a("div",{staticClass:"bgf4"},[a("div",{staticClass:"flex"},e._l(e.three,function(t){return a("p",{key:t.id},[e._v(e._s(t.title))])}),0)]),e._v(" "),a("div",[a("div",{staticClass:"watchBox flex w100"},[a("p",{staticClass:"w20 w_left"},[e._v(e._s(e.txetRight))]),e._v(" "),1==e.value?a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastInfo.preElecDegree,expression:"lastInfo.preElecDegree"}],staticClass:"w20",attrs:{type:"text",disabled:""},domProps:{value:e.lastInfo.preElecDegree},on:{input:function(t){t.target.composing||e.$set(e.lastInfo,"preElecDegree",t.target.value)}}}):e._e(),e._v(" "),2==e.value?a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastInfo.preWaterDegree,expression:"lastInfo.preWaterDegree"}],staticClass:"w20",attrs:{type:"text",disabled:""},domProps:{value:e.lastInfo.preWaterDegree},on:{input:function(t){t.target.composing||e.$set(e.lastInfo,"preWaterDegree",t.target.value)}}}):e._e(),e._v(" "),3==e.value?a("input",{directives:[{name:"model",rawName:"v-model",value:e.lastInfo.preGasDegree,expression:"lastInfo.preGasDegree"}],staticClass:"w20",attrs:{type:"text",disabled:""},domProps:{value:e.lastInfo.preGasDegree},on:{input:function(t){t.target.composing||e.$set(e.lastInfo,"preGasDegree",t.target.value)}}}):e._e(),e._v(" "),1==e.value?a("input",{directives:[{name:"model",rawName:"v-model",value:e.cEle,expression:"cEle"}],staticClass:"w20 w_right",attrs:{type:"number"},domProps:{value:e.cEle},on:{input:function(t){t.target.composing||(e.cEle=t.target.value)}}}):e._e(),e._v(" "),2==e.value?a("input",{directives:[{name:"model",rawName:"v-model",value:e.cWater,expression:"cWater"}],staticClass:"w20 w_right",attrs:{type:"number"},domProps:{value:e.cWater},on:{input:function(t){t.target.composing||(e.cWater=t.target.value)}}}):e._e(),e._v(" "),3==e.value?a("input",{directives:[{name:"model",rawName:"v-model",value:e.cGas,expression:"cGas"}],staticClass:"w20 w_right",attrs:{type:"number"},domProps:{value:e.cGas},on:{input:function(t){t.target.composing||(e.cGas=t.target.value)}}}):e._e()])]),e._v(" "),a("div",{staticClass:"watchBox w_left p10",staticStyle:{padding:"10px 20px"}},[a("label",{staticClass:"old"},[e._v("费用总计")]),e._v(" "),a("label",{staticClass:"c88"},[e._v("¥"+e._s(e.totlePrice?e.totlePrice.toFixed(2):0))])])]):e._e(),e._v(" "),a("mt-button",{attrs:{id:"button"},on:{click:e.changeWatch}},[e._v("确认换表")]),e._v(" "),a("mt-popup",{staticClass:"show_box",attrs:{position:"bottom"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("p",{staticClass:"title"},[e._v("选择换表类型")]),e._v(" "),e._l(e.listType,function(t){return a("div",{key:t.value,staticClass:"text"},[a("div",{on:{click:function(s){return e.chooseType(t)}}},[e._v(e._s(t.text))])])})],2)],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{staticClass:"old"},[this._v("新表读数\n        "),t("img",{staticClass:"xing",attrs:{src:s("OaXa"),alt:""}})])}]};var o=s("k6Sl")(l,n,!1,function(e){s("baN+")},"data-v-68ad477d",null);t.default=o.exports}});
//# sourceMappingURL=85.46a34378d74b9cc4e5eb1758781501818.js.map