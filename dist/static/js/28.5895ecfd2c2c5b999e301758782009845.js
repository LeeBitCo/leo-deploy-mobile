webpackJsonp([28],{Q0OT:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("6uKG"),n=t.n(r),i=t("RmFe"),a=t.n(i),s=t("Gwi0"),f=t("wWbh"),d=t("tN5p"),c={data:function(){return{NowInfo:[],rentInfo:{},roomInfo:[],cooperLifeInfo:[],allInfo:[],lastEndTime:"",show_addType:!1}},filters:{dataFormat:function(o){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?a()(o).format("YYYY年MM月DD"):a()(o).format("YYYY-MM-DD")}},created:function(){this.$store.commit("setHeader",this.$route.query.cooperationName?"租赁信息-"+this.$route.query.cooperationName:"租赁信息"),this.getDetails()},methods:{getDetails:function(){var o=this;Object(d.g)({roomId:this.$route.query.roomId}).done(function(e){o.getCooperLast(),o.NowInfo=e.data})},getCooperLast:function(){var o=this;Object(f.b)({cooperOrderRoomId:this.$route.query.cooperOrderRoomId}).done(function(e){o.getCooperLifeInfo()})},getCooperLifeInfo:function(){var o=this;Object(f.a)({cooperOrderRoomId:this.$route.query.cooperOrderRoomId}).done(function(e){o.cooperLifeInfo=e.data,o.getCooperRoomInfo();for(var t=0;t<o.cooperLifeInfo.length;t++){var r={diff:o.difffDay(o.cooperLifeInfo[t].endTime),new_endTime:o.cooperLifeInfo[t].endTime,set_round:t,set_life:!0,set_length:o.cooperLifeInfo.length};n()(o.cooperLifeInfo[t],r)}})},getCooperRoomInfo:function(){var o=this;Object(f.c)({cooperOrderRoomId:this.$route.query.cooperOrderRoomId}).done(function(e){o.cooperRoomInfo=e.data;for(var t=0;t<o.cooperRoomInfo.length;t++)o.cooperRoomInfo[t].new_endTime=o.lastDay(o.cooperRoomInfo[t].startTime),o.cooperRoomInfo[t].diff=o.difffDay(o.cooperRoomInfo[t].new_endTime);o.allInfo=o.cooperRoomInfo.concat(o.cooperLifeInfo);var r,n=[],i=[];o.allInfo.map(function(o){"1"==o.payStatus?n.push(o):i.push(o)}),n.sort(function(o,e){return Date.parse(e.new_endTime)-Date.parse(o.new_endTime)}),i.sort(function(o,e){return e.diff>o.diff?1:-1}),r=i.concat(n),o.allInfo=r})},getCurrentInfo:function(o){var e=this;Object(s.J)(o).done(function(t){e.NowInfo=t.data,e.getinfo_life(o)})},getinfo_life:function(o){var e=this;Object(s.y)(o).done(function(t){e.lifeInfo=t.data,e.getinfo_room(o);for(var r=0;r<e.lifeInfo.length;r++){var i={diff:e.difffDay(e.lifeInfo[r].endTime),new_endTime:e.lifeInfo[r].endTime,set_round:r,set_life:!0,set_length:e.lifeInfo.length};n()(e.lifeInfo[r],i)}})},getinfo_room:function(o){var e=this;Object(s.V)(o).done(function(t){e.getLast(o),e.roomInfo=t.data;for(var r=0;r<e.roomInfo.length;r++)e.roomInfo[r].new_endTime=e.lastDay(e.roomInfo[r].startTime),e.roomInfo[r].diff=e.difffDay(e.roomInfo[r].new_endTime);e.allInfo=e.roomInfo.concat(e.lifeInfo);var n,i=[],a=[];e.allInfo.map(function(o){"1"==o.payStatus?i.push(o):a.push(o)}),i.sort(function(o,e){return Date.parse(e.new_endTime)-Date.parse(o.new_endTime)}),a.sort(function(o,e){return e.diff>o.diff?1:-1}),n=a.concat(i),e.allInfo=n})},getLast:function(o){var e=this;Object(s.T)(o).done(function(o){o.data&&(e.lastEndTime=o.data.endTime?o.data.endTime.substr(0,10):"")})},lastDay:function(o){a()();return a()(o).subtract(1,"day").format("YYYY-MM-DD")},difffDay:function(o){var e=a()().format("YYYY-MM-DD");return a()(o).diff(a()(e),"day")},goDetail:function(){this.$router.push({path:"/details_two",query:{cooperOrderRoomId:this.NowInfo.id,cooperationName:this.$route.query.cooperationName}})},goRoom:function(o){if(o.set_life){localStorage.removeItem("life_fee");var e={};e=this.$route.query.cooperOrderId?{cooperLifeCostBillId:o.id,set_length:o.set_length,set_round:o.set_round}:{lifeCostBillId:o.id,set_length:o.set_length,set_round:o.set_round},this.$router.push({path:"/lifeFeetrans",query:e})}else this.$route.query.cooperOrderId?this.$router.push({path:"/business-room-details",query:{cooperOrderId:this.$route.query.cooperOrderId,cooperRentalBillId:o.id,set_length:o.set_length,set_round:o.set_round}}):this.$router.push({path:"/roomFeeD",query:{rentalBillId:o.id,orderType:this.NowInfo.orderType,manual:o.manual}})},paySetting:function(o){0==o.status&&0==o.set_round&&this.$route.query.cooperOrderId&&this.$router.push({path:"/business-pay-set",query:{cooperOrderId:o.cooperOrderId,cooperLifeCostBillId:o.id,cooperOrderRoomId:this.$route.query.cooperOrderRoomId}})},choose:function(o){this.$router.push({path:"/add_bill_two",query:{title:o,cooperOrderId:this.NowInfo.cooperOrderId,cooperOrderRoomId:this.NowInfo.id,startTime:this.NowInfo.cooperOrder.startTime,endTime:this.NowInfo.cooperOrder.endTime}}),this.show_addType=!1}}},l={render:function(){var o=this,e=o.$createElement,r=o._self._c||e;return o.NowInfo?r("div",{staticStyle:{"background-color":"#f6f6f6","font-size":"15px",padding:"20px 0",position:"fixed",top:"50px",bottom:"0px",left:"0px",right:"0px","overflow-y":"scroll"}},[r("section",[r("div",{staticClass:"headUrl"},[o.NowInfo.order?r("img",{attrs:{src:o.NowInfo.order.headUrl,alt:""}}):r("img",{attrs:{src:"https://wx.qlogo.cn/mmopen/vi_32/9fcFhCxx3sxFwOtNJTsfkn2Us0pDbFv4f88ThciaCRHoSnTjHqXM35USNwv7LLBZliceVvMic8wx9lQkDNNfWEDqA/132",alt:""}}),o._v(" "),r("div",{staticClass:"headUrl_fo"},[r("div",{staticClass:"name"},[r("p",[o._v(o._s(o.$route.query.cooperationName||"暂无"))]),o._v(" "),r("p",{staticClass:"c_88 line"},[o._v(o._s(o.$route.query.scaleName||"暂无")+"-"+o._s(o.$route.query.roomSn))]),o._v(" "),r("p",{staticClass:"c_88 line"},[o._v("到期时间：\n            "),r("span",{staticStyle:{color:"#000","font-weight":"bold"}},[o._v(o._s(o._f("dataFilter")(o.NowInfo.finishTime,"YYYY.MM.DD")))])])]),o._v(" "),r("div",{staticClass:"img_right",on:{click:o.goDetail}},[r("span",{staticClass:"c_88"},[o._v("租赁详情")]),o._v(" "),r("img",{attrs:{src:t("jkz5"),alt:""}})])])])]),o._v(" "),"1"==o.NowInfo.status||"2"==o.NowInfo.status?r("div",{staticClass:"add_btn",on:{click:function(e){o.show_addType=!0}}},[r("van-icon",{staticStyle:{"padding-right":"10px"},attrs:{name:"add",color:"#FF7F47",size:"18px"}}),o._v(" "),r("div",[o._v("添加账单")])],1):o._e(),o._v(" "),r("section",[r("div",{attrs:{id:"roomBox"}},o._l(o.allInfo,function(e,n){return r("div",{key:n,staticClass:"room_fo"},[r("div",{staticClass:"loop",class:1==e.payStatus?"payed":"nopay"},[r("div",{staticClass:"loop_l",on:{click:function(t){return o.goRoom(e)}}},[r("div",[r("p",{staticStyle:{"white-space":"nowrap"}},["3"==o.NowInfo.orderType?r("span",[o._v("\n                  "+o._s(o._f("dataFilter")(e.startTime,"YYYY.MM.DD"))+"~"+o._s(o._f("dataFilter")(e.endTime,"YYYY.MM.DD"))+"\n                ")]):o._e(),o._v(" "),"4"==o.NowInfo.orderType?r("span",[o._v("\n                  "+o._s(e.new_endTime?e.new_endTime:"")+"\n                ")]):o._e(),o._v(" "),e.set_life?r("span",{staticClass:"w16",class:"1"==e.payStatus?"edf":"bc"},[o._v("生活")]):r("span",{staticClass:"w16",class:"1"==e.payStatus?"ffa":"ff7"},[o._v("租金")])]),o._v(" "),e.diff>"0"&&"0"==e.payStatus?r("p",{staticClass:"f12"},[o._v("距收款日："+o._s(Math.abs(e.diff))+"天")]):e.diff<"0"&&"0"==e.payStatus?r("p",{staticClass:"c_f0 f12"},[o._v("已逾期"+o._s(Math.abs(e.diff))+"天")]):"0"==e.diff&&"0"==e.payStatus?r("p",{staticClass:"f12"},[o._v("今日到期")]):"1"==e.payStatus?r("p",{staticClass:"f12"},[o._v("到账日期："+o._s(e.payTime?e.payTime.substr(0,10):e.payTime))]):o._e()]),o._v(" "),"1"==e.payStatus?r("img",{staticClass:"ispayed",attrs:{src:t("vV8R"),alt:""}}):o._e()]),o._v(" "),r("p",{staticClass:"money"},[o._v("¥"+o._s(e.set_life?e.totalPrice:e.roomPrice))])])])}),0)]),o._v(" "),r("van-popup",{staticClass:"type_bottom",attrs:{position:"bottom"},model:{value:o.show_addType,callback:function(e){o.show_addType=e},expression:"show_addType"}},[r("div",{staticClass:"bb",staticStyle:{"font-weight":"bold"}},[o._v("请选择账单类型")]),o._v(" "),"3"==o.NowInfo.orderType?r("div",{staticClass:"bb",on:{click:function(e){return o.choose("房租账单")}}},[o._v("房租账单")]):o._e(),o._v(" "),0==o.cooperLifeInfo.length?r("div",{on:{click:function(e){return o.choose("生活账单")}}},[o._v("生活账单")]):o._e(),o._v(" "),r("div",{staticStyle:{height:"4px",background:"#EFEFF4"}}),o._v(" "),r("div",{staticStyle:{color:"#898989"},on:{click:function(e){o.show_addType=!1}}},[o._v("取消")])])],1):o._e()},staticRenderFns:[]};var p=t("k6Sl")(c,l,!1,function(o){t("uDY+")},"data-v-e423375a",null);e.default=p.exports},"uDY+":function(o,e){},vV8R:function(o,e){o.exports="data:image/png;base64,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"}});
//# sourceMappingURL=28.5895ecfd2c2c5b999e301758782009845.js.map